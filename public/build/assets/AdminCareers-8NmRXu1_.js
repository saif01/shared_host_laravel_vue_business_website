import{a as M}from"./adminPaginationMixin-DN7Wb3ng.js";import{R as N}from"./RichTextEditor-sKcT9EHa.js";import{_ as I,c as D,w as s,b as t,r as a,a as o,t as c,f as m,m as R,o as u,d as _,g as U,F as H,e as L}from"./app-Cmmq9EG_.js";const j={name:"DatePicker",props:{modelValue:{type:String,default:""},label:{type:String,default:"Date"},hint:{type:String,default:""},persistentHint:{type:Boolean,default:!1},variant:{type:String,default:"outlined"},clearable:{type:Boolean,default:!0},prependIcon:{type:String,default:"mdi-calendar"},title:{type:String,default:""}},emits:["update:modelValue"],data(){return{menuOpen:!1,selectedDate:""}},computed:{displayValue(){return this.selectedDate?this.formatDateForDisplay(this.selectedDate):""}},watch:{modelValue:{immediate:!0,handler(i){this.selectedDate=this.formatDateForStorage(i)}}},methods:{onSelect(i){this.selectedDate=this.formatDateForStorage(i),this.$emit("update:modelValue",this.selectedDate),this.menuOpen=!1},clearDate(){this.selectedDate="",this.$emit("update:modelValue",""),this.menuOpen=!1},formatDateForStorage(i){if(!i)return"";const e=new Date(i);if(isNaN(e.getTime()))return/^\d{4}-\d{2}-\d{2}$/.test(i)?i:"";const g=e.getFullYear(),C=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return`${g}-${C}-${l}`},formatDateForDisplay(i){if(!i)return"";const e=new Date(i);if(isNaN(e.getTime()))return i;const g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=String(e.getDate()).padStart(2,"0"),l=g[e.getMonth()],n=e.getFullYear();return`${C}-${l}-${n}`}}};function J(i,e,g,C,l,n){const b=a("v-text-field"),V=a("v-icon"),w=a("v-card-title"),k=a("v-date-picker"),S=a("v-card-text"),x=a("v-spacer"),f=a("v-btn"),p=a("v-card-actions"),h=a("v-card"),y=a("v-menu");return u(),D(y,{modelValue:l.menuOpen,"onUpdate:modelValue":e[2]||(e[2]=v=>l.menuOpen=v),"close-on-content-click":!1,location:"bottom start",transition:"scale-transition"},{activator:s(({props:v})=>[t(b,R(v,{"model-value":n.displayValue,label:g.label,hint:g.hint,"persistent-hint":g.persistentHint,variant:g.variant,readonly:!0,clearable:g.clearable,"prepend-inner-icon":g.prependIcon,density:"compact","onClick:clear":n.clearDate}),null,16,["model-value","label","hint","persistent-hint","variant","clearable","prepend-inner-icon","onClick:clear"])]),default:s(()=>[t(h,{class:"pa-2","max-width":"320"},{default:s(()=>[t(w,{class:"text-subtitle-2 py-1 px-2 d-flex align-center"},{default:s(()=>[t(V,{size:"small",class:"mr-2",icon:"mdi-calendar"}),o("span",null,c(g.title||"Select Date"),1)]),_:1}),t(S,{class:"py-1 px-2"},{default:s(()=>[t(k,{modelValue:l.selectedDate,"onUpdate:modelValue":[e[0]||(e[0]=v=>l.selectedDate=v),n.onSelect],"hide-header":"","show-adjacent-months":"",color:"primary",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(p,{class:"py-1 px-2"},{default:s(()=>[t(x),t(f,{variant:"text",size:"small",onClick:n.clearDate},{default:s(()=>e[3]||(e[3]=[m("Clear")])),_:1,__:[3]},8,["onClick"]),t(f,{variant:"flat",color:"primary",size:"small",onClick:e[1]||(e[1]=v=>l.menuOpen=!1)},{default:s(()=>e[4]||(e[4]=[m("OK")])),_:1,__:[4]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Y=I(j,[["render",J],["__scopeId","data-v-84c79d0c"]]),K={name:"CareerFormDialog",components:{RichTextEditor:N,DatePicker:Y},mixins:[M],props:{modelValue:{type:Boolean,default:!1},editingCareer:{type:Object,default:null}},emits:["update:modelValue","saved"],data(){return{activeTab:"basic",loading:!1,saving:!1,employmentTypes:[{title:"Full-time",value:"full-time"},{title:"Part-time",value:"part-time"},{title:"Contract",value:"contract"},{title:"Internship",value:"internship"},{title:"Freelance",value:"freelance"}],form:{title:"",slug:"",department:"",location:"",employment_type:"",description:"",responsibilities:"",requirements:"",benefits:"",deadline:"",published:!1,order:0}}},computed:{dialog:{get(){return this.modelValue},set(i){this.$emit("update:modelValue",i)}}},watch:{modelValue(i){i&&(this.activeTab="basic",this.editingCareer?this.loadCareerForEdit():this.resetForm())},editingCareer:{handler(i){i&&this.dialog?this.loadCareerForEdit():!i&&this.dialog&&this.resetForm()},immediate:!1}},methods:{resetForm(){this.form={title:"",slug:"",department:"",location:"",employment_type:"",description:"",responsibilities:"",requirements:"",benefits:"",deadline:"",published:!1,order:0},this.$refs.formRef&&this.$refs.formRef.resetValidation()},async loadCareerForEdit(){if(this.editingCareer){this.loading=!0;try{const e=(await this.$axios.get(`/api/v1/careers/${this.editingCareer.id}`,{headers:this.getAuthHeaders()})).data;this.form={title:e.title||"",slug:e.slug||"",department:e.department||"",location:e.location||"",employment_type:e.employment_type||"",description:e.description||"",responsibilities:e.responsibilities||"",requirements:e.requirements||"",benefits:e.benefits||"",deadline:e.deadline||"",published:e.published||!1,order:e.order||0}}catch(i){this.handleApiError(i,"Failed to load career data"),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){!this.saving&&!this.loading&&(this.dialog=!1,this.resetForm())},generateSlug(){this.form.title&&!this.editingCareer&&(this.form.slug=this.form.title.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},async saveCareer(){const{valid:i}=await this.$refs.formRef.validate();if(!i){this.showError("Please fill in all required fields");return}this.saving=!0;try{const e={title:this.form.title,slug:this.form.slug||null,department:this.form.department||null,location:this.form.location||null,employment_type:this.form.employment_type||null,description:this.form.description||null,responsibilities:this.form.responsibilities||null,requirements:this.form.requirements||null,benefits:this.form.benefits||null,deadline:this.form.deadline||null,published:this.form.published||!1,order:this.form.order||0};this.editingCareer?(await this.$axios.put(`/api/v1/careers/${this.editingCareer.id}`,e,{headers:this.getAuthHeaders()}),this.showSuccess("Career updated successfully")):(await this.$axios.post("/api/v1/careers",e,{headers:this.getAuthHeaders()}),this.showSuccess("Career created successfully")),this.$emit("saved"),this.closeDialog()}catch(e){this.handleApiError(e,this.editingCareer?"Failed to update career":"Failed to create career")}finally{this.saving=!1}}}},G={class:"text-h5 font-weight-bold"},Q={key:0,class:"d-flex align-center justify-center pa-12"},W={class:"text-center"},X={class:"pa-6"},Z={class:"pa-6"};function $(i,e,g,C,l,n){const b=a("v-btn"),V=a("v-card-title"),w=a("v-progress-circular"),k=a("v-tab"),S=a("v-tabs"),x=a("v-text-field"),f=a("v-col"),p=a("v-select"),h=a("DatePicker"),y=a("v-switch"),v=a("v-row"),E=a("v-window-item"),F=a("v-label"),T=a("RichTextEditor"),z=a("v-window"),r=a("v-form"),A=a("v-card-text"),P=a("v-spacer"),O=a("v-card-actions"),q=a("v-card"),B=a("v-dialog");return u(),D(B,{modelValue:n.dialog,"onUpdate:modelValue":e[14]||(e[14]=d=>n.dialog=d),"max-width":"1000",scrollable:"",persistent:""},{default:s(()=>[t(q,null,{default:s(()=>[t(V,{class:"d-flex align-center justify-space-between bg-primary text-white pa-4"},{default:s(()=>[o("span",G,c(g.editingCareer?"Edit Career":"Create New Career"),1),t(b,{icon:"mdi-close",variant:"text",color:"white",onClick:n.closeDialog,disabled:l.saving||l.loading},null,8,["onClick","disabled"])]),_:1}),t(A,{class:"pa-0"},{default:s(()=>[l.loading?(u(),_("div",Q,[o("div",W,[t(w,{indeterminate:"",color:"primary",size:"64"}),e[15]||(e[15]=o("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading career data...",-1))])])):(u(),D(r,{key:1,ref:"formRef"},{default:s(()=>[t(S,{modelValue:l.activeTab,"onUpdate:modelValue":e[0]||(e[0]=d=>l.activeTab=d),"bg-color":"grey-lighten-4"},{default:s(()=>[t(k,{value:"basic"},{default:s(()=>e[16]||(e[16]=[m("Basic Information")])),_:1,__:[16]}),t(k,{value:"details"},{default:s(()=>e[17]||(e[17]=[m("Job Details")])),_:1,__:[17]})]),_:1},8,["modelValue"]),t(z,{modelValue:l.activeTab,"onUpdate:modelValue":e[13]||(e[13]=d=>l.activeTab=d)},{default:s(()=>[t(E,{value:"basic"},{default:s(()=>[o("div",X,[t(v,null,{default:s(()=>[t(f,{cols:"12"},{default:s(()=>[t(x,{modelValue:l.form.title,"onUpdate:modelValue":e[1]||(e[1]=d=>l.form.title=d),label:"Job Title *",variant:"outlined",rules:[d=>!!d||"Title is required"],hint:"Enter the job title",onBlur:n.generateSlug,"persistent-hint":""},null,8,["modelValue","rules","onBlur"])]),_:1}),t(f,{cols:"12",md:"6"},{default:s(()=>[t(x,{modelValue:l.form.slug,"onUpdate:modelValue":e[2]||(e[2]=d=>l.form.slug=d),label:"Slug *",variant:"outlined",rules:[d=>!!d||"Slug is required",d=>!d||/^[a-z0-9-]+$/.test(d)||"Slug can only contain lowercase letters, numbers, and hyphens"],hint:"URL-friendly version (auto-generated from title)","persistent-hint":""},{append:s(()=>[t(b,{icon:"mdi-refresh",size:"small",variant:"text",onClick:n.generateSlug,disabled:!l.form.title},null,8,["onClick","disabled"])]),_:1},8,["modelValue","rules"])]),_:1}),t(f,{cols:"12",md:"6"},{default:s(()=>[t(x,{modelValue:l.form.order,"onUpdate:modelValue":e[3]||(e[3]=d=>l.form.order=d),label:"Order",type:"number",variant:"outlined",hint:"Display order (lower numbers first)","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"4"},{default:s(()=>[t(x,{modelValue:l.form.department,"onUpdate:modelValue":e[4]||(e[4]=d=>l.form.department=d),label:"Department",variant:"outlined",hint:"e.g., Engineering, Sales, Marketing","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"4"},{default:s(()=>[t(x,{modelValue:l.form.location,"onUpdate:modelValue":e[5]||(e[5]=d=>l.form.location=d),label:"Location",variant:"outlined",hint:"e.g., New York, Remote, Hybrid","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"4"},{default:s(()=>[t(p,{modelValue:l.form.employment_type,"onUpdate:modelValue":e[6]||(e[6]=d=>l.form.employment_type=d),items:l.employmentTypes,label:"Employment Type",variant:"outlined",hint:"Type of employment","persistent-hint":"",clearable:""},null,8,["modelValue","items"])]),_:1}),t(f,{cols:"12",md:"6"},{default:s(()=>[t(h,{modelValue:l.form.deadline,"onUpdate:modelValue":e[7]||(e[7]=d=>l.form.deadline=d),label:"Application Deadline",hint:"Deadline for applications","persistent-hint":"",title:"Select deadline","prepend-icon":"mdi-calendar-range"},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"6"},{default:s(()=>[t(y,{modelValue:l.form.published,"onUpdate:modelValue":e[8]||(e[8]=d=>l.form.published=d),label:"Published",color:"success",hint:"Publish this career on the public website","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),t(E,{value:"details"},{default:s(()=>[o("div",Z,[t(v,null,{default:s(()=>[t(f,{cols:"12"},{default:s(()=>[t(F,{class:"mb-2"},{default:s(()=>e[18]||(e[18]=[m("Job Description")])),_:1,__:[18]}),t(T,{modelValue:l.form.description,"onUpdate:modelValue":e[9]||(e[9]=d=>l.form.description=d),active:n.dialog&&l.activeTab==="details",placeholder:"Enter detailed job description..."},null,8,["modelValue","active"])]),_:1}),t(f,{cols:"12"},{default:s(()=>[t(F,{class:"mb-2"},{default:s(()=>e[19]||(e[19]=[m("Responsibilities")])),_:1,__:[19]}),t(T,{modelValue:l.form.responsibilities,"onUpdate:modelValue":e[10]||(e[10]=d=>l.form.responsibilities=d),active:n.dialog&&l.activeTab==="details",placeholder:"Enter job responsibilities..."},null,8,["modelValue","active"])]),_:1}),t(f,{cols:"12"},{default:s(()=>[t(F,{class:"mb-2"},{default:s(()=>e[20]||(e[20]=[m("Requirements")])),_:1,__:[20]}),t(T,{modelValue:l.form.requirements,"onUpdate:modelValue":e[11]||(e[11]=d=>l.form.requirements=d),active:n.dialog&&l.activeTab==="details",placeholder:"Enter job requirements..."},null,8,["modelValue","active"])]),_:1}),t(f,{cols:"12"},{default:s(()=>[t(F,{class:"mb-2"},{default:s(()=>e[21]||(e[21]=[m("Benefits")])),_:1,__:[21]}),t(T,{modelValue:l.form.benefits,"onUpdate:modelValue":e[12]||(e[12]=d=>l.form.benefits=d),active:n.dialog&&l.activeTab==="details",placeholder:"Enter job benefits..."},null,8,["modelValue","active"])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1},512))]),_:1}),t(O,{class:"pa-4 bg-grey-lighten-4"},{default:s(()=>[t(P),t(b,{variant:"text",onClick:n.closeDialog,disabled:l.saving},{default:s(()=>e[22]||(e[22]=[m("Cancel")])),_:1,__:[22]},8,["onClick","disabled"]),t(b,{color:"primary",variant:"flat",onClick:n.saveCareer,loading:l.saving},{default:s(()=>[m(c(g.editingCareer?"Update":"Create")+" Career ",1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const ee=I(K,[["render",$]]),te={name:"CareerDetailsDialog",props:{modelValue:{type:Boolean,default:!1},careerId:{type:[Number,String],default:null}},emits:["update:modelValue","edit"],data(){return{loading:!1,career:null,tab:"basic"}},computed:{dialog:{get(){return this.modelValue},set(i){this.$emit("update:modelValue",i)}}},watch:{modelValue(i){i&&this.careerId&&this.loadCareer()},careerId(){this.dialog&&this.careerId&&this.loadCareer()}},methods:{async loadCareer(){if(this.careerId){this.loading=!0,this.career=null,this.tab="basic";try{const e=(await this.$axios.get(`/api/v1/careers/${this.careerId}`,{headers:this.getAuthHeaders()})).data;if(!e)throw new Error("No career data received");this.career=e}catch(i){console.error("Failed to load career details:",i),alert("Failed to load career details. Please try again."),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){this.dialog=!1,this.career=null,this.tab="basic"},handleEdit(){this.career&&(this.$emit("edit",this.career),this.closeDialog())},viewApplications(){this.career&&(this.closeDialog(),this.$router.push({name:"AdminJobApplications",query:{career_id:this.career.id}}))},getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}},formatDate(i){return i?new Date(i).toLocaleDateString():"-"},formatDateTime(i){return i?new Date(i).toLocaleString():"-"}}},le={class:"d-flex align-center"},ie={key:0,class:"d-flex align-center justify-center pa-12"},se={class:"text-center"},oe={key:1},ae={class:"text-h6 font-weight-bold mb-4"},ne={class:"text-body-1 mb-4"},re={class:"text-body-1 mb-4"},de={class:"text-body-1 mb-4"},me={key:1,class:"text-grey"},ue={class:"text-body-1 mb-4"},ce={key:1,class:"text-grey"},pe={class:"text-body-1 mb-4"},fe={key:1,class:"text-grey"},_e={class:"text-body-1 mb-4"},ge={class:"mb-4"},ve={class:"mb-4"},be={class:"text-body-1 mb-4"},he={class:"text-body-1 mb-4"},ye=["innerHTML"],Ce=["innerHTML"],Ve=["innerHTML"],xe=["innerHTML"];function De(i,e,g,C,l,n){const b=a("v-icon"),V=a("v-btn"),w=a("v-card-title"),k=a("v-progress-circular"),S=a("v-tab"),x=a("v-tabs"),f=a("v-divider"),p=a("v-col"),h=a("v-chip"),y=a("v-row"),v=a("v-window-item"),E=a("v-window"),F=a("v-card-text"),T=a("v-spacer"),z=a("v-card-actions"),r=a("v-card"),A=a("v-dialog");return u(),D(A,{modelValue:n.dialog,"onUpdate:modelValue":e[2]||(e[2]=P=>n.dialog=P),"max-width":"1200",scrollable:""},{default:s(()=>[t(r,null,{default:s(()=>[t(w,{class:"d-flex align-center justify-space-between bg-info text-white pa-4"},{default:s(()=>[o("div",le,[t(b,{icon:"mdi-eye",class:"mr-3"}),e[3]||(e[3]=o("span",{class:"text-h5 font-weight-bold"},"Career Details",-1))]),t(V,{icon:"mdi-close",variant:"text",color:"white",onClick:n.closeDialog,disabled:l.loading},null,8,["onClick","disabled"])]),_:1}),t(F,{class:"pa-0"},{default:s(()=>[l.loading?(u(),_("div",ie,[o("div",se,[t(k,{indeterminate:"",color:"info",size:"64"}),e[4]||(e[4]=o("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading career details...",-1))])])):l.career?(u(),_("div",oe,[t(x,{modelValue:l.tab,"onUpdate:modelValue":e[0]||(e[0]=P=>l.tab=P),color:"info","bg-color":"grey-lighten-4"},{default:s(()=>[t(S,{value:"basic"},{default:s(()=>[t(b,{icon:"mdi-information",class:"mr-2"}),e[5]||(e[5]=m(" Basic Info "))]),_:1,__:[5]}),t(S,{value:"details"},{default:s(()=>[t(b,{icon:"mdi-text",class:"mr-2"}),e[6]||(e[6]=m(" Job Details "))]),_:1,__:[6]})]),_:1},8,["modelValue"]),t(f),t(E,{modelValue:l.tab,"onUpdate:modelValue":e[1]||(e[1]=P=>l.tab=P),class:"pa-6"},{default:s(()=>[t(v,{value:"basic"},{default:s(()=>[t(y,null,{default:s(()=>[t(p,{cols:"12"},{default:s(()=>[e[7]||(e[7]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Job Title",-1)),o("div",ae,c(l.career.title||"-"),1)]),_:1,__:[7]}),t(p,{cols:"12",md:"6"},{default:s(()=>[e[8]||(e[8]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Slug",-1)),o("div",ne,[t(h,{size:"small",variant:"outlined"},{default:s(()=>[m(c(l.career.slug||"-"),1)]),_:1})])]),_:1,__:[8]}),t(p,{cols:"12",md:"6"},{default:s(()=>[e[9]||(e[9]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Order",-1)),o("div",re,c(l.career.order||0),1)]),_:1,__:[9]}),t(p,{cols:"12",md:"4"},{default:s(()=>[e[10]||(e[10]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Department",-1)),o("div",de,[l.career.department?(u(),D(h,{key:0,size:"small",variant:"outlined"},{default:s(()=>[m(c(l.career.department),1)]),_:1})):(u(),_("span",me,"-"))])]),_:1,__:[10]}),t(p,{cols:"12",md:"4"},{default:s(()=>[e[11]||(e[11]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Location",-1)),o("div",ue,[l.career.location?(u(),D(h,{key:0,size:"small",variant:"outlined"},{default:s(()=>[m(c(l.career.location),1)]),_:1})):(u(),_("span",ce,"-"))])]),_:1,__:[11]}),t(p,{cols:"12",md:"4"},{default:s(()=>[e[12]||(e[12]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Employment Type",-1)),o("div",pe,[l.career.employment_type?(u(),D(h,{key:0,size:"small",variant:"outlined"},{default:s(()=>[m(c(l.career.employment_type),1)]),_:1})):(u(),_("span",fe,"-"))])]),_:1,__:[12]}),t(p,{cols:"12",md:"6"},{default:s(()=>[e[13]||(e[13]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Application Deadline",-1)),o("div",_e,c(l.career.deadline?n.formatDate(l.career.deadline):"-"),1)]),_:1,__:[13]}),t(p,{cols:"12",md:"6"},{default:s(()=>[e[14]||(e[14]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Status",-1)),o("div",ge,[t(h,{color:l.career.published?"success":"error",size:"small"},{default:s(()=>[m(c(l.career.published?"Published":"Draft"),1)]),_:1},8,["color"])])]),_:1,__:[14]}),t(p,{cols:"12",md:"6"},{default:s(()=>[e[15]||(e[15]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Applications Count",-1)),o("div",ve,[t(h,{size:"small",color:"primary",variant:"flat"},{default:s(()=>[m(c(l.career.applications_count||0)+" Applications ",1)]),_:1})])]),_:1,__:[15]}),t(p,{cols:"12",md:"6"},{default:s(()=>[e[16]||(e[16]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Created At",-1)),o("div",be,c(n.formatDateTime(l.career.created_at)),1)]),_:1,__:[16]}),l.career.updated_at?(u(),D(p,{key:0,cols:"12"},{default:s(()=>[e[17]||(e[17]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Updated At",-1)),o("div",he,c(n.formatDateTime(l.career.updated_at)),1)]),_:1,__:[17]})):U("",!0)]),_:1})]),_:1}),t(v,{value:"details"},{default:s(()=>[t(y,null,{default:s(()=>[t(p,{cols:"12"},{default:s(()=>[e[18]||(e[18]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Job Description",-1)),o("div",{class:"text-body-1 mb-4",innerHTML:l.career.description||"-"},null,8,ye)]),_:1,__:[18]}),t(p,{cols:"12"},{default:s(()=>[e[19]||(e[19]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Responsibilities",-1)),o("div",{class:"text-body-1 mb-4",innerHTML:l.career.responsibilities||"-"},null,8,Ce)]),_:1,__:[19]}),t(p,{cols:"12"},{default:s(()=>[e[20]||(e[20]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Requirements",-1)),o("div",{class:"text-body-1 mb-4",innerHTML:l.career.requirements||"-"},null,8,Ve)]),_:1,__:[20]}),t(p,{cols:"12"},{default:s(()=>[e[21]||(e[21]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Benefits",-1)),o("div",{class:"text-body-1 mb-4",innerHTML:l.career.benefits||"-"},null,8,xe)]),_:1,__:[21]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):U("",!0)]),_:1}),t(z,{class:"pa-4 bg-grey-lighten-5"},{default:s(()=>[l.career&&l.career.applications_count>0?(u(),D(V,{key:0,color:"primary","prepend-icon":"mdi-briefcase-account",onClick:n.viewApplications},{default:s(()=>[m(" View Applications ("+c(l.career.applications_count)+") ",1)]),_:1},8,["onClick"])):U("",!0),t(T),t(V,{color:"primary","prepend-icon":"mdi-pencil",onClick:n.handleEdit},{default:s(()=>e[22]||(e[22]=[m(" Edit Career ")])),_:1,__:[22]},8,["onClick"]),t(V,{color:"grey",variant:"text",onClick:n.closeDialog},{default:s(()=>e[23]||(e[23]=[m("Close")])),_:1,__:[23]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const we=I(te,[["render",De]]),ke={components:{CareerFormDialog:ee,CareerDetailsDialog:we},mixins:[M],data(){return{careers:[],showDialog:!1,editingCareer:null,showDetailsDialog:!1,selectedCareerId:null,publishedFilter:null,departmentFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}],departmentOptions:[]}},async mounted(){await this.loadCareers(),await this.loadDepartments()},methods:{async loadCareers(){try{this.loading=!0;const i=this.buildPaginationParams();this.search&&(i.search=this.search),this.publishedFilter!==null&&(i.published=this.publishedFilter),this.departmentFilter&&(i.department=this.departmentFilter);const e=await this.$axios.get("/api/v1/careers",{params:i,headers:this.getAuthHeaders()});this.careers=e.data.data||[],this.updatePagination(e.data)}catch(i){this.handleApiError(i,"Failed to load careers")}finally{this.loading=!1}},async loadDepartments(){try{const e=(await this.$axios.get("/api/v1/careers",{params:{per_page:1e3},headers:this.getAuthHeaders()})).data.data||[],g=[...new Set(e.map(C=>C.department).filter(Boolean))];this.departmentOptions=g.map(C=>({title:C,value:C}))}catch(i){console.error("Failed to load departments:",i)}},openDialog(i=null){this.editingCareer=i,this.showDialog=!0},editCareer(i){this.openDialog(i)},viewCareer(i){this.selectedCareerId=i.id,this.showDetailsDialog=!0},handleEditFromDetails(i){this.showDetailsDialog=!1,this.$nextTick(()=>{this.openDialog(i)})},handleCareerSaved(){this.loadCareers(),this.loadDepartments()},async deleteCareer(i){if(confirm("Are you sure you want to delete this career? This will also delete all associated job applications."))try{await this.$axios.delete(`/api/v1/careers/${i}`,{headers:this.getAuthHeaders()}),this.showSuccess("Career deleted successfully"),await this.loadCareers()}catch(e){this.handleApiError(e,"Error deleting career")}},onPerPageChange(){this.resetPagination(),this.loadCareers()},onSort(i){this.handleSort(i),this.loadCareers()}}},Se={class:"page-header"},Fe={class:"text-caption text-grey"},Te={key:0},Pe={class:"d-flex align-center"},Ue={class:"d-flex align-center"},Ee={class:"d-flex align-center"},Ae={class:"d-flex align-center"},ze={class:"d-flex"},Ie={key:1,class:"text-grey"},He={key:1,class:"text-grey"},Le={key:0},Me={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},Oe={class:"text-caption text-grey"},qe={key:0},Be={key:0,class:"ml-2"},Ne={key:1},Re={key:0,class:"d-flex align-center gap-2"};function je(i,e,g,C,l,n){const b=a("v-btn"),V=a("v-select"),w=a("v-col"),k=a("v-text-field"),S=a("v-row"),x=a("v-card-text"),f=a("v-card"),p=a("v-card-title"),h=a("v-icon"),y=a("v-skeleton-loader"),v=a("v-chip"),E=a("v-table"),F=a("v-pagination"),T=a("CareerFormDialog"),z=a("CareerDetailsDialog");return u(),_("div",null,[o("div",Se,[e[13]||(e[13]=o("h1",{class:"text-h4 page-title"},"Careers Management",-1)),t(b,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=r=>n.openDialog()),class:"add-button"},{default:s(()=>e[12]||(e[12]=[m("Create Career")])),_:1,__:[12]})]),t(f,{class:"mb-4"},{default:s(()=>[t(x,null,{default:s(()=>[t(S,null,{default:s(()=>[t(w,{cols:"12",md:"3"},{default:s(()=>[t(V,{modelValue:i.perPage,"onUpdate:modelValue":[e[1]||(e[1]=r=>i.perPage=r),n.onPerPageChange],items:i.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(w,{cols:"12",md:"3"},{default:s(()=>[t(V,{modelValue:l.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=r=>l.publishedFilter=r),n.loadCareers],items:l.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(w,{cols:"12",md:"3"},{default:s(()=>[t(V,{modelValue:l.departmentFilter,"onUpdate:modelValue":[e[3]||(e[3]=r=>l.departmentFilter=r),n.loadCareers],items:l.departmentOptions,label:"Filter by Department","prepend-inner-icon":"mdi-office-building",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(w,{cols:"12",md:"3"},{default:s(()=>[t(k,{modelValue:i.search,"onUpdate:modelValue":[e[4]||(e[4]=r=>i.search=r),n.loadCareers],label:"Search careers","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(f,null,{default:s(()=>[t(p,{class:"d-flex justify-space-between align-center"},{default:s(()=>[e[15]||(e[15]=o("span",null,"Careers",-1)),o("span",Fe,[e[14]||(e[14]=m(" Total Records: ")),o("strong",null,c(i.pagination.total||0),1),l.careers.length>0?(u(),_("span",Te," | Showing "+c((i.currentPage-1)*i.perPage+1)+" to "+c(Math.min(i.currentPage*i.perPage,i.pagination.total))+" of "+c(i.pagination.total),1)):U("",!0)])]),_:1,__:[15]}),t(x,null,{default:s(()=>[t(E,null,{default:s(()=>[o("thead",null,[o("tr",null,[o("th",{class:"sortable",onClick:e[5]||(e[5]=r=>n.onSort("title"))},[o("div",Pe,[e[16]||(e[16]=m(" Title ")),t(h,{icon:i.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[6]||(e[6]=r=>n.onSort("department"))},[o("div",Ue,[e[17]||(e[17]=m(" Department ")),t(h,{icon:i.getSortIcon("department"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[7]||(e[7]=r=>n.onSort("location"))},[o("div",Ee,[e[18]||(e[18]=m(" Location ")),t(h,{icon:i.getSortIcon("location"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[20]||(e[20]=o("th",null,"Applications",-1)),o("th",{class:"sortable",onClick:e[8]||(e[8]=r=>n.onSort("published"))},[o("div",Ae,[e[19]||(e[19]=m(" Published ")),t(h,{icon:i.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[21]||(e[21]=o("th",null,"Actions",-1))])]),o("tbody",null,[i.loading?(u(),_(H,{key:0},L(5,r=>o("tr",{key:`skeleton-${r}`},[o("td",null,[t(y,{type:"text",width:"200"})]),o("td",null,[t(y,{type:"text",width:"120"})]),o("td",null,[t(y,{type:"text",width:"120"})]),o("td",null,[t(y,{type:"chip",width:"60",height:"24"})]),o("td",null,[t(y,{type:"chip",width:"80",height:"24"})]),o("td",null,[o("div",ze,[t(y,{type:"button",width:"32",height:"32",class:"mr-1"}),t(y,{type:"button",width:"32",height:"32",class:"mr-1"}),t(y,{type:"button",width:"32",height:"32"})])])])),64)):(u(),_(H,{key:1},[(u(!0),_(H,null,L(l.careers,r=>(u(),_("tr",{key:r.id},[o("td",null,c(r.title),1),o("td",null,[r.department?(u(),D(v,{key:0,size:"small",variant:"outlined"},{default:s(()=>[m(c(r.department),1)]),_:2},1024)):(u(),_("span",Ie,"-"))]),o("td",null,[r.location?(u(),D(v,{key:0,size:"small",variant:"outlined"},{default:s(()=>[m(c(r.location),1)]),_:2},1024)):(u(),_("span",He,"-"))]),o("td",null,[t(v,{size:"small",color:"primary",variant:"flat"},{default:s(()=>[m(c(r.applications_count||0),1)]),_:2},1024)]),o("td",null,[t(v,{color:r.published?"success":"error",size:"small"},{default:s(()=>[m(c(r.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),o("td",null,[t(b,{size:"small",icon:"mdi-eye",onClick:A=>n.viewCareer(r),variant:"text",color:"info",title:"View Career"},null,8,["onClick"]),t(b,{size:"small",icon:"mdi-pencil",onClick:A=>n.editCareer(r),variant:"text",title:"Edit Career"},null,8,["onClick"]),t(b,{size:"small",icon:"mdi-delete",onClick:A=>n.deleteCareer(r.id),variant:"text",color:"error",title:"Delete Career"},null,8,["onClick"])])]))),128)),l.careers.length===0?(u(),_("tr",Le,e[22]||(e[22]=[o("td",{colspan:"6",class:"text-center py-4"},"No careers found",-1)]))):U("",!0)],64))])]),_:1}),o("div",Me,[o("div",Oe,[l.careers.length>0&&i.pagination.total>0?(u(),_("span",qe,[e[23]||(e[23]=m(" Showing ")),o("strong",null,c((i.currentPage-1)*i.perPage+1),1),e[24]||(e[24]=m(" to ")),o("strong",null,c(Math.min(i.currentPage*i.perPage,i.pagination.total)),1),e[25]||(e[25]=m(" of ")),o("strong",null,c(i.pagination.total.toLocaleString()),1),e[26]||(e[26]=m(" records ")),i.pagination.last_page>1?(u(),_("span",Be," (Page "+c(i.currentPage)+" of "+c(i.pagination.last_page)+") ",1)):U("",!0)])):(u(),_("span",Ne," No records found "))]),i.pagination.last_page>1?(u(),_("div",Re,[t(F,{modelValue:i.currentPage,"onUpdate:modelValue":[e[9]||(e[9]=r=>i.currentPage=r),n.loadCareers],length:i.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):U("",!0)])]),_:1})]),_:1}),t(T,{modelValue:l.showDialog,"onUpdate:modelValue":e[10]||(e[10]=r=>l.showDialog=r),"editing-career":l.editingCareer,onSaved:n.handleCareerSaved},null,8,["modelValue","editing-career","onSaved"]),t(z,{modelValue:l.showDetailsDialog,"onUpdate:modelValue":e[11]||(e[11]=r=>l.showDetailsDialog=r),"career-id":l.selectedCareerId,onEdit:n.handleEditFromDetails},null,8,["modelValue","career-id","onEdit"])])}const Ge=I(ke,[["render",je],["__scopeId","data-v-534c928f"]]);export{Ge as default};
