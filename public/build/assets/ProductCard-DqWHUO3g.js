import{_ as K,p as Q,q as p,c as v,w as u,b as l,a as r,g as m,r as h,f,t as c,n as W,m as _,i as M,d as n,F as U,e as V,y as I,o as i}from"./app-DFUhJa7k.js";import{S as X}from"./ShareDialog-TsHMdZcZ.js";import{r as Y}from"./uploads-CnEkgyD_.js";import{f as Z,a as D}from"./formatters-DOdYL610.js";const H={class:"product-image-container position-relative bg-grey-lighten-4",style:{height:"240px",overflow:"hidden"}},tt={class:"position-absolute top-0 left-0 ma-3 z-index-2 d-flex flex-column gap-2"},et={class:"actions-overlay d-flex align-center justify-center gap-2"},ot={class:"pa-5"},at={class:"d-flex justify-space-between align-start mb-2"},rt={class:"text-caption font-weight-bold text-primary text-uppercase tracking-wide"},it={key:0,class:"d-flex align-center gap-1"},ct={class:"text-body-2 font-weight-bold"},st={key:0,class:"text-caption text-grey"},lt={key:0,class:"text-caption text-medium-emphasis mb-1"},nt={class:"text-h6 font-weight-bold text-grey-darken-4 mb-2 lh-tight",style:{"min-height":"48px"}},dt={class:"text-body-2 text-medium-emphasis mb-3 line-clamp-2",style:{"min-height":"40px"}},ut={key:1,class:"mb-3"},pt={class:"d-flex flex-wrap gap-1"},mt={key:2,class:"specs-preview my-4 py-3 border-top border-bottom border-dashed"},ht={class:"d-flex flex-wrap gap-3"},ft={class:"spec-label"},vt={class:"spec-value"},gt={class:"d-flex align-center justify-space-between mt-4"},bt={key:0},yt={key:0,class:"d-flex flex-column"},xt={class:"text-caption text-medium-emphasis text-decoration-line-through"},_t={class:"text-h6 font-weight-black text-error"},wt={key:1},kt={class:"text-h6 font-weight-black text-primary"},zt={key:1,class:"text-h6 font-weight-bold text-primary"},Ct={__name:"ProductCard",props:{product:{type:Object,required:!0},comparisonDisabled:{type:Boolean,default:!1}},emits:["toggle-comparison"],setup(e){const o=e,g=Q(!1),z=t=>!t||typeof t!="string"?null:Y(t),N=t=>{if(!t)return null;if(Array.isArray(t))return t.length>0?t[0]:null;if(typeof t=="string")try{const a=JSON.parse(t);if(Array.isArray(a)&&a.length>0)return a[0]}catch{return t}return null},C=p(()=>{var a,d;let t=null;if((a=o.product)!=null&&a.thumbnail&&(t=z(o.product.thumbnail)),!t&&((d=o.product)!=null&&d.images)){const b=N(o.product.images);b&&(t=z(b))}return t||"/assets/img/default.jpg"}),j=p(()=>C.value==="/assets/img/default.jpg"),T=p(()=>o.product.categories&&o.product.categories.length>0?o.product.categories[0].name:"Uncategorized"),B=p(()=>o.product.price!==null&&o.product.price!==void 0&&o.product.price!==""||!!o.product.price_range),w=p(()=>Z(o.product,"Contact for Price")),S=p(()=>{const t=[];return o.product.specifications&&(o.product.specifications.capacity&&t.push({label:"Capacity",value:o.product.specifications.capacity}),o.product.specifications.input&&t.push({label:"Input",value:o.product.specifications.input}),o.product.specifications.type&&t.push({label:"Type",value:o.product.specifications.type})),t.slice(0,3)}),P=p(()=>`${window.location.origin}/products/${o.product.slug}`),$=p(()=>{const t=o.product.title||"Product",a=o.product.short_description||"",d=w.value;return`Check out ${t}${a?` - ${a}`:""}${d?` - ${d}`:""}`}),O=()=>{navigator.share?navigator.share({title:o.product.title,text:$.value,url:P.value}).catch(t=>{t.name!=="AbortError"&&(g.value=!0)}):g.value=!0},E=t=>({wireless:"mdi-wifi",waterproof:"mdi-water",bluetooth:"mdi-bluetooth",rechargeable:"mdi-battery-charging",warranty:"mdi-shield-check",eco_friendly:"mdi-leaf"})[t]||"mdi-check-circle",q=t=>({out_of_stock:"error",pre_order:"warning",coming_soon:"info"})[t]||"success",L=t=>({in_stock:"In Stock",out_of_stock:"Out of Stock",pre_order:"Pre-Order",coming_soon:"Coming Soon"})[t]||t;return(t,a)=>{const d=h("v-chip"),b=h("v-img"),y=h("v-btn"),k=h("v-tooltip"),x=h("v-icon"),J=h("v-card"),R=h("v-hover");return i(),v(R,null,{default:u(({isHovering:A,props:G})=>[l(J,_(G,{elevation:A?8:2,class:"product-card h-100 bg-white rounded-xl overflow-hidden transition-all"}),{default:u(()=>[r("div",H,[r("div",tt,[e.product.featured?(i(),v(d,{key:0,color:"amber-accent-4",variant:"flat",size:"x-small",class:"font-weight-bold"},{default:u(()=>a[2]||(a[2]=[f(" FEATURED ")])),_:1,__:[2]})):m("",!0),e.product.discount_percent>0?(i(),v(d,{key:1,color:"error",variant:"flat",size:"x-small",class:"font-weight-bold"},{default:u(()=>[f(" -"+c(Math.round(parseFloat(e.product.discount_percent)))+"% OFF ",1)]),_:1})):m("",!0)]),e.product.availability&&e.product.availability!=="in_stock"?(i(),v(d,{key:0,color:q(e.product.availability),variant:"flat",size:"x-small",class:"position-absolute top-0 right-0 ma-3 font-weight-bold z-index-2"},{default:u(()=>[f(c(L(e.product.availability)),1)]),_:1},8,["color"])):m("",!0),l(b,{src:C.value,alt:e.product.title,height:"100%",cover:"",class:W(["product-img transition-transform",{"scale-110":A||j.value}])},null,8,["src","alt","class"]),r("div",et,[l(k,{text:"View product details",location:"top"},{activator:u(({props:s})=>[l(y,_({icon:"mdi-eye-outline",variant:"flat",color:"white",size:"small",class:"hover-scale"},s,{to:`/products/${e.product.slug}`,"aria-label":"View product details"}),null,16,["to"])]),_:1}),l(k,{text:"Add to comparison",location:"top"},{activator:u(({props:s})=>[l(y,_({icon:"mdi-scale-balance",variant:"flat",color:"primary",size:"small",class:"hover-scale"},s,{disabled:e.comparisonDisabled,onClick:a[0]||(a[0]=M(F=>t.$emit("toggle-comparison",e.product),["prevent"])),"aria-label":"Add to comparison"}),null,16,["disabled"])]),_:1}),l(k,{text:"Share product",location:"top"},{activator:u(({props:s})=>[l(y,_({icon:"mdi-share-variant",variant:"flat",color:"success",size:"small",class:"hover-scale"},s,{onClick:M(O,["prevent"]),"aria-label":"Share product"}),null,16)]),_:1})])]),r("div",ot,[r("div",at,[r("div",rt,c(T.value),1),e.product.rating&&e.product.rating>0?(i(),n("div",it,[l(x,{icon:"mdi-star",color:"amber",size:"16"}),r("span",ct,c(parseFloat(e.product.rating).toFixed(1)),1),e.product.rating_count>0?(i(),n("span",st," ("+c(e.product.rating_count)+") ",1)):m("",!0)])):m("",!0)]),e.product.brand?(i(),n("div",lt,[l(x,{icon:"mdi-tag",size:"12",class:"mr-1"}),f(" "+c(e.product.brand),1)])):m("",!0),r("h3",nt,c(e.product.title),1),r("p",dt,c(e.product.short_description),1),e.product.features&&e.product.features.length>0?(i(),n("div",ut,[r("div",pt,[(i(!0),n(U,null,V(e.product.features.slice(0,3),s=>(i(),v(d,{key:s,size:"x-small",color:"primary",variant:"tonal",class:"text-capitalize"},{default:u(()=>[l(x,{icon:E(s),size:"12",class:"mr-1"},null,8,["icon"]),f(" "+c(s.replace("_"," ")),1)]),_:2},1024))),128))])])):m("",!0),S.value.length>0?(i(),n("div",mt,[r("div",ht,[(i(!0),n(U,null,V(S.value,(s,F)=>(i(),n("div",{key:F,class:"spec-badge"},[r("span",ft,c(s.label),1),r("span",vt,c(s.value),1)]))),128))])])):m("",!0),r("div",gt,[B.value?(i(),n("div",bt,[e.product.discount_percent>0&&e.product.price?(i(),n("div",yt,[r("span",xt," Tk "+c(I(D)(e.product.price)),1),r("span",_t," Tk "+c(I(D)(e.product.discounted_price||e.product.price)),1)])):(i(),n("div",wt,[r("span",kt,c(w.value),1)]))])):(i(),n("div",zt,c(w.value),1)),l(y,{variant:"text",color:"primary",class:"px-0 font-weight-bold text-capitalize",to:`/products/${e.product.slug}`},{default:u(()=>[a[3]||(a[3]=f(" View Details ")),l(x,{icon:"mdi-arrow-right",size:"small",class:"ml-1"})]),_:1,__:[3]},8,["to"])])])]),_:2},1040,["elevation"]),l(X,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=s=>g.value=s),title:e.product.title,url:P.value,"share-text":$.value},null,8,["modelValue","title","url","share-text"])]),_:1})}}},Ft=K(Ct,[["__scopeId","data-v-4b796303"]]);export{Ft as P};
