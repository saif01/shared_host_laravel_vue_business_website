import{_ as H,g as P,c as w,w as l,b as s,r as n,a as o,t as c,d as f,f as m,h as b,F as U,e as O,n as j,o as a}from"./app-D_WvYKr6.js";import{a as R}from"./adminPaginationMixin-DN7Wb3ng.js";import{Q as X}from"./quill.snow-h-05RbcF.js";import{r as Y,n as Z}from"./uploads-CnEkgyD_.js";const $={name:"ServiceFormDialog",mixins:[R],props:{modelValue:{type:Boolean,default:!1},editingService:{type:Object,default:null}},emits:["update:modelValue","saved"],data(){return{activeTab:"basic",loading:!1,saving:!1,imageFile:null,imagePreview:null,uploadingImage:!1,imageError:null,ogImageFile:null,ogImagePreview:null,uploadingOgImage:!1,ogImageError:null,featuresText:"",benefitsText:"",quillEditor:null,form:{title:"",slug:"",short_description:"",description:"",icon:"",image:"",price_range:"",features:[],benefits:[],meta_title:"",meta_description:"",meta_keywords:"",og_image:"",published:!1,order:0}}},computed:{dialog:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},suggestedMetaTitle(){return this.form.meta_title||!this.form.title?null:this.form.title.length>60?this.form.title.substring(0,57)+"...":this.form.title},suggestedMetaDescription(){if(this.form.meta_description||!this.form.short_description)return null;let t=this.form.short_description;if(t.length>160){t=t.substring(0,157);const e=t.lastIndexOf(" ");e>120?t=t.substring(0,e)+"...":t+="..."}return t},suggestedMetaKeywords(){return this.form.meta_keywords?null:this.generateSuggestedKeywords()}},watch:{modelValue(t){t&&(this.activeTab="basic",this.editingService?this.loadServiceForEdit():this.resetForm())},editingService:{handler(t){t&&this.dialog?this.loadServiceForEdit():!t&&this.dialog&&this.resetForm()},immediate:!1},activeTab(t){t==="content"&&this.dialog&&!this.loading?setTimeout(()=>{this.initEditor()},300):t!=="content"&&this.quillEditor&&this.destroyEditor()}},methods:{resetForm(){this.quillEditor&&this.destroyEditor(),this.form={title:"",slug:"",short_description:"",description:"",icon:"",image:"",price_range:"",features:[],benefits:[],meta_title:"",meta_description:"",meta_keywords:"",og_image:"",published:!1,order:0},this.imageFile=null,this.imagePreview=null,this.imageError=null,this.ogImageFile=null,this.ogImagePreview=null,this.ogImageError=null,this.featuresText="",this.benefitsText="",this.$refs.formRef&&this.$refs.formRef.resetValidation()},async loadServiceForEdit(){if(this.editingService){this.loading=!0;try{const e=(await P.get(`/api/v1/services/${this.editingService.id}`,{headers:this.getAuthHeaders()})).data;this.form={title:e.title||"",slug:e.slug||"",short_description:e.short_description||"",description:e.description||"",icon:e.icon||"",image:e.image||"",price_range:e.price_range||"",features:Array.isArray(e.features)?[...e.features]:[],benefits:Array.isArray(e.benefits)?[...e.benefits]:[],meta_title:e.meta_title||"",meta_description:e.meta_description||"",meta_keywords:e.meta_keywords||"",og_image:e.og_image||"",published:e.published||!1,order:e.order||0};const v=this.normalizeImageInput(e.image||""),x=this.normalizeImageInput(e.og_image||"");this.form.image=v,this.form.og_image=x,this.imagePreview=this.resolveImageUrl(e.image||v),this.ogImagePreview=this.resolveImageUrl(e.og_image||x),this.featuresText=Array.isArray(e.features)?e.features.join(`
`):"",this.benefitsText=Array.isArray(e.benefits)?e.benefits.join(`
`):""}catch(t){this.handleApiError(t,"Failed to load service data"),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){!this.saving&&!this.loading&&(this.destroyEditor(),this.dialog=!1,this.resetForm())},initEditor(){this.quillEditor&&this.destroyEditor(),this.$nextTick(()=>{if(this.$refs.editorContainer&&this.activeTab==="content")try{this.$refs.editorContainer.innerHTML="",this.quillEditor=new X(this.$refs.editorContainer,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["blockquote","code-block"],["clean"]]},placeholder:"Enter detailed description of the service..."}),this.form.description&&(this.quillEditor.root.innerHTML=this.form.description),this.quillEditor.on("text-change",()=>{this.form.description=this.quillEditor.root.innerHTML}),this.quillEditor.on("selection-change",()=>{this.form.description=this.quillEditor.root.innerHTML})}catch(t){console.error("Error initializing Quill editor:",t),this.showError("Failed to initialize text editor")}})},destroyEditor(){if(this.quillEditor){try{if(this.quillEditor.root&&this.quillEditor.root.innerHTML){const t=this.quillEditor.root.innerHTML.trim();t&&t!=="<p><br></p>"&&(this.form.description=t)}}catch(t){console.error("Error saving editor content:",t)}try{this.quillEditor=null,this.$refs.editorContainer&&(this.$refs.editorContainer.innerHTML="")}catch(t){console.error("Error destroying editor:",t),this.quillEditor=null}}else this.$refs.editorContainer&&(this.$refs.editorContainer.innerHTML="")},generateSlug(){this.form.title&&!this.editingService&&(this.form.slug=this.form.title.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},handleImageSelect(t){if(this.imageError=null,t){const e=Array.isArray(t)?t[0]:t;if(e&&e.size>5242880){this.imageError="Image file size must be less than 5MB",this.imageFile=null;return}if(e&&!e.type.startsWith("image/")){this.imageError="Please select a valid image file (jpeg, jpg, png, gif, webp)",this.imageFile=null;return}if(this.imageFile=e,e){const v=new FileReader;v.onload=x=>{this.imagePreview=x.target.result},v.onerror=()=>{this.showError("Failed to read image file"),this.imageFile=null,this.imagePreview=null},v.readAsDataURL(e)}else this.imagePreview=null}else this.imageFile=null,this.form.image?this.imagePreview=this.resolveImageUrl(this.form.image):this.imagePreview=null},removeImage(){confirm("Are you sure you want to remove this image?")&&(this.imagePreview=null,this.imageFile=null,this.form.image="",this.imageError=null)},handleOgImageSelect(t){if(this.ogImageError=null,t){const e=Array.isArray(t)?t[0]:t;if(e&&e.size>5242880){this.ogImageError="OG image file size must be less than 5MB",this.ogImageFile=null;return}if(e&&!e.type.startsWith("image/")){this.ogImageError="Please select a valid image file (jpeg, jpg, png, gif, webp)",this.ogImageFile=null;return}if(this.ogImageFile=e,e){const v=new FileReader;v.onload=x=>{this.ogImagePreview=x.target.result},v.onerror=()=>{this.showError("Failed to read image file"),this.ogImageFile=null,this.ogImagePreview=null},v.readAsDataURL(e)}else this.ogImagePreview=null}else this.ogImageFile=null,this.form.og_image?this.ogImagePreview=this.resolveImageUrl(this.form.og_image):this.ogImagePreview=null},removeOgImage(){confirm("Are you sure you want to remove the Open Graph image?")&&(this.ogImagePreview=null,this.ogImageFile=null,this.form.og_image="",this.ogImageError=null)},generateMetaTitle(){this.form.title&&(this.form.meta_title=this.form.title.length>60?this.form.title.substring(0,57)+"...":this.form.title)},generateMetaDescription(){if(this.form.short_description){let t=this.form.short_description;if(t.length>160){t=t.substring(0,157);const e=t.lastIndexOf(" ");e>120?t=t.substring(0,e)+"...":t+="..."}this.form.meta_description=t}},generateMetaKeywords(){const t=this.generateSuggestedKeywords();t&&(this.form.meta_keywords=t)},generateSuggestedKeywords(){const t=[];if(this.form.title){const x=this.form.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(i=>i.length>3).slice(0,5);t.push(...x)}if(this.form.short_description){const x=this.form.short_description.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(i=>i.length>4).slice(0,5);t.push(...x)}this.form.features&&this.form.features.length>0&&this.form.features.forEach(x=>{const i=x.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(r=>r.length>3).slice(0,2);t.push(...i)});const e=["the","and","for","with","from","this","that","your","our","service","services"],v=[...new Set(t)].filter(x=>!e.includes(x)).slice(0,10);return v.length>0?v.join(", "):null},suggestMetaFields(){},applySuggestedMetaTitle(){this.suggestedMetaTitle&&(this.form.meta_title=this.suggestedMetaTitle)},applySuggestedMetaDescription(){this.suggestedMetaDescription&&(this.form.meta_description=this.suggestedMetaDescription)},applySuggestedMetaKeywords(){this.suggestedMetaKeywords&&(this.form.meta_keywords=this.suggestedMetaKeywords)},getMetaTitleColor(){const t=this.form.meta_title?this.form.meta_title.length:0;return t===0?"primary":t<50?"warning":t>60?"error":"success"},getMetaDescriptionColor(){const t=this.form.meta_description?this.form.meta_description.length:0;return t===0?"primary":t<120?"warning":t>160?"error":"success"},getPreviewTitle(){return this.form.meta_title||this.form.title||"Service Title"},getPreviewDescription(){return this.form.meta_description||this.form.short_description||"Service description will appear here in search results..."},getPreviewUrl(){const t=window.location.origin||"https://example.com",e=this.form.slug||"service-slug";return`${t}/services/${e}`},updateFeaturesFromText(){this.featuresText?this.form.features=this.featuresText.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):this.form.features=[]},updateBenefitsFromText(){this.benefitsText?this.form.benefits=this.benefitsText.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):this.form.benefits=[]},removeFeature(t){this.form.features.splice(t,1),this.featuresText=this.form.features.join(`
`)},removeBenefit(t){this.form.benefits.splice(t,1),this.benefitsText=this.form.benefits.join(`
`)},async uploadImage(){var e,v,x,i,r,h;if(!this.imageFile)return null;const t=Array.isArray(this.imageFile)?this.imageFile[0]:this.imageFile;if(!t)return null;this.uploadingImage=!0;try{const u=new FormData;u.append("image",t),u.append("folder","services"),this.form.title&&u.append("prefix",this.form.title);const g=await P.post("/api/v1/upload/image",u,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(g.data.success){const _=this.normalizeImageInput(g.data.path||g.data.url);return this.form.image=_,this.imagePreview=this.resolveImageUrl(g.data.url||_),this.imageFile=null,this.imageError=null,_}else throw new Error(g.data.message||"Failed to upload image")}catch(u){console.error("Error uploading image:",u),console.error("Error response:",(e=u.response)==null?void 0:e.data);let g="Failed to upload image";if(((v=u.response)==null?void 0:v.status)===422){const _=u.response.data.errors;_&&_.image?g=Array.isArray(_.image)?_.image.join(", "):_.image:u.response.data.message&&(g=u.response.data.message)}else(i=(x=u.response)==null?void 0:x.data)!=null&&i.message?g=u.response.data.message:(h=(r=u.response)==null?void 0:r.data)!=null&&h.error?g=u.response.data.error:u.message&&(g=u.message);throw this.imageError=g,new Error(g)}finally{this.uploadingImage=!1}},async uploadOgImage(){var e,v,x,i,r,h;if(!this.ogImageFile)return null;const t=Array.isArray(this.ogImageFile)?this.ogImageFile[0]:this.ogImageFile;if(!t)return null;this.uploadingOgImage=!0;try{const u=new FormData;u.append("image",t),u.append("folder","services/og"),this.form.title&&u.append("prefix",this.form.title);const g=await P.post("/api/v1/upload/image",u,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(g.data.success){const _=this.normalizeImageInput(g.data.path||g.data.url);return this.form.og_image=_,this.ogImagePreview=this.resolveImageUrl(g.data.url||_),this.ogImageFile=null,this.ogImageError=null,_}else throw new Error(g.data.message||"Failed to upload OG image")}catch(u){console.error("Error uploading OG image:",u),console.error("Error response:",(e=u.response)==null?void 0:e.data);let g="Failed to upload OG image";if(((v=u.response)==null?void 0:v.status)===422){const _=u.response.data.errors;_&&_.image?g=Array.isArray(_.image)?_.image.join(", "):_.image:u.response.data.message&&(g=u.response.data.message)}else(i=(x=u.response)==null?void 0:x.data)!=null&&i.message?g=u.response.data.message:(h=(r=u.response)==null?void 0:r.data)!=null&&h.error?g=u.response.data.error:u.message&&(g=u.message);throw this.ogImageError=g,new Error(g)}finally{this.uploadingOgImage=!1}},async saveService(){this.quillEditor&&(this.form.description=this.quillEditor.root.innerHTML);const{valid:t}=await this.$refs.formRef.validate();if(!t){this.showError("Please fill in all required fields");return}this.updateFeaturesFromText(),this.updateBenefitsFromText(),this.saving=!0;try{if(this.imageFile)try{await this.uploadImage()}catch(v){this.showError(v.message||"Failed to upload image");return}if(this.ogImageFile)try{await this.uploadOgImage()}catch(v){this.showError(v.message||"Failed to upload OG image");return}const e={title:this.form.title,slug:this.form.slug,short_description:this.form.short_description||null,description:this.form.description||null,icon:this.form.icon||null,image:this.normalizeImageInput(this.form.image)||null,price_range:this.form.price_range||null,features:this.form.features.length>0?this.form.features:null,benefits:this.form.benefits.length>0?this.form.benefits:null,meta_title:this.form.meta_title||null,meta_description:this.form.meta_description||null,meta_keywords:this.form.meta_keywords||null,og_image:this.normalizeImageInput(this.form.og_image)||null,published:this.form.published||!1,order:this.form.order||0};this.editingService?(await P.put(`/api/v1/services/${this.editingService.id}`,e,{headers:this.getAuthHeaders()}),this.showSuccess("Service updated successfully")):(await P.post("/api/v1/services",e,{headers:this.getAuthHeaders()}),this.showSuccess("Service created successfully")),this.$emit("saved"),this.closeDialog()}catch(e){this.handleApiError(e,this.editingService?"Failed to update service":"Failed to create service")}finally{this.saving=!1}},normalizeImageInput(t){return Z(t)},resolveImageUrl(t){return Y(t)}}},ee={class:"text-h5 font-weight-bold"},te={key:0,class:"d-flex align-center justify-center pa-12"},ie={class:"text-center"},se={class:"pa-6"},le={class:"pa-6"},oe={class:"rich-text-editor-wrapper"},re={ref:"editorContainer",class:"rich-text-editor"},ne={class:"d-flex flex-column flex-md-row align-start"},ae={key:0,class:"mr-md-4 mb-4 mb-md-0"},de={class:"mt-2"},me={class:"flex-grow-1"},ue={class:"text-body-2"},ce={key:2,class:"text-caption text-medium-emphasis mt-2"},ge={key:0,class:"mt-2"},pe={key:0,class:"mt-2"},fe={class:"pa-6"},he={class:"d-flex align-center justify-space-between"},ve={class:"text-body-2"},_e={key:0,class:"ml-2"},be={key:1,class:"ml-2"},ye={key:2,class:"ml-2 text-success"},we={class:"d-flex align-center justify-space-between flex-wrap"},xe={class:"text-body-2 mb-2"},Se={key:0,class:"ml-2"},ke={key:1,class:"ml-2"},Ie={key:2,class:"ml-2 text-success"},Fe={class:"d-flex align-center justify-space-between flex-wrap"},Ve={class:"text-body-2 mb-2"},Ee={class:"text-caption text-medium-emphasis"},Ce={class:"d-flex flex-column flex-md-row align-start"},De={key:0,class:"mr-md-4 mb-4 mb-md-0"},Te={class:"mt-2"},Pe={class:"flex-grow-1"},Me={class:"text-body-2"},Ue={key:2,class:"text-caption text-medium-emphasis mt-2"},ze={class:"search-preview"},Ae={class:"search-url mb-1 text-caption",style:{color:"#006621"}};function Oe(t,e,v,x,i,r){const h=n("v-btn"),u=n("v-card-title"),g=n("v-progress-circular"),_=n("v-tab"),M=n("v-tabs"),k=n("v-text-field"),S=n("v-col"),y=n("v-textarea"),V=n("v-icon"),I=n("v-switch"),E=n("v-row"),T=n("v-window-item"),C=n("v-label"),z=n("v-img"),A=n("v-file-input"),p=n("v-alert"),D=n("v-card"),q=n("v-chip"),F=n("v-divider"),B=n("v-window"),K=n("v-form"),G=n("v-card-text"),N=n("v-spacer"),W=n("v-card-actions"),Q=n("v-dialog");return a(),w(Q,{modelValue:r.dialog,"onUpdate:modelValue":e[18]||(e[18]=d=>r.dialog=d),"max-width":"1200",scrollable:"",persistent:""},{default:l(()=>[s(D,null,{default:l(()=>[s(u,{class:"d-flex align-center justify-space-between bg-primary text-white pa-4"},{default:l(()=>[o("span",ee,c(v.editingService?"Edit Service":"Create New Service"),1),s(h,{icon:"mdi-close",variant:"text",color:"white",onClick:r.closeDialog,disabled:i.saving||i.loading},null,8,["onClick","disabled"])]),_:1}),s(G,{class:"pa-0"},{default:l(()=>[i.loading?(a(),f("div",te,[o("div",ie,[s(g,{indeterminate:"",color:"primary",size:"64"}),e[19]||(e[19]=o("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading service data...",-1))])])):(a(),w(K,{key:1,ref:"formRef"},{default:l(()=>[s(M,{modelValue:i.activeTab,"onUpdate:modelValue":e[0]||(e[0]=d=>i.activeTab=d),"bg-color":"grey-lighten-4"},{default:l(()=>[s(_,{value:"basic"},{default:l(()=>e[20]||(e[20]=[m("Basic Information")])),_:1,__:[20]}),s(_,{value:"content"},{default:l(()=>e[21]||(e[21]=[m("Content")])),_:1,__:[21]}),s(_,{value:"seo"},{default:l(()=>e[22]||(e[22]=[m("SEO & Meta")])),_:1,__:[22]})]),_:1},8,["modelValue"]),s(B,{modelValue:i.activeTab,"onUpdate:modelValue":e[17]||(e[17]=d=>i.activeTab=d)},{default:l(()=>[s(T,{value:"basic"},{default:l(()=>[o("div",se,[s(E,null,{default:l(()=>[s(S,{cols:"12"},{default:l(()=>[s(k,{modelValue:i.form.title,"onUpdate:modelValue":e[1]||(e[1]=d=>i.form.title=d),label:"Service Title *",variant:"outlined",rules:[d=>!!d||"Title is required"],hint:"Enter the service title",onBlur:r.generateSlug,"persistent-hint":""},null,8,["modelValue","rules","onBlur"])]),_:1}),s(S,{cols:"12",md:"6"},{default:l(()=>[s(k,{modelValue:i.form.slug,"onUpdate:modelValue":e[2]||(e[2]=d=>i.form.slug=d),label:"Slug *",variant:"outlined",rules:[d=>!!d||"Slug is required",d=>!d||/^[a-z0-9-]+$/.test(d)||"Slug can only contain lowercase letters, numbers, and hyphens"],hint:"URL-friendly version (auto-generated from title)","persistent-hint":""},{append:l(()=>[s(h,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateSlug,disabled:!i.form.title},null,8,["onClick","disabled"])]),_:1},8,["modelValue","rules"])]),_:1}),s(S,{cols:"12",md:"6"},{default:l(()=>[s(k,{modelValue:i.form.order,"onUpdate:modelValue":e[3]||(e[3]=d=>i.form.order=d),label:"Order",type:"number",variant:"outlined",hint:"Display order (lower numbers first)","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(y,{modelValue:i.form.short_description,"onUpdate:modelValue":e[4]||(e[4]=d=>i.form.short_description=d),label:"Short Description",variant:"outlined",rows:"3",hint:"Brief description shown in service listings","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(S,{cols:"12",md:"6"},{default:l(()=>[s(k,{modelValue:i.form.icon,"onUpdate:modelValue":e[5]||(e[5]=d=>i.form.icon=d),label:"Icon",variant:"outlined",hint:"Material Design Icon name (e.g., mdi-battery-charging-high)","persistent-hint":"","prepend-inner-icon":"mdi-information-outline"},{append:l(()=>[i.form.icon?(a(),w(V,{key:0,icon:i.form.icon,size:"small"},null,8,["icon"])):b("",!0)]),_:1},8,["modelValue"])]),_:1}),s(S,{cols:"12",md:"6"},{default:l(()=>[s(k,{modelValue:i.form.price_range,"onUpdate:modelValue":e[6]||(e[6]=d=>i.form.price_range=d),label:"Price Range",variant:"outlined",hint:"e.g., $100 - $500","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(I,{modelValue:i.form.published,"onUpdate:modelValue":e[7]||(e[7]=d=>i.form.published=d),label:"Published",color:"success",hint:"Publish this service on the public website","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s(T,{value:"content"},{default:l(()=>[o("div",le,[s(E,null,{default:l(()=>[s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[23]||(e[23]=[m("Full Description")])),_:1,__:[23]}),o("div",oe,[o("div",re,null,512)])]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[24]||(e[24]=[m("Service Image")])),_:1,__:[24]}),s(D,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",ne,[i.imagePreview||i.form.image?(a(),f("div",ae,[s(z,{src:i.imagePreview||r.resolveImageUrl(i.form.image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),o("div",de,[s(h,{color:"error",size:"small",variant:"text",onClick:r.removeImage,"prepend-icon":"mdi-delete"},{default:l(()=>e[25]||(e[25]=[m(" Remove Image ")])),_:1,__:[25]},8,["onClick"])])])):b("",!0),o("div",me,[s(A,{modelValue:i.imageFile,"onUpdate:modelValue":[e[8]||(e[8]=d=>i.imageFile=d),r.handleImageSelect],accept:"image/*",label:"Select Service Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 1200x800px or larger. Max file size: 5MB","persistent-hint":""},{append:l(()=>[i.uploadingImage?(a(),w(g,{key:0,indeterminate:"",color:"primary",size:"24"})):b("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),i.imageFile&&i.imageFile.size>5242880?(a(),w(p,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>e[26]||(e[26]=[m(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[26]})):b("",!0),i.imageError?(a(),w(p,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-2",closable:"","onClick:close":e[9]||(e[9]=d=>i.imageError=null)},{default:l(()=>[o("div",ue,[e[27]||(e[27]=o("strong",null,"Upload Error:",-1)),m(" "+c(i.imageError),1)])]),_:1})):b("",!0),!i.imagePreview&&!i.imageFile?(a(),f("div",ce," No image selected. Upload an image to display with this service. ")):b("",!0)])])]),_:1})]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[28]||(e[28]=[m("Features")])),_:1,__:[28]}),s(y,{modelValue:i.featuresText,"onUpdate:modelValue":e[10]||(e[10]=d=>i.featuresText=d),variant:"outlined",rows:"4",hint:"Enter one feature per line","persistent-hint":"",onBlur:r.updateFeaturesFromText},null,8,["modelValue","onBlur"]),i.form.features&&i.form.features.length>0?(a(),f("div",ge,[(a(!0),f(U,null,O(i.form.features,(d,L)=>(a(),w(q,{key:L,class:"ma-1",closable:"","onClick:close":J=>r.removeFeature(L)},{default:l(()=>[m(c(d),1)]),_:2},1032,["onClick:close"]))),128))])):b("",!0)]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[29]||(e[29]=[m("Benefits")])),_:1,__:[29]}),s(y,{modelValue:i.benefitsText,"onUpdate:modelValue":e[11]||(e[11]=d=>i.benefitsText=d),variant:"outlined",rows:"4",hint:"Enter one benefit per line","persistent-hint":"",onBlur:r.updateBenefitsFromText},null,8,["modelValue","onBlur"]),i.form.benefits&&i.form.benefits.length>0?(a(),f("div",pe,[(a(!0),f(U,null,O(i.form.benefits,(d,L)=>(a(),w(q,{key:L,class:"ma-1",closable:"","onClick:close":J=>r.removeBenefit(L),color:"success",variant:"flat"},{default:l(()=>[m(c(d),1)]),_:2},1032,["onClick:close"]))),128))])):b("",!0)]),_:1})]),_:1})])]),_:1}),s(T,{value:"seo"},{default:l(()=>[o("div",fe,[s(p,{type:"info",variant:"tonal",class:"mb-6",density:"compact"},{default:l(()=>e[30]||(e[30]=[o("div",{class:"text-body-2"},[o("strong",null,"SEO Best Practices:"),m(" Fill in these fields to improve your service visibility in search engines and social media. If left empty, default values from the service title and description will be used. ")],-1)])),_:1,__:[30]}),s(E,null,{default:l(()=>[s(S,{cols:"12"},{default:l(()=>[s(k,{modelValue:i.form.meta_title,"onUpdate:modelValue":e[12]||(e[12]=d=>i.form.meta_title=d),label:"Meta Title",variant:"outlined",hint:"SEO title for search engines (recommended: 50-60 characters)","persistent-hint":"",counter:60,color:r.getMetaTitleColor(),"prepend-inner-icon":"mdi-format-title"},{append:l(()=>[s(h,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateMetaTitle,disabled:!i.form.title,title:"Auto-generate from service title"},null,8,["onClick","disabled"])]),_:1},8,["modelValue","color"]),!i.form.meta_title&&r.suggestedMetaTitle?(a(),w(p,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",he,[o("span",ve,[e[31]||(e[31]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaTitle),1)]),s(h,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaTitle,class:"ml-2"},{default:l(()=>e[32]||(e[32]=[m(" Apply ")])),_:1,__:[32]},8,["onClick"])])]),_:1})):b("",!0),o("div",{class:j(["text-caption",r.getMetaTitleColor()+"--text"])},[m(c(i.form.meta_title.length)+"/60 characters ",1),i.form.meta_title.length<50?(a(),f("span",_e," (Too short - recommended: 50-60) ")):i.form.meta_title.length>60?(a(),f("span",be," (Too long - may be truncated) ")):(a(),f("span",ye,"✓ Good length"))],2)]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(y,{modelValue:i.form.meta_description,"onUpdate:modelValue":e[13]||(e[13]=d=>i.form.meta_description=d),label:"Meta Description",variant:"outlined",rows:"4",hint:"SEO description for search results (recommended: 150-160 characters)","persistent-hint":"",counter:160,color:r.getMetaDescriptionColor(),"prepend-inner-icon":"mdi-text"},{append:l(()=>[s(h,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateMetaDescription,disabled:!i.form.short_description,title:"Auto-generate from short description"},null,8,["onClick","disabled"])]),_:1},8,["modelValue","color"]),!i.form.meta_description&&r.suggestedMetaDescription?(a(),w(p,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",we,[o("span",xe,[e[33]||(e[33]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaDescription),1)]),s(h,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaDescription},{default:l(()=>e[34]||(e[34]=[m(" Apply ")])),_:1,__:[34]},8,["onClick"])])]),_:1})):b("",!0),o("div",{class:j(["text-caption",r.getMetaDescriptionColor()+"--text"])},[m(c(i.form.meta_description.length)+"/160 characters ",1),i.form.meta_description.length<120?(a(),f("span",Se," (Too short - recommended: 150-160) ")):i.form.meta_description.length>160?(a(),f("span",ke," (Too long - may be truncated) ")):(a(),f("span",Ie,"✓ Good length"))],2)]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(k,{modelValue:i.form.meta_keywords,"onUpdate:modelValue":e[14]||(e[14]=d=>i.form.meta_keywords=d),label:"Meta Keywords",variant:"outlined",hint:"Comma-separated keywords for SEO (e.g., power backup, UPS systems, battery)","persistent-hint":"","prepend-inner-icon":"mdi-tag-multiple"},{append:l(()=>[s(h,{icon:"mdi-auto-fix",size:"small",variant:"text",onClick:r.generateMetaKeywords,disabled:!i.form.title&&!i.form.short_description&&i.form.features.length===0,title:"Auto-generate from title, description, and features"},null,8,["onClick","disabled"])]),_:1},8,["modelValue"]),!i.form.meta_keywords&&r.suggestedMetaKeywords?(a(),w(p,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",Fe,[o("span",Ve,[e[35]||(e[35]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaKeywords),1)]),s(h,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaKeywords},{default:l(()=>e[36]||(e[36]=[m(" Apply ")])),_:1,__:[36]},8,["onClick"])])]),_:1})):b("",!0),o("div",Ee,c((i.form.meta_keywords||"").split(",").filter(d=>d.trim()).length)+" keywords entered ",1)]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(F,{class:"my-4"}),e[37]||(e[37]=o("h3",{class:"text-h6 font-weight-bold mb-4"},"Open Graph (Social Media)",-1)),e[38]||(e[38]=o("p",{class:"text-body-2 text-medium-emphasis mb-4"}," This image will be displayed when your service is shared on social media platforms like Facebook, Twitter, LinkedIn, etc. ",-1))]),_:1,__:[37,38]}),s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[39]||(e[39]=[m("Open Graph Image")])),_:1,__:[39]}),s(D,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",Ce,[i.ogImagePreview||i.form.og_image?(a(),f("div",De,[s(z,{src:i.ogImagePreview||r.resolveImageUrl(i.form.og_image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),o("div",Te,[s(h,{color:"error",size:"small",variant:"text",onClick:r.removeOgImage,"prepend-icon":"mdi-delete"},{default:l(()=>e[40]||(e[40]=[m(" Remove Image ")])),_:1,__:[40]},8,["onClick"])]),e[41]||(e[41]=o("div",{class:"text-caption text-medium-emphasis mt-2"}," Recommended: 1200x630px (1.91:1 ratio) ",-1))])):b("",!0),o("div",Pe,[s(A,{modelValue:i.ogImageFile,"onUpdate:modelValue":[e[15]||(e[15]=d=>i.ogImageFile=d),r.handleOgImageSelect],accept:"image/*",label:"Select Open Graph Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 1200x630px. Max file size: 5MB","persistent-hint":""},{append:l(()=>[i.uploadingOgImage?(a(),w(g,{key:0,indeterminate:"",color:"primary",size:"24"})):b("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),i.ogImageFile&&i.ogImageFile.size>5242880?(a(),w(p,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>e[42]||(e[42]=[m(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[42]})):b("",!0),i.ogImageError?(a(),w(p,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-2",closable:"","onClick:close":e[16]||(e[16]=d=>i.ogImageError=null)},{default:l(()=>[o("div",Me,[e[43]||(e[43]=o("strong",null,"Upload Error:",-1)),m(" "+c(i.ogImageError),1)])]),_:1})):b("",!0),!i.ogImagePreview&&!i.ogImageFile?(a(),f("div",Ue," No image selected. If not provided, the service image will be used. ")):b("",!0)])])]),_:1})]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(F,{class:"my-4"}),e[44]||(e[44]=o("h3",{class:"text-h6 font-weight-bold mb-4"},"Search Engine Preview",-1)),s(D,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",ze,[o("div",Ae,c(r.getPreviewUrl()),1),o("div",{class:j(["search-title mb-1 text-h6",r.getMetaTitleColor()+"--text"]),style:{color:"#1a0dab",cursor:"pointer"}},c(r.getPreviewTitle()),3),o("div",{class:j(["search-description text-body-2",r.getMetaDescriptionColor()+"--text"]),style:{color:"#545454"}},c(r.getPreviewDescription()),3)])]),_:1})]),_:1,__:[44]})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1},512))]),_:1}),s(W,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[s(N),s(h,{variant:"text",onClick:r.closeDialog,disabled:i.saving},{default:l(()=>e[45]||(e[45]=[m("Cancel")])),_:1,__:[45]},8,["onClick","disabled"]),s(h,{color:"primary",variant:"flat",onClick:r.saveService,loading:i.saving},{default:l(()=>[m(c(v.editingService?"Update":"Create")+" Service ",1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Be=H($,[["render",Oe],["__scopeId","data-v-140a9ea2"]]),Le={name:"ServiceDetailsDialog",props:{modelValue:{type:Boolean,default:!1},serviceId:{type:[Number,String],default:null}},emits:["update:modelValue","edit"],data(){return{loading:!1,service:null,tab:"basic"}},computed:{dialog:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},watch:{modelValue(t){t&&this.serviceId&&this.loadService()},serviceId(){this.dialog&&this.serviceId&&this.loadService()}},methods:{async loadService(){if(this.serviceId){this.loading=!0,this.service=null,this.tab="basic";try{const e=(await P.get(`/api/v1/services/${this.serviceId}`,{headers:this.getAuthHeaders()})).data;if(!e)throw new Error("No service data received");this.service=e}catch(t){console.error("Failed to load service details:",t),alert("Failed to load service details. Please try again."),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){this.dialog=!1,this.service=null,this.tab="basic"},handleEdit(){this.service&&(this.$emit("edit",this.service),this.closeDialog())},getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}},formatDateTime(t){return t?new Date(t).toLocaleString():"-"}}},qe={class:"d-flex align-center"},je={key:0,class:"d-flex align-center justify-center pa-12"},He={class:"text-center"},Re={key:1},Ke={class:"text-h6 font-weight-bold mb-4"},Ge={class:"text-body-1 mb-4"},Ne={class:"text-body-1 mb-4"},We={class:"text-body-1 mb-4"},Qe={class:"text-body-1 mb-4"},Je={key:1,class:"text-grey"},Xe={class:"text-body-1 mb-4"},Ye={class:"mb-4"},Ze={class:"mb-4"},$e={class:"mb-4"},et={class:"text-body-1 mb-4"},tt={class:"text-body-1 mb-4"},it=["innerHTML"],st={class:"text-body-1 mb-4"},lt={class:"text-body-1 mb-4"},ot={class:"text-body-1 mb-4"};function rt(t,e,v,x,i,r){const h=n("v-icon"),u=n("v-btn"),g=n("v-card-title"),_=n("v-progress-circular"),M=n("v-tab"),k=n("v-tabs"),S=n("v-divider"),y=n("v-col"),V=n("v-chip"),I=n("v-row"),E=n("v-window-item"),T=n("v-img"),C=n("v-window"),z=n("v-card-text"),A=n("v-spacer"),p=n("v-card-actions"),D=n("v-card"),q=n("v-dialog");return a(),w(q,{modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=F=>r.dialog=F),"max-width":"1200",scrollable:""},{default:l(()=>[s(D,null,{default:l(()=>[s(g,{class:"d-flex align-center justify-space-between bg-info text-white pa-4"},{default:l(()=>[o("div",qe,[s(h,{icon:"mdi-eye",class:"mr-3"}),e[3]||(e[3]=o("span",{class:"text-h5 font-weight-bold"},"Service Details",-1))]),s(u,{icon:"mdi-close",variant:"text",color:"white",onClick:r.closeDialog,disabled:i.loading},null,8,["onClick","disabled"])]),_:1}),s(z,{class:"pa-0"},{default:l(()=>[i.loading?(a(),f("div",je,[o("div",He,[s(_,{indeterminate:"",color:"info",size:"64"}),e[4]||(e[4]=o("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading service details...",-1))])])):i.service?(a(),f("div",Re,[s(k,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=F=>i.tab=F),color:"info","bg-color":"grey-lighten-4"},{default:l(()=>[s(M,{value:"basic"},{default:l(()=>[s(h,{icon:"mdi-information",class:"mr-2"}),e[5]||(e[5]=m(" Basic Info "))]),_:1,__:[5]}),s(M,{value:"content"},{default:l(()=>[s(h,{icon:"mdi-text",class:"mr-2"}),e[6]||(e[6]=m(" Content "))]),_:1,__:[6]}),s(M,{value:"seo"},{default:l(()=>[s(h,{icon:"mdi-search-web",class:"mr-2"}),e[7]||(e[7]=m(" SEO & Meta "))]),_:1,__:[7]})]),_:1},8,["modelValue"]),s(S),s(C,{modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=F=>i.tab=F),class:"pa-6"},{default:l(()=>[s(E,{value:"basic"},{default:l(()=>[s(I,null,{default:l(()=>[s(y,{cols:"12"},{default:l(()=>[e[8]||(e[8]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Service Title",-1)),o("div",Ke,c(i.service.title||"-"),1)]),_:1,__:[8]}),s(y,{cols:"12",md:"6"},{default:l(()=>[e[9]||(e[9]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Slug",-1)),o("div",Ge,[s(V,{size:"small",variant:"outlined"},{default:l(()=>[m(c(i.service.slug||"-"),1)]),_:1})])]),_:1,__:[9]}),s(y,{cols:"12",md:"6"},{default:l(()=>[e[10]||(e[10]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Order",-1)),o("div",Ne,c(i.service.order||0),1)]),_:1,__:[10]}),s(y,{cols:"12"},{default:l(()=>[e[11]||(e[11]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Short Description",-1)),o("div",We,c(i.service.short_description||"-"),1)]),_:1,__:[11]}),s(y,{cols:"12",md:"6"},{default:l(()=>[e[12]||(e[12]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Icon",-1)),o("div",Qe,[i.service.icon?(a(),w(h,{key:0,icon:i.service.icon,size:"large"},null,8,["icon"])):(a(),f("span",Je,"-"))])]),_:1,__:[12]}),s(y,{cols:"12",md:"6"},{default:l(()=>[e[13]||(e[13]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Price Range",-1)),o("div",Xe,c(i.service.price_range||"-"),1)]),_:1,__:[13]}),s(y,{cols:"12"},{default:l(()=>[e[14]||(e[14]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Status",-1)),o("div",Ye,[s(V,{color:i.service.published?"success":"error",size:"small"},{default:l(()=>[m(c(i.service.published?"Published":"Draft"),1)]),_:1},8,["color"])])]),_:1,__:[14]}),i.service.features&&i.service.features.length>0?(a(),w(y,{key:0,cols:"12"},{default:l(()=>[e[15]||(e[15]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Features",-1)),o("div",Ze,[(a(!0),f(U,null,O(i.service.features,(F,B)=>(a(),w(V,{key:B,class:"ma-1",size:"small",color:"primary",variant:"flat"},{default:l(()=>[m(c(F),1)]),_:2},1024))),128))])]),_:1,__:[15]})):b("",!0),i.service.benefits&&i.service.benefits.length>0?(a(),w(y,{key:1,cols:"12"},{default:l(()=>[e[16]||(e[16]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Benefits",-1)),o("div",$e,[(a(!0),f(U,null,O(i.service.benefits,(F,B)=>(a(),w(V,{key:B,class:"ma-1",size:"small",color:"success",variant:"flat"},{default:l(()=>[m(c(F),1)]),_:2},1024))),128))])]),_:1,__:[16]})):b("",!0),i.service.created_at?(a(),w(y,{key:2,cols:"12"},{default:l(()=>[e[17]||(e[17]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Created At",-1)),o("div",et,c(r.formatDateTime(i.service.created_at)),1)]),_:1,__:[17]})):b("",!0),i.service.updated_at?(a(),w(y,{key:3,cols:"12"},{default:l(()=>[e[18]||(e[18]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Updated At",-1)),o("div",tt,c(r.formatDateTime(i.service.updated_at)),1)]),_:1,__:[18]})):b("",!0)]),_:1})]),_:1}),s(E,{value:"content"},{default:l(()=>[s(I,null,{default:l(()=>[i.service.image?(a(),w(y,{key:0,cols:"12"},{default:l(()=>[e[19]||(e[19]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Service Image",-1)),s(T,{src:i.service.image,"max-width":"600","max-height":"400",class:"rounded elevation-2 mb-4",cover:""},null,8,["src"])]),_:1,__:[19]})):b("",!0),s(y,{cols:"12"},{default:l(()=>[e[20]||(e[20]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Full Description",-1)),o("div",{class:"text-body-1",innerHTML:i.service.description||"-"},null,8,it)]),_:1,__:[20]})]),_:1})]),_:1}),s(E,{value:"seo"},{default:l(()=>[s(I,null,{default:l(()=>[s(y,{cols:"12"},{default:l(()=>[e[21]||(e[21]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Title",-1)),o("div",st,c(i.service.meta_title||"-"),1)]),_:1,__:[21]}),s(y,{cols:"12"},{default:l(()=>[e[22]||(e[22]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Description",-1)),o("div",lt,c(i.service.meta_description||"-"),1)]),_:1,__:[22]}),s(y,{cols:"12"},{default:l(()=>[e[23]||(e[23]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Keywords",-1)),o("div",ot,c(i.service.meta_keywords||"-"),1)]),_:1,__:[23]}),i.service.og_image?(a(),w(y,{key:0,cols:"12"},{default:l(()=>[e[24]||(e[24]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Open Graph Image",-1)),s(T,{src:i.service.og_image,"max-width":"600","max-height":"400",class:"rounded elevation-2 mb-4",cover:""},null,8,["src"])]),_:1,__:[24]})):b("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):b("",!0)]),_:1}),s(p,{class:"pa-4 bg-grey-lighten-5"},{default:l(()=>[s(A),s(u,{color:"primary","prepend-icon":"mdi-pencil",onClick:r.handleEdit},{default:l(()=>e[25]||(e[25]=[m(" Edit Service ")])),_:1,__:[25]},8,["onClick"]),s(u,{color:"grey",variant:"text",onClick:r.closeDialog},{default:l(()=>e[26]||(e[26]=[m("Close")])),_:1,__:[26]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const nt=H(Le,[["render",rt]]),at={components:{ServiceFormDialog:Be,ServiceDetailsDialog:nt},mixins:[R],data(){return{services:[],showDialog:!1,editingService:null,showDetailsDialog:!1,selectedServiceId:null,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadServices()},methods:{async loadServices(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.publishedFilter!==null&&(t.published=this.publishedFilter);const e=await P.get("/api/v1/services",{params:t,headers:this.getAuthHeaders()});this.services=e.data.data||[],this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load services")}finally{this.loading=!1}},openDialog(t=null){this.editingService=t,this.showDialog=!0},editService(t){this.openDialog(t)},viewService(t){this.selectedServiceId=t.id,this.showDetailsDialog=!0},handleEditFromDetails(t){this.showDetailsDialog=!1,this.$nextTick(()=>{this.openDialog(t)})},handleServiceSaved(){this.loadServices()},async deleteService(t){if(confirm("Are you sure you want to delete this service?"))try{await P.delete(`/api/v1/services/${t}`,{headers:this.getAuthHeaders()}),this.showSuccess("Service deleted successfully"),await this.loadServices()}catch(e){this.handleApiError(e,"Error deleting service")}},onPerPageChange(){this.resetPagination(),this.loadServices()},onSort(t){this.handleSort(t),this.loadServices()}}},dt={class:"page-header"},mt={class:"text-caption text-grey"},ut={key:0},ct={class:"d-flex align-center"},gt={class:"d-flex align-center"},pt={class:"d-flex align-center"},ft={class:"d-flex"},ht={key:0},vt={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},_t={class:"text-caption text-grey"},bt={key:0},yt={key:0,class:"ml-2"},wt={key:1},xt={key:0,class:"d-flex align-center gap-2"};function St(t,e,v,x,i,r){const h=n("v-btn"),u=n("v-select"),g=n("v-col"),_=n("v-text-field"),M=n("v-row"),k=n("v-card-text"),S=n("v-card"),y=n("v-card-title"),V=n("v-icon"),I=n("v-skeleton-loader"),E=n("v-chip"),T=n("v-table"),C=n("v-pagination"),z=n("ServiceFormDialog"),A=n("ServiceDetailsDialog");return a(),f("div",null,[o("div",dt,[e[11]||(e[11]=o("h1",{class:"text-h4 page-title"},"Services Management",-1)),s(h,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=p=>r.openDialog()),class:"add-button"},{default:l(()=>e[10]||(e[10]=[m("Create Service")])),_:1,__:[10]})]),s(S,{class:"mb-4"},{default:l(()=>[s(k,null,{default:l(()=>[s(M,null,{default:l(()=>[s(g,{cols:"12",md:"4"},{default:l(()=>[s(u,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=p=>t.perPage=p),r.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(g,{cols:"12",md:"4"},{default:l(()=>[s(u,{modelValue:i.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=p=>i.publishedFilter=p),r.loadServices],items:i.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(g,{cols:"12",md:"4"},{default:l(()=>[s(_,{modelValue:t.search,"onUpdate:modelValue":[e[3]||(e[3]=p=>t.search=p),r.loadServices],label:"Search services","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),s(S,null,{default:l(()=>[s(y,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[13]||(e[13]=o("span",null,"Services",-1)),o("span",mt,[e[12]||(e[12]=m(" Total Records: ")),o("strong",null,c(t.pagination.total||0),1),i.services.length>0?(a(),f("span",ut," | Showing "+c((t.currentPage-1)*t.perPage+1)+" to "+c(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+c(t.pagination.total),1)):b("",!0)])]),_:1,__:[13]}),s(k,null,{default:l(()=>[s(T,null,{default:l(()=>[o("thead",null,[o("tr",null,[o("th",{class:"sortable",onClick:e[4]||(e[4]=p=>r.onSort("title"))},[o("div",ct,[e[14]||(e[14]=m(" Title ")),s(V,{icon:t.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[5]||(e[5]=p=>r.onSort("slug"))},[o("div",gt,[e[15]||(e[15]=m(" Slug ")),s(V,{icon:t.getSortIcon("slug"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[6]||(e[6]=p=>r.onSort("published"))},[o("div",pt,[e[16]||(e[16]=m(" Published ")),s(V,{icon:t.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[17]||(e[17]=o("th",null,"Actions",-1))])]),o("tbody",null,[t.loading?(a(),f(U,{key:0},O(5,p=>o("tr",{key:`skeleton-${p}`},[o("td",null,[s(I,{type:"text",width:"200"})]),o("td",null,[s(I,{type:"chip",width:"150",height:"24"})]),o("td",null,[s(I,{type:"chip",width:"80",height:"24"})]),o("td",null,[o("div",ft,[s(I,{type:"button",width:"32",height:"32",class:"mr-1"}),s(I,{type:"button",width:"32",height:"32",class:"mr-1"}),s(I,{type:"button",width:"32",height:"32"})])])])),64)):(a(),f(U,{key:1},[(a(!0),f(U,null,O(i.services,p=>(a(),f("tr",{key:p.id},[o("td",null,c(p.title),1),o("td",null,[s(E,{size:"small",variant:"outlined"},{default:l(()=>[m(c(p.slug),1)]),_:2},1024)]),o("td",null,[s(E,{color:p.published?"success":"error",size:"small"},{default:l(()=>[m(c(p.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),o("td",null,[s(h,{size:"small",icon:"mdi-eye",onClick:D=>r.viewService(p),variant:"text",color:"info",title:"View Service"},null,8,["onClick"]),s(h,{size:"small",icon:"mdi-pencil",onClick:D=>r.editService(p),variant:"text",title:"Edit Service"},null,8,["onClick"]),s(h,{size:"small",icon:"mdi-delete",onClick:D=>r.deleteService(p.id),variant:"text",color:"error",title:"Delete Service"},null,8,["onClick"])])]))),128)),i.services.length===0?(a(),f("tr",ht,e[18]||(e[18]=[o("td",{colspan:"4",class:"text-center py-4"},"No services found",-1)]))):b("",!0)],64))])]),_:1}),o("div",vt,[o("div",_t,[i.services.length>0&&t.pagination.total>0?(a(),f("span",bt,[e[19]||(e[19]=m(" Showing ")),o("strong",null,c((t.currentPage-1)*t.perPage+1),1),e[20]||(e[20]=m(" to ")),o("strong",null,c(Math.min(t.currentPage*t.perPage,t.pagination.total)),1),e[21]||(e[21]=m(" of ")),o("strong",null,c(t.pagination.total.toLocaleString()),1),e[22]||(e[22]=m(" records ")),t.pagination.last_page>1?(a(),f("span",yt," (Page "+c(t.currentPage)+" of "+c(t.pagination.last_page)+") ",1)):b("",!0)])):(a(),f("span",wt," No records found "))]),t.pagination.last_page>1?(a(),f("div",xt,[s(C,{modelValue:t.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=p=>t.currentPage=p),r.loadServices],length:t.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):b("",!0)])]),_:1})]),_:1}),s(z,{modelValue:i.showDialog,"onUpdate:modelValue":e[8]||(e[8]=p=>i.showDialog=p),"editing-service":i.editingService,onSaved:r.handleServiceSaved},null,8,["modelValue","editing-service","onSaved"]),s(A,{modelValue:i.showDetailsDialog,"onUpdate:modelValue":e[9]||(e[9]=p=>i.showDetailsDialog=p),"service-id":i.selectedServiceId,onEdit:r.handleEditFromDetails},null,8,["modelValue","service-id","onEdit"])])}const Et=H(at,[["render",St]]);export{Et as default};
