import{_ as W,c as P,w as i,b as t,h as L,r as v,a as n,d as h,f as _,t as b,F as I,e as U,o as c,g as z}from"./app-iP0VSsOb.js";import{a as Y}from"./adminPaginationMixin-DN7Wb3ng.js";import{r as Q,n as K}from"./uploads-CnEkgyD_.js";import{Q as Z}from"./quill.snow-BNU-bvb3.js";const J={name:"ProductDetailsDialog",props:{modelValue:{type:Boolean,default:!1},productDetails:{type:Object,default:null},loading:{type:Boolean,default:!1},specificationsList:{type:Array,default:()=>[]},featuresList:{type:Array,default:()=>[]},downloadsList:{type:Array,default:()=>[]},faqsList:{type:Array,default:()=>[]},warrantyInfo:{type:Object,default:()=>({period:"2 Years",coverage:[],terms:""})}},emits:["update:modelValue","edit"],data(){return{detailsTab:"basic"}},methods:{close(){this.$emit("update:modelValue",!1)},handleEdit(){this.$emit("edit")},resolveImageUrl(l){return Q(l)}},watch:{modelValue(l){l||(this.detailsTab="basic")}}},$={class:"d-flex align-center"},ee={key:0,class:"d-flex align-center justify-center pa-12"},te={class:"text-center"},le={key:1},ie={class:"text-h6 font-weight-bold mb-4"},ae={class:"text-body-1 mb-4"},se={class:"text-body-1 mb-4"},oe={class:"text-body-1 mb-4"},re=["innerHTML"],ne={key:0,class:"mb-4"},de={class:"text-caption text-medium-emphasis mt-2"},ue={key:1,class:"text-body-1 text-medium-emphasis"},me={key:0,class:"d-flex flex-wrap gap-3"},ce={class:"text-caption text-truncate"},fe={key:1,class:"text-body-1 text-medium-emphasis"},pe={class:"text-h6 font-weight-bold mb-4"},ge={class:"text-body-1 mb-4"},ve={key:0,class:"d-flex flex-wrap gap-2 mb-4"},he={key:1,class:"text-body-1 text-medium-emphasis mb-4"},ye={key:0,class:"d-flex flex-wrap gap-2"},_e={key:1,class:"text-body-1 text-medium-emphasis"},be={key:0},we={class:"font-weight-medium"},Fe={key:1,class:"text-center py-8"},ke={key:0},De={key:1,class:"text-center py-8"},Pe={key:0},xe={key:1,class:"text-center py-8"},Ve={key:0},Le={class:"font-weight-medium"},Ie={class:"text-body-1"},Ue={key:1,class:"text-center py-8"},Ce={class:"text-h6 font-weight-bold mb-4"},Ae={key:0},Te={key:1,class:"text-body-1 text-medium-emphasis mb-4"},ze={class:"text-body-1"},Se={class:"text-body-1 mb-4"},qe={class:"text-body-1 mb-4"},Ee={class:"text-body-1 mb-4"},Me={key:0,class:"mb-2"},Oe={class:"text-body-1"},Re={class:"text-body-1 mb-4"},Be={class:"text-body-1 mb-4"},Ge={class:"text-body-1 mb-4"},He={class:"text-body-1 mb-4"};function je(l,e,s,d,a,u){const f=v("v-icon"),F=v("v-btn"),D=v("v-card-title"),m=v("v-progress-circular"),o=v("v-tab"),C=v("v-tabs"),S=v("v-divider"),y=v("v-col"),w=v("v-row"),x=v("v-window-item"),R=v("v-img"),V=v("v-card-text"),A=v("v-card"),q=v("v-chip"),O=v("v-table"),M=v("v-list-item-title"),p=v("v-list-item"),T=v("v-list"),B=v("v-expansion-panel-title"),G=v("v-expansion-panel-text"),H=v("v-expansion-panel"),j=v("v-expansion-panels"),N=v("v-window"),X=v("v-spacer"),r=v("v-card-actions"),k=v("v-dialog");return c(),P(k,{"model-value":s.modelValue,"onUpdate:modelValue":e[2]||(e[2]=g=>l.$emit("update:modelValue",g)),"max-width":"1400",scrollable:""},{default:i(()=>[t(A,null,{default:i(()=>[t(D,{class:"d-flex align-center justify-space-between bg-info text-white pa-4"},{default:i(()=>[n("div",$,[t(f,{icon:"mdi-eye",class:"mr-3"}),e[3]||(e[3]=n("span",{class:"text-h5 font-weight-bold"},"Product Details",-1))]),t(F,{icon:"mdi-close",variant:"text",color:"white",onClick:u.close,disabled:s.loading},null,8,["onClick","disabled"])]),_:1}),t(V,{class:"pa-0"},{default:i(()=>[s.loading?(c(),h("div",ee,[n("div",te,[t(m,{indeterminate:"",color:"info",size:"64"}),e[4]||(e[4]=n("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading product details...",-1))])])):s.productDetails?(c(),h("div",le,[t(C,{modelValue:a.detailsTab,"onUpdate:modelValue":e[0]||(e[0]=g=>a.detailsTab=g),color:"info","bg-color":"grey-lighten-4"},{default:i(()=>[t(o,{value:"basic"},{default:i(()=>[t(f,{icon:"mdi-information",class:"mr-2"}),e[5]||(e[5]=_(" Basic Info "))]),_:1,__:[5]}),t(o,{value:"media"},{default:i(()=>[t(f,{icon:"mdi-image",class:"mr-2"}),e[6]||(e[6]=_(" Media "))]),_:1,__:[6]}),t(o,{value:"pricing"},{default:i(()=>[t(f,{icon:"mdi-currency-usd",class:"mr-2"}),e[7]||(e[7]=_(" Pricing "))]),_:1,__:[7]}),t(o,{value:"categories"},{default:i(()=>[t(f,{icon:"mdi-folder",class:"mr-2"}),e[8]||(e[8]=_(" Categories & Tags "))]),_:1,__:[8]}),t(o,{value:"specs"},{default:i(()=>[t(f,{icon:"mdi-cog",class:"mr-2"}),e[9]||(e[9]=_(" Specifications "))]),_:1,__:[9]}),t(o,{value:"features"},{default:i(()=>[t(f,{icon:"mdi-star",class:"mr-2"}),e[10]||(e[10]=_(" Features "))]),_:1,__:[10]}),t(o,{value:"downloads"},{default:i(()=>[t(f,{icon:"mdi-download",class:"mr-2"}),e[11]||(e[11]=_(" Downloads "))]),_:1,__:[11]}),t(o,{value:"faq"},{default:i(()=>[t(f,{icon:"mdi-help-circle",class:"mr-2"}),e[12]||(e[12]=_(" FAQs "))]),_:1,__:[12]}),t(o,{value:"warranty"},{default:i(()=>[t(f,{icon:"mdi-shield-check",class:"mr-2"}),e[13]||(e[13]=_(" Warranty & Service "))]),_:1,__:[13]}),t(o,{value:"seo"},{default:i(()=>[t(f,{icon:"mdi-search-web",class:"mr-2"}),e[14]||(e[14]=_(" SEO "))]),_:1,__:[14]}),t(o,{value:"settings"},{default:i(()=>[t(f,{icon:"mdi-cog-outline",class:"mr-2"}),e[15]||(e[15]=_(" Settings "))]),_:1,__:[15]})]),_:1},8,["modelValue"]),t(S),t(N,{modelValue:a.detailsTab,"onUpdate:modelValue":e[1]||(e[1]=g=>a.detailsTab=g),class:"pa-6"},{default:i(()=>[t(x,{value:"basic"},{default:i(()=>[t(w,null,{default:i(()=>[t(y,{cols:"12"},{default:i(()=>[e[16]||(e[16]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Product Title",-1)),n("div",ie,b(s.productDetails.title||"-"),1)]),_:1,__:[16]}),t(y,{cols:"12",md:"6"},{default:i(()=>[e[17]||(e[17]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Slug",-1)),n("div",ae,b(s.productDetails.slug||"-"),1)]),_:1,__:[17]}),t(y,{cols:"12",md:"6"},{default:i(()=>[e[18]||(e[18]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"SKU",-1)),n("div",se,b(s.productDetails.sku||"-"),1)]),_:1,__:[18]}),t(y,{cols:"12"},{default:i(()=>[e[19]||(e[19]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Short Description",-1)),n("div",oe,b(s.productDetails.short_description||"-"),1)]),_:1,__:[19]}),t(y,{cols:"12"},{default:i(()=>[e[20]||(e[20]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Full Description",-1)),n("div",{class:"text-body-1",innerHTML:s.productDetails.description||"-"},null,8,re)]),_:1,__:[20]})]),_:1})]),_:1}),t(x,{value:"media"},{default:i(()=>[t(w,null,{default:i(()=>[t(y,{cols:"12"},{default:i(()=>[e[21]||(e[21]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Thumbnail",-1)),s.productDetails.thumbnail?(c(),h("div",ne,[t(R,{src:u.resolveImageUrl(s.productDetails.thumbnail),"max-height":"300",contain:"",class:"rounded elevation-2"},null,8,["src"]),n("div",de,b(s.productDetails.thumbnail),1)])):(c(),h("div",ue,"No thumbnail"))]),_:1,__:[21]}),t(y,{cols:"12"},{default:i(()=>[e[22]||(e[22]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Product Images (Gallery) ",-1)),s.productDetails.images&&s.productDetails.images.length>0?(c(),h("div",me,[(c(!0),h(I,null,U(s.productDetails.images,(g,E)=>(c(),P(A,{key:E,class:"elevation-2",style:{"max-width":"200px"}},{default:i(()=>[t(R,{src:u.resolveImageUrl(g),height:"150",cover:""},null,8,["src"]),t(V,{class:"pa-2"},{default:i(()=>[n("div",ce,b(g),1)]),_:2},1024)]),_:2},1024))),128))])):(c(),h("div",fe,"No images"))]),_:1,__:[22]})]),_:1})]),_:1}),t(x,{value:"pricing"},{default:i(()=>[t(w,null,{default:i(()=>[t(y,{cols:"12",md:"6"},{default:i(()=>[e[23]||(e[23]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Price",-1)),n("div",pe,b(s.productDetails.price?"$"+s.productDetails.price:"-"),1)]),_:1,__:[23]}),t(y,{cols:"12",md:"6"},{default:i(()=>[e[24]||(e[24]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Price Range",-1)),n("div",ge,b(s.productDetails.price_range||"-"),1)]),_:1,__:[24]}),t(y,{cols:"12"},{default:i(()=>[e[25]||(e[25]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Show Price on Website ",-1)),t(q,{color:s.productDetails.show_price?"success":"error",size:"small"},{default:i(()=>[_(b(s.productDetails.show_price?"Yes":"No"),1)]),_:1},8,["color"])]),_:1,__:[25]})]),_:1})]),_:1}),t(x,{value:"categories"},{default:i(()=>[t(w,null,{default:i(()=>[t(y,{cols:"12"},{default:i(()=>[e[26]||(e[26]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Categories",-1)),s.productDetails.categories&&s.productDetails.categories.length>0?(c(),h("div",ve,[(c(!0),h(I,null,U(s.productDetails.categories,g=>(c(),P(q,{key:g.id,color:"primary",variant:"tonal"},{default:i(()=>[_(b(g.name),1)]),_:2},1024))),128))])):(c(),h("div",he,"No categories"))]),_:1,__:[26]}),t(y,{cols:"12"},{default:i(()=>[e[27]||(e[27]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Tags",-1)),s.productDetails.tags&&s.productDetails.tags.length>0?(c(),h("div",ye,[(c(!0),h(I,null,U(s.productDetails.tags,g=>(c(),P(q,{key:g.id,color:"info",variant:"outlined"},{default:i(()=>[_(b(g.name),1)]),_:2},1024))),128))])):(c(),h("div",_e,"No tags"))]),_:1,__:[27]})]),_:1})]),_:1}),t(x,{value:"specs"},{default:i(()=>[s.specificationsList.length>0?(c(),h("div",be,[t(O,null,{default:i(()=>[e[28]||(e[28]=n("thead",null,[n("tr",null,[n("th",null,"Specification"),n("th",null,"Value")])],-1)),n("tbody",null,[(c(!0),h(I,null,U(s.specificationsList,(g,E)=>(c(),h("tr",{key:E},[n("td",we,b(g.key),1),n("td",null,b(g.value),1)]))),128))])]),_:1,__:[28]})])):(c(),h("div",Fe,[t(f,{icon:"mdi-cog",size:"48",color:"grey-lighten-1",class:"mb-4"}),e[29]||(e[29]=n("p",{class:"text-body-1 text-medium-emphasis"},"No specifications available",-1))]))]),_:1}),t(x,{value:"features"},{default:i(()=>[s.featuresList.length>0?(c(),h("div",ke,[t(T,null,{default:i(()=>[(c(!0),h(I,null,U(s.featuresList,(g,E)=>(c(),P(p,{key:E,"prepend-icon":"mdi-check-circle",color:"success"},{default:i(()=>[t(M,null,{default:i(()=>[_(b(g),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(c(),h("div",De,[t(f,{icon:"mdi-star-outline",size:"48",color:"grey-lighten-1",class:"mb-4"}),e[30]||(e[30]=n("p",{class:"text-body-1 text-medium-emphasis"},"No features available",-1))]))]),_:1}),t(x,{value:"downloads"},{default:i(()=>[s.downloadsList.length>0?(c(),h("div",Pe,[t(T,null,{default:i(()=>[(c(!0),h(I,null,U(s.downloadsList,(g,E)=>(c(),P(p,{key:E,title:g.title,subtitle:`${g.type} - ${g.size||"N/A"}`,"prepend-icon":"mdi-download","append-icon":"mdi-open-in-new"},{append:i(()=>[t(F,{icon:"mdi-open-in-new",variant:"text",size:"small",onClick:Ot=>l.window.open(g.url,"_blank")},null,8,["onClick"])]),_:2},1032,["title","subtitle"]))),128))]),_:1})])):(c(),h("div",xe,[t(f,{icon:"mdi-download-off",size:"48",color:"grey-lighten-1",class:"mb-4"}),e[31]||(e[31]=n("p",{class:"text-body-1 text-medium-emphasis"},"No downloads available",-1))]))]),_:1}),t(x,{value:"faq"},{default:i(()=>[s.faqsList.length>0?(c(),h("div",Ve,[t(j,null,{default:i(()=>[(c(!0),h(I,null,U(s.faqsList,(g,E)=>(c(),P(H,{key:E},{default:i(()=>[t(B,null,{default:i(()=>[n("div",Le,b(g.question),1)]),_:2},1024),t(G,null,{default:i(()=>[n("div",Ie,b(g.answer),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(c(),h("div",Ue,[t(f,{icon:"mdi-help-circle-outline",size:"48",color:"grey-lighten-1",class:"mb-4"}),e[32]||(e[32]=n("p",{class:"text-body-1 text-medium-emphasis"},"No FAQs available",-1))]))]),_:1}),t(x,{value:"warranty"},{default:i(()=>[t(w,null,{default:i(()=>[t(y,{cols:"12"},{default:i(()=>[e[33]||(e[33]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Warranty Period",-1)),n("div",Ce,b(s.warrantyInfo.period||"-"),1)]),_:1,__:[33]}),t(y,{cols:"12"},{default:i(()=>[e[34]||(e[34]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"What's Covered",-1)),s.warrantyInfo.coverage&&s.warrantyInfo.coverage.length>0?(c(),h("div",Ae,[t(T,null,{default:i(()=>[(c(!0),h(I,null,U(s.warrantyInfo.coverage,(g,E)=>(c(),P(p,{key:E,"prepend-icon":"mdi-check",color:"success"},{default:i(()=>[t(M,null,{default:i(()=>[_(b(g),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(c(),h("div",Te,"No coverage items "))]),_:1,__:[34]}),t(y,{cols:"12"},{default:i(()=>[e[35]||(e[35]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Terms & Conditions",-1)),n("div",ze,b(s.warrantyInfo.terms||"-"),1)]),_:1,__:[35]})]),_:1})]),_:1}),t(x,{value:"seo"},{default:i(()=>[t(w,null,{default:i(()=>[t(y,{cols:"12"},{default:i(()=>[e[36]||(e[36]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Title",-1)),n("div",Se,b(s.productDetails.meta_title||"-"),1)]),_:1,__:[36]}),t(y,{cols:"12"},{default:i(()=>[e[37]||(e[37]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Description",-1)),n("div",qe,b(s.productDetails.meta_description||"-"),1)]),_:1,__:[37]}),t(y,{cols:"12"},{default:i(()=>[e[38]||(e[38]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Keywords",-1)),n("div",Ee,b(s.productDetails.meta_keywords||"-"),1)]),_:1,__:[38]}),t(y,{cols:"12"},{default:i(()=>[e[39]||(e[39]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Open Graph Image",-1)),s.productDetails.og_image?(c(),h("div",Me,[t(R,{src:u.resolveImageUrl(s.productDetails.og_image),"max-height":"200",contain:"",class:"rounded"},null,8,["src"])])):L("",!0),n("div",Oe,b(s.productDetails.og_image||"-"),1)]),_:1,__:[39]})]),_:1})]),_:1}),t(x,{value:"settings"},{default:i(()=>[t(w,null,{default:i(()=>[t(y,{cols:"12",md:"6"},{default:i(()=>[e[40]||(e[40]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Published Status",-1)),t(q,{color:s.productDetails.published?"success":"error",size:"default",class:"mb-4"},{default:i(()=>[_(b(s.productDetails.published?"Published":"Draft"),1)]),_:1},8,["color"])]),_:1,__:[40]}),t(y,{cols:"12",md:"6"},{default:i(()=>[e[41]||(e[41]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Featured Product",-1)),t(q,{color:s.productDetails.featured?"amber":"grey",size:"default",class:"mb-4"},{default:i(()=>[_(b(s.productDetails.featured?"Featured":"Not Featured"),1)]),_:1},8,["color"])]),_:1,__:[41]}),t(y,{cols:"12",md:"6"},{default:i(()=>[e[42]||(e[42]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Stock Quantity",-1)),n("div",Re,b(s.productDetails.stock!==null?s.productDetails.stock:"-"),1)]),_:1,__:[42]}),t(y,{cols:"12",md:"6"},{default:i(()=>[e[43]||(e[43]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Display Order",-1)),n("div",Be,b(s.productDetails.order||0),1)]),_:1,__:[43]}),t(y,{cols:"12",md:"6"},{default:i(()=>[e[44]||(e[44]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Created At",-1)),n("div",Ge,b(s.productDetails.created_at?new Date(s.productDetails.created_at).toLocaleString():"-"),1)]),_:1,__:[44]}),t(y,{cols:"12",md:"6"},{default:i(()=>[e[45]||(e[45]=n("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Updated At",-1)),n("div",He,b(s.productDetails.updated_at?new Date(s.productDetails.updated_at).toLocaleString():"-"),1)]),_:1,__:[45]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):L("",!0)]),_:1}),!s.loading&&s.productDetails?(c(),P(r,{key:0,class:"pa-4 bg-grey-lighten-4"},{default:i(()=>[t(X),t(F,{variant:"text",onClick:u.close},{default:i(()=>e[46]||(e[46]=[_("Close")])),_:1,__:[46]},8,["onClick"]),t(F,{color:"primary",variant:"flat",onClick:u.handleEdit},{default:i(()=>[t(f,{icon:"mdi-pencil",class:"mr-2"}),e[47]||(e[47]=_(" Edit Product "))]),_:1,__:[47]},8,["onClick"])]),_:1})):L("",!0)]),_:1})]),_:1},8,["model-value"])}const Ne=W(J,[["render",je]]),Xe={name:"ProductFormDialog",props:{modelValue:{type:Boolean,default:!1},editingProduct:{type:Object,default:null},loading:{type:Boolean,default:!1},saving:{type:Boolean,default:!1},form:{type:Object,required:!0},formTab:{type:String,default:"basic"},availableCategories:{type:Array,default:()=>[]},availableTags:{type:Array,default:()=>[]},loadingCategories:{type:Boolean,default:!1},specificationsList:{type:Array,default:()=>[]},featuresList:{type:Array,default:()=>[]},downloadsList:{type:Array,default:()=>[]},faqsList:{type:Array,default:()=>[]},warrantyInfo:{type:Object,required:!0},downloadTypes:{type:Array,default:()=>["PDF","ZIP","DOC","DOCX","XLS","XLSX","Other"]},thumbnailFile:{type:[Object,Array],default:null},galleryFiles:{type:Array,default:()=>[]},thumbnailPreview:{type:String,default:null},galleryPreviews:{type:Array,default:()=>[]},imageUrlInputs:{type:Array,default:()=>[]}},emits:["update:modelValue","update:form","update:form-tab","update:specifications-list","update:features-list","update:downloads-list","update:faqs-list","update:warranty-info","update:thumbnail-file","update:gallery-files","update:thumbnail-preview","update:gallery-previews","update:image-url-inputs","close","save","generate-slug","add-image-url","remove-image-url","remove-image","preview-thumbnail","preview-gallery-images","remove-gallery-preview","add-specification","remove-specification","add-feature","remove-feature","add-download","remove-download","handle-download-file-change","clear-download-file","add-faq","remove-faq","add-coverage-item","remove-coverage-item"],data(){return{localForm:{...this.form},localFormTab:this.formTab,localThumbnailFile:this.thumbnailFile,localGalleryFiles:this.galleryFiles,quillEditor:null,localDownloadsList:[]}},watch:{form:{handler(l,e){if(this.localForm={...l},this.quillEditor){const s=this.quillEditor.root.innerHTML.trim(),d=(l.description||"").trim();d&&s!==d&&(this.quillEditor.root.innerHTML=l.description||"")}else l.description&&this.localFormTab==="basic"&&this.modelValue&&!this.loading&&this.$nextTick(()=>{setTimeout(()=>{this.initEditor()},300)})},deep:!0,immediate:!1},formTab(l){this.localFormTab=l},thumbnailFile(l){this.localThumbnailFile=l},galleryFiles(l){this.localGalleryFiles=l},downloadsList:{handler(l){Array.isArray(l)?this.localDownloadsList=l.map((e,s)=>{const d=this.localDownloadsList[s];return{title:e.title||"",type:e.type||"PDF",size:e.size||(e.file&&e.file.size?this.formatFileSize(e.file.size):""),url:e.url||"",file:e.file||(d&&d.file?d.file:null),uploading:e.uploading||!1,uploaded:e.uploaded||!1}}):this.localDownloadsList=[]},deep:!0,immediate:!0},modelValue(l){l?l&&this.localFormTab==="basic"&&!this.loading&&this.$nextTick(()=>{setTimeout(()=>{this.initEditor()},300)}):(this.localFormTab="basic",this.destroyEditor())},localFormTab(l){l==="basic"&&this.modelValue&&!this.loading?setTimeout(()=>{this.initEditor()},300):l!=="basic"&&this.quillEditor&&this.destroyEditor()},loading(l,e){e===!0&&l===!1&&this.localFormTab==="basic"&&this.modelValue&&this.$nextTick(()=>{setTimeout(()=>{this.quillEditor&&this.localForm.description?this.quillEditor.root.innerHTML=this.localForm.description||"":this.initEditor()},300)})}},methods:{close(){this.destroyEditor(),this.$emit("update:modelValue",!1),this.$emit("close")},handleThumbnailChange(l){this.$emit("update:thumbnail-file",l),this.$emit("preview-thumbnail",l)},handleGalleryChange(l){this.$emit("update:gallery-files",l),this.$emit("preview-gallery-images",l)},updateFormTab(l){this.localFormTab=l,this.$emit("update:form-tab",l)},formatFileSize(l){if(!l||l===0)return"0 Bytes";const e=1024,s=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(l)/Math.log(e));return Math.round(l/Math.pow(e,d)*100)/100+" "+s[d]},getDownloadFileSize(l){if(l.size&&l.size!==""&&l.size!=="0 Bytes"){if(typeof l.size=="string"&&(l.size.includes("KB")||l.size.includes("MB")||l.size.includes("GB")||l.size.includes("Bytes")))return l.size;if(typeof l.size=="number"&&l.size>0)return this.formatFileSize(l.size)}return l.file&&l.file.size&&l.file.size>0?this.formatFileSize(l.file.size):l.uploaded&&l.file&&l.file.size?this.formatFileSize(l.file.size):"Size unknown"},resolveImageUrl(l){return Q(l)},updateDownloadsList(){this.$emit("update:downloads-list",[...this.localDownloadsList])},handleDownloadFileChange(l,e){const s=this.localDownloadsList[l];if(s){if(s.file=e,e&&e.size){const d=e.name.split(".").pop().toUpperCase();["PDF","ZIP","DOC","DOCX","XLS","XLSX"].includes(d)&&(s.type=d),(!s.size||s.size==="")&&(s.size=this.formatFileSize(e.size))}this.updateDownloadsList(),this.$emit("handle-download-file-change",l)}},handleClearDownloadFile(l){const e=this.localDownloadsList[l];e&&(e.file=null,e.uploading=!1,e.uploaded=!1,e.url||(e.size=""),this.updateDownloadsList(),this.$emit("clear-download-file",l))},handleRemoveDownload(l){this.localDownloadsList.splice(l,1),this.updateDownloadsList(),this.$emit("remove-download",l)},initEditor(){this.quillEditor&&this.destroyEditor(),this.$nextTick(()=>{if(!this.$refs.editorContainer){console.warn("Editor container not found");return}if(!(this.localFormTab!=="basic"||!this.modelValue||this.loading))try{this.$refs.editorContainer.innerHTML="",this.quillEditor=new Z(this.$refs.editorContainer,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["blockquote","code-block"],["clean"]]},placeholder:"Enter detailed product description..."});const l=this.localForm.description||"";l&&setTimeout(()=>{this.quillEditor&&(this.quillEditor.root.innerHTML=l)},100),this.quillEditor.on("text-change",()=>{if(!this.quillEditor)return;const e=this.quillEditor.root.innerHTML.trim();e&&e!=="<p><br></p>"&&e!=="<p></p>"?(this.localForm.description=this.quillEditor.root.innerHTML,this.$emit("update:form",this.localForm)):(!e||e==="<p><br></p>"||e==="<p></p>")&&(this.localForm.description="",this.$emit("update:form",this.localForm))}),this.quillEditor.on("selection-change",()=>{if(!this.quillEditor)return;const e=this.quillEditor.root.innerHTML.trim();e&&e!=="<p><br></p>"&&e!=="<p></p>"&&(this.localForm.description=this.quillEditor.root.innerHTML,this.$emit("update:form",this.localForm))})}catch(l){console.error("Error initializing Quill editor:",l)}})},destroyEditor(){if(this.quillEditor){try{if(this.quillEditor.root&&this.quillEditor.root.innerHTML){const l=this.quillEditor.root.innerHTML.trim();l&&l!=="<p><br></p>"&&(this.localForm.description=l,this.$emit("update:form",this.localForm))}}catch(l){console.error("Error saving editor content:",l)}try{this.quillEditor=null,this.$refs.editorContainer&&(this.$refs.editorContainer.innerHTML="")}catch(l){console.error("Error destroying editor:",l)}}}},beforeUnmount(){this.destroyEditor()}},We={class:"text-h5 font-weight-bold"},Qe={key:0,class:"d-flex align-center justify-center pa-12"},Ye={class:"text-center"},Ke={key:1},Ze={class:"rich-text-editor-wrapper"},Je={ref:"editorContainer",class:"rich-text-editor"},$e={key:0,class:"mt-3 mb-3"},et={class:"text-caption text-medium-emphasis"},tt={key:0},lt={key:1,class:"mt-2 mb-3"},it={key:0,class:"mb-4"},at={class:"text-subtitle-2 text-medium-emphasis mb-2"},st={class:"d-flex flex-wrap gap-3"},ot={class:"text-caption text-truncate"},rt={key:2,class:"mt-3 mb-4"},nt={class:"text-subtitle-2 text-medium-emphasis mb-2"},dt={class:"d-flex flex-wrap gap-3"},ut={class:"text-caption text-truncate"},mt={key:0,class:"text-caption text-medium-emphasis"},ct={key:0,class:"mt-2"},ft={key:0,class:"mt-2 mb-2"},pt={class:"d-flex align-center"},gt={class:"flex-grow-1"},vt={class:"text-body-2 font-weight-bold"},ht={class:"text-caption text-medium-emphasis"},yt={key:0,class:"ml-2"},_t={key:1,class:"ml-2 text-success"};function bt(l,e,s,d,a,u){const f=v("v-btn"),F=v("v-card-title"),D=v("v-progress-circular"),m=v("v-icon"),o=v("v-tab"),C=v("v-tabs"),S=v("v-divider"),y=v("v-text-field"),w=v("v-col"),x=v("v-textarea"),R=v("v-label"),V=v("v-row"),A=v("v-window-item"),q=v("v-file-input"),O=v("v-img"),M=v("v-card-text"),p=v("v-card"),T=v("v-switch"),B=v("v-select"),G=v("v-combobox"),H=v("v-window"),j=v("v-spacer"),N=v("v-card-actions"),X=v("v-dialog");return c(),P(X,{"model-value":s.modelValue,"onUpdate:modelValue":e[58]||(e[58]=r=>l.$emit("update:modelValue",r)),"max-width":"1400",scrollable:"",persistent:""},{default:i(()=>[t(p,null,{default:i(()=>[t(F,{class:"d-flex align-center justify-space-between bg-primary text-white pa-4"},{default:i(()=>[n("span",We,b(s.editingProduct?"Edit Product":"Create New Product"),1),t(f,{icon:"mdi-close",variant:"text",color:"white",onClick:u.close,disabled:s.loading},null,8,["onClick","disabled"])]),_:1}),t(M,{class:"pa-0"},{default:i(()=>[s.loading?(c(),h("div",Qe,[n("div",Ye,[t(D,{indeterminate:"",color:"primary",size:"64"}),e[59]||(e[59]=n("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading product data...",-1))])])):(c(),h("div",Ke,[t(C,{modelValue:a.localFormTab,"onUpdate:modelValue":[e[0]||(e[0]=r=>a.localFormTab=r),u.updateFormTab],color:"primary","bg-color":"grey-lighten-4"},{default:i(()=>[t(o,{value:"basic"},{default:i(()=>[t(m,{icon:"mdi-information",class:"mr-2"}),e[60]||(e[60]=_(" Basic Info "))]),_:1,__:[60]}),t(o,{value:"media"},{default:i(()=>[t(m,{icon:"mdi-image",class:"mr-2"}),e[61]||(e[61]=_(" Media "))]),_:1,__:[61]}),t(o,{value:"pricing"},{default:i(()=>[t(m,{icon:"mdi-currency-usd",class:"mr-2"}),e[62]||(e[62]=_(" Pricing "))]),_:1,__:[62]}),t(o,{value:"categories"},{default:i(()=>[t(m,{icon:"mdi-folder",class:"mr-2"}),e[63]||(e[63]=_(" Categories & Tags "))]),_:1,__:[63]}),t(o,{value:"specs"},{default:i(()=>[t(m,{icon:"mdi-cog",class:"mr-2"}),e[64]||(e[64]=_(" Specifications "))]),_:1,__:[64]}),t(o,{value:"features"},{default:i(()=>[t(m,{icon:"mdi-star",class:"mr-2"}),e[65]||(e[65]=_(" Features "))]),_:1,__:[65]}),t(o,{value:"downloads"},{default:i(()=>[t(m,{icon:"mdi-download",class:"mr-2"}),e[66]||(e[66]=_(" Downloads "))]),_:1,__:[66]}),t(o,{value:"faq"},{default:i(()=>[t(m,{icon:"mdi-help-circle",class:"mr-2"}),e[67]||(e[67]=_(" FAQs "))]),_:1,__:[67]}),t(o,{value:"warranty"},{default:i(()=>[t(m,{icon:"mdi-shield-check",class:"mr-2"}),e[68]||(e[68]=_(" Warranty & Service "))]),_:1,__:[68]}),t(o,{value:"seo"},{default:i(()=>[t(m,{icon:"mdi-search-web",class:"mr-2"}),e[69]||(e[69]=_(" SEO "))]),_:1,__:[69]}),t(o,{value:"settings"},{default:i(()=>[t(m,{icon:"mdi-cog-outline",class:"mr-2"}),e[70]||(e[70]=_(" Settings "))]),_:1,__:[70]})]),_:1},8,["modelValue","onUpdate:modelValue"]),t(S),t(H,{modelValue:a.localFormTab,"onUpdate:modelValue":e[56]||(e[56]=r=>a.localFormTab=r),class:"pa-6"},{default:i(()=>[t(A,{value:"basic"},{default:i(()=>[t(V,null,{default:i(()=>[t(w,{cols:"12"},{default:i(()=>[t(y,{modelValue:a.localForm.title,"onUpdate:modelValue":[e[1]||(e[1]=r=>a.localForm.title=r),e[2]||(e[2]=r=>l.$emit("update:form",a.localForm))],label:"Product Title *",variant:"outlined",rules:[r=>!!r||"Title is required"]},null,8,["modelValue","rules"])]),_:1}),t(w,{cols:"12",md:"6"},{default:i(()=>[t(y,{modelValue:a.localForm.slug,"onUpdate:modelValue":[e[4]||(e[4]=r=>a.localForm.slug=r),e[5]||(e[5]=r=>l.$emit("update:form",a.localForm))],label:"Slug *",variant:"outlined",hint:"URL-friendly version of title",rules:[r=>!!r||"Slug is required"]},{append:i(()=>[t(f,{icon:"mdi-refresh",size:"small",variant:"text",onClick:e[3]||(e[3]=r=>l.$emit("generate-slug"))})]),_:1},8,["modelValue","rules"])]),_:1}),t(w,{cols:"12",md:"6"},{default:i(()=>[t(y,{modelValue:a.localForm.sku,"onUpdate:modelValue":[e[6]||(e[6]=r=>a.localForm.sku=r),e[7]||(e[7]=r=>l.$emit("update:form",a.localForm))],label:"SKU",variant:"outlined",hint:"Stock Keeping Unit"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12"},{default:i(()=>[t(x,{modelValue:a.localForm.short_description,"onUpdate:modelValue":[e[8]||(e[8]=r=>a.localForm.short_description=r),e[9]||(e[9]=r=>l.$emit("update:form",a.localForm))],label:"Short Description",variant:"outlined",rows:"2",hint:"Brief description for listings"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12"},{default:i(()=>[t(R,{class:"mb-2"},{default:i(()=>e[71]||(e[71]=[_("Full Description")])),_:1,__:[71]}),n("div",Ze,[n("div",Je,null,512)])]),_:1})]),_:1})]),_:1}),t(A,{value:"media"},{default:i(()=>[t(V,null,{default:i(()=>[t(w,{cols:"12"},{default:i(()=>[e[73]||(e[73]=n("div",{class:"text-subtitle-1 font-weight-bold mb-2"},"Thumbnail Image",-1)),t(q,{modelValue:a.localThumbnailFile,"onUpdate:modelValue":[e[10]||(e[10]=r=>a.localThumbnailFile=r),u.handleThumbnailChange],label:"Select Thumbnail Image",accept:"image/*","prepend-icon":"mdi-camera",variant:"outlined",clearable:"","show-size":"",hint:"Select an image file (will upload on save). Recommended size: 800x600px or 1200x900px (4:3 ratio)","persistent-hint":"",class:"mb-3"},null,8,["modelValue","onUpdate:modelValue"]),a.localThumbnailFile&&s.thumbnailPreview?(c(),h("div",$e,[t(p,{class:"elevation-2",style:{"max-width":"300px"}},{default:i(()=>[t(O,{src:s.thumbnailPreview,"max-height":"200",contain:"",class:"rounded"},null,8,["src"]),t(M,{class:"pa-2"},{default:i(()=>[n("div",et,[_(b(a.localThumbnailFile.name||"Selected file")+" ",1),a.localThumbnailFile.size?(c(),h("span",tt," ("+b(u.formatFileSize(a.localThumbnailFile.size))+") ",1)):L("",!0)])]),_:1})]),_:1})])):a.localForm.thumbnail?(c(),h("div",lt,[t(p,{class:"elevation-2",style:{"max-width":"300px"}},{default:i(()=>[t(O,{src:u.resolveImageUrl(a.localForm.thumbnail),"max-height":"200",contain:"",class:"rounded"},null,8,["src"]),t(M,{class:"pa-2"},{default:i(()=>e[72]||(e[72]=[n("div",{class:"text-caption text-medium-emphasis"},"Current thumbnail ",-1)])),_:1,__:[72]})]),_:1})])):L("",!0),t(y,{modelValue:a.localForm.thumbnail,"onUpdate:modelValue":[e[11]||(e[11]=r=>a.localForm.thumbnail=r),e[12]||(e[12]=r=>l.$emit("update:form",a.localForm))],label:"Or Enter Image URL",variant:"outlined","prepend-inner-icon":"mdi-link",hint:"Alternative: Paste image URL",class:"mt-2"},null,8,["modelValue"])]),_:1,__:[73]}),t(w,{cols:"12"},{default:i(()=>[e[75]||(e[75]=n("div",{class:"text-subtitle-1 font-weight-bold mb-2"},"Product Images (Gallery) ",-1)),a.localForm.images&&a.localForm.images.length>0?(c(),h("div",it,[n("div",at,"Existing Images ("+b(a.localForm.images.length)+")",1),n("div",st,[(c(!0),h(I,null,U(a.localForm.images,(r,k)=>(c(),P(p,{key:`existing-${k}`,class:"elevation-2",style:{"max-width":"200px",position:"relative"}},{default:i(()=>[t(O,{src:u.resolveImageUrl(r),height:"150",cover:""},null,8,["src"]),t(M,{class:"pa-2"},{default:i(()=>[n("div",ot,b(r),1)]),_:2},1024),t(f,{icon:"mdi-close",size:"x-small",color:"error",variant:"flat",class:"position-absolute",style:{top:"4px",right:"4px"},onClick:g=>l.$emit("remove-image",k)},null,8,["onClick"])]),_:2},1024))),128))])])):L("",!0),a.localForm.images&&a.localForm.images.length>0?(c(),P(S,{key:1,class:"my-4"})):L("",!0),e[76]||(e[76]=n("div",{class:"text-subtitle-2 text-medium-emphasis mb-2"},"Upload New Images",-1)),t(q,{modelValue:a.localGalleryFiles,"onUpdate:modelValue":[e[13]||(e[13]=r=>a.localGalleryFiles=r),u.handleGalleryChange],label:"Select Gallery Images",accept:"image/*","prepend-icon":"mdi-image-multiple",variant:"outlined",multiple:"",clearable:"","show-size":"",hint:"Select multiple image files (will upload on save). Recommended size: 1200x800px or 1600x1200px (3:2 or 4:3 ratio)","persistent-hint":"",class:"mb-3"},null,8,["modelValue","onUpdate:modelValue"]),s.galleryPreviews.length>0?(c(),h("div",rt,[n("div",nt,"New Images to Upload ("+b(s.galleryPreviews.length)+")",1),n("div",dt,[(c(!0),h(I,null,U(s.galleryPreviews,(r,k)=>(c(),P(p,{key:`preview-${k}`,class:"elevation-2",style:{"max-width":"200px",position:"relative"}},{default:i(()=>[t(O,{src:r.url,height:"150",cover:""},null,8,["src"]),t(M,{class:"pa-2"},{default:i(()=>[n("div",ut,b(r.name),1),r.size?(c(),h("div",mt,b(u.formatFileSize(r.size)),1)):L("",!0)]),_:2},1024),t(f,{icon:"mdi-close",size:"x-small",color:"error",variant:"flat",class:"position-absolute",style:{top:"4px",right:"4px"},onClick:g=>l.$emit("remove-gallery-preview",k)},null,8,["onClick"])]),_:2},1024))),128))])])):L("",!0),t(S,{class:"my-4"}),e[77]||(e[77]=n("div",{class:"text-subtitle-2 text-medium-emphasis mb-2"},"Or Add Image URLs",-1)),(c(!0),h(I,null,U(s.imageUrlInputs,(r,k)=>(c(),h("div",{key:`url-${k}`,class:"mb-3"},[t(y,{modelValue:s.imageUrlInputs[k],"onUpdate:modelValue":g=>s.imageUrlInputs[k]=g,label:`Image URL ${k+1}`,variant:"outlined","prepend-inner-icon":"mdi-link",placeholder:"https://example.com/image.jpg"},{append:i(()=>[t(f,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:g=>l.$emit("remove-image-url",k)},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]),s.imageUrlInputs[k]?(c(),h("div",ct,[t(O,{src:u.resolveImageUrl(s.imageUrlInputs[k]),"max-height":"150",contain:"",class:"rounded elevation-1"},null,8,["src"])])):L("",!0)]))),128)),t(f,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:e[14]||(e[14]=r=>l.$emit("add-image-url"))},{default:i(()=>e[74]||(e[74]=[_("Add Image URL")])),_:1,__:[74]})]),_:1,__:[75,76,77]})]),_:1})]),_:1}),t(A,{value:"pricing"},{default:i(()=>[t(V,null,{default:i(()=>[t(w,{cols:"12",md:"6"},{default:i(()=>[t(y,{modelValue:a.localForm.price,"onUpdate:modelValue":[e[15]||(e[15]=r=>a.localForm.price=r),e[16]||(e[16]=r=>l.$emit("update:form",a.localForm))],modelModifiers:{number:!0},label:"Price",variant:"outlined",type:"number",step:"0.01","prepend-inner-icon":"mdi-currency-usd",hint:"Numeric price value"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12",md:"6"},{default:i(()=>[t(y,{modelValue:a.localForm.price_range,"onUpdate:modelValue":[e[17]||(e[17]=r=>a.localForm.price_range=r),e[18]||(e[18]=r=>l.$emit("update:form",a.localForm))],label:"Price Range",variant:"outlined",hint:"e.g., '$50 - $100' or 'Contact for Price'"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12"},{default:i(()=>[t(T,{modelValue:a.localForm.show_price,"onUpdate:modelValue":[e[19]||(e[19]=r=>a.localForm.show_price=r),e[20]||(e[20]=r=>l.$emit("update:form",a.localForm))],label:"Show Price on Website",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A,{value:"categories"},{default:i(()=>[t(V,null,{default:i(()=>[t(w,{cols:"12"},{default:i(()=>[e[78]||(e[78]=n("div",{class:"text-subtitle-1 font-weight-bold mb-2"},"Categories",-1)),t(B,{modelValue:a.localForm.category_ids,"onUpdate:modelValue":[e[21]||(e[21]=r=>a.localForm.category_ids=r),e[22]||(e[22]=r=>l.$emit("update:form",a.localForm))],items:s.availableCategories,"item-title":"name","item-value":"id",label:"Select Categories",variant:"outlined",multiple:"",chips:"",loading:s.loadingCategories},null,8,["modelValue","items","loading"])]),_:1,__:[78]}),t(w,{cols:"12"},{default:i(()=>[e[79]||(e[79]=n("div",{class:"text-subtitle-1 font-weight-bold mb-2"},"Tags",-1)),t(G,{modelValue:a.localForm.tag_names,"onUpdate:modelValue":[e[23]||(e[23]=r=>a.localForm.tag_names=r),e[24]||(e[24]=r=>l.$emit("update:form",a.localForm))],items:s.availableTags,label:"Tags",variant:"outlined",multiple:"",chips:"","closable-chips":"",hint:"Type to add new tags"},null,8,["modelValue","items"])]),_:1,__:[79]})]),_:1})]),_:1}),t(A,{value:"specs"},{default:i(()=>[e[81]||(e[81]=n("div",{class:"text-subtitle-1 font-weight-bold mb-4"},"Technical Specifications",-1)),(c(!0),h(I,null,U(s.specificationsList,(r,k)=>(c(),h("div",{key:k,class:"mb-3"},[t(V,null,{default:i(()=>[t(w,{cols:"12",md:"5"},{default:i(()=>[t(y,{modelValue:r.key,"onUpdate:modelValue":[g=>r.key=g,e[25]||(e[25]=g=>l.$emit("update:specifications-list",s.specificationsList))],label:"Specification Name",variant:"outlined",placeholder:"e.g., Capacity, Input Voltage"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{cols:"12",md:"6"},{default:i(()=>[t(y,{modelValue:r.value,"onUpdate:modelValue":[g=>r.value=g,e[26]||(e[26]=g=>l.$emit("update:specifications-list",s.specificationsList))],label:"Value",variant:"outlined",placeholder:"e.g., 2000VA / 1800W"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{cols:"12",md:"1"},{default:i(()=>[t(f,{icon:"mdi-delete",color:"error",variant:"text",onClick:g=>l.$emit("remove-specification",k)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),t(f,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:e[27]||(e[27]=r=>l.$emit("add-specification"))},{default:i(()=>e[80]||(e[80]=[_("Add Specification")])),_:1,__:[80]})]),_:1,__:[81]}),t(A,{value:"features"},{default:i(()=>[e[83]||(e[83]=n("div",{class:"text-subtitle-1 font-weight-bold mb-4"},"Key Features",-1)),(c(!0),h(I,null,U(s.featuresList,(r,k)=>(c(),h("div",{key:k,class:"mb-3"},[t(y,{modelValue:s.featuresList[k],"onUpdate:modelValue":[g=>s.featuresList[k]=g,e[28]||(e[28]=g=>l.$emit("update:features-list",s.featuresList))],label:`Feature ${k+1}`,variant:"outlined"},{append:i(()=>[t(f,{icon:"mdi-delete",color:"error",variant:"text",onClick:g=>l.$emit("remove-feature",k)},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])]))),128)),t(f,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:e[29]||(e[29]=r=>l.$emit("add-feature"))},{default:i(()=>e[82]||(e[82]=[_("Add Feature")])),_:1,__:[82]})]),_:1,__:[83]}),t(A,{value:"downloads"},{default:i(()=>[e[89]||(e[89]=n("div",{class:"text-subtitle-1 font-weight-bold mb-4"},"Product Downloads",-1)),(c(!0),h(I,null,U(a.localDownloadsList,(r,k)=>(c(),h("div",{key:k,class:"mb-4 pa-4 border rounded"},[t(V,null,{default:i(()=>[t(w,{cols:"12",md:"4"},{default:i(()=>[t(y,{modelValue:r.title,"onUpdate:modelValue":[g=>r.title=g,u.updateDownloadsList],label:"Title",variant:"outlined",placeholder:"e.g., Product Datasheet"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{cols:"12",md:"3"},{default:i(()=>[t(B,{modelValue:r.type,"onUpdate:modelValue":[g=>r.type=g,u.updateDownloadsList],items:s.downloadTypes,label:"Type",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(w,{cols:"12",md:"3"},{default:i(()=>[t(y,{modelValue:r.size,"onUpdate:modelValue":[g=>r.size=g,u.updateDownloadsList],label:"Size",variant:"outlined",placeholder:"e.g., 1.2 MB",disabled:!!r.file},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),t(w,{cols:"12",md:"2"},{default:i(()=>[t(f,{icon:"mdi-delete",color:"error",variant:"text",onClick:g=>u.handleRemoveDownload(k)},null,8,["onClick"])]),_:2},1024),t(w,{cols:"12"},{default:i(()=>[e[86]||(e[86]=n("div",{class:"text-subtitle-2 font-weight-bold mb-2"},"Upload File",-1)),t(q,{modelValue:r.file,"onUpdate:modelValue":[g=>r.file=g,g=>u.handleDownloadFileChange(k,g)],label:r.file?"File Selected":"Select File to Upload",accept:".pdf,.zip,.doc,.docx,.xls,.xlsx","prepend-icon":"mdi-file-upload",variant:"outlined","show-size":"",clearable:"",hint:"PDF, ZIP, DOC, DOCX, XLS, XLSX files (max 10MB)"},null,8,["modelValue","onUpdate:modelValue","label"]),r.file?(c(),h("div",ft,[t(p,{class:"elevation-1 pa-2"},{default:i(()=>[n("div",pt,[t(m,{icon:"mdi-file",color:"primary",class:"mr-2"}),n("div",gt,[n("div",vt,b(r.file.name),1),n("div",ht,[_(b(u.getDownloadFileSize(r))+" ",1),r.uploading?(c(),h("span",yt,[t(D,{indeterminate:"",size:"16",color:"primary"}),e[84]||(e[84]=_(" Uploading... "))])):r.uploaded?(c(),h("span",_t,[t(m,{icon:"mdi-check-circle",size:"small"}),e[85]||(e[85]=_(" Uploaded "))])):L("",!0)])]),t(f,{icon:"mdi-close",size:"small",variant:"text",color:"error",onClick:g=>u.handleClearDownloadFile(k)},null,8,["onClick"])])]),_:2},1024)])):L("",!0),t(S,{class:"my-3"}),e[87]||(e[87]=n("div",{class:"text-subtitle-2 text-medium-emphasis mb-2"},"Or Enter File URL ",-1)),t(y,{modelValue:r.url,"onUpdate:modelValue":[g=>r.url=g,u.updateDownloadsList],label:"File URL",variant:"outlined",placeholder:"https://...",disabled:!!r.file},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2,__:[86,87]},1024)]),_:2},1024)]))),128)),t(f,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:e[30]||(e[30]=r=>l.$emit("add-download"))},{default:i(()=>e[88]||(e[88]=[_("Add Download")])),_:1,__:[88]})]),_:1,__:[89]}),t(A,{value:"faq"},{default:i(()=>[e[92]||(e[92]=n("div",{class:"text-subtitle-1 font-weight-bold mb-4"},"Frequently Asked Questions",-1)),(c(!0),h(I,null,U(s.faqsList,(r,k)=>(c(),h("div",{key:k,class:"mb-4 pa-4 border rounded"},[t(V,null,{default:i(()=>[t(w,{cols:"12"},{default:i(()=>[t(y,{modelValue:r.question,"onUpdate:modelValue":[g=>r.question=g,e[31]||(e[31]=g=>l.$emit("update:faqs-list",s.faqsList))],label:"Question",variant:"outlined",placeholder:"What is the warranty period?"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{cols:"12"},{default:i(()=>[t(x,{modelValue:r.answer,"onUpdate:modelValue":[g=>r.answer=g,e[32]||(e[32]=g=>l.$emit("update:faqs-list",s.faqsList))],label:"Answer",variant:"outlined",rows:"3",placeholder:"This product comes with..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{cols:"12"},{default:i(()=>[t(f,{color:"error",variant:"outlined","prepend-icon":"mdi-delete",onClick:g=>l.$emit("remove-faq",k)},{default:i(()=>e[90]||(e[90]=[_("Remove FAQ")])),_:2,__:[90]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),t(f,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:e[33]||(e[33]=r=>l.$emit("add-faq"))},{default:i(()=>e[91]||(e[91]=[_("Add FAQ")])),_:1,__:[91]})]),_:1,__:[92]}),t(A,{value:"warranty"},{default:i(()=>[t(V,null,{default:i(()=>[t(w,{cols:"12"},{default:i(()=>[t(y,{modelValue:s.warrantyInfo.period,"onUpdate:modelValue":[e[34]||(e[34]=r=>s.warrantyInfo.period=r),e[35]||(e[35]=r=>l.$emit("update:warranty-info",s.warrantyInfo))],label:"Warranty Period",variant:"outlined",placeholder:"e.g., 2 Years"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12"},{default:i(()=>[e[94]||(e[94]=n("div",{class:"text-subtitle-2 font-weight-bold mb-2"},"What's Covered",-1)),(c(!0),h(I,null,U(s.warrantyInfo.coverage,(r,k)=>(c(),h("div",{key:k,class:"mb-2"},[t(y,{modelValue:s.warrantyInfo.coverage[k],"onUpdate:modelValue":[g=>s.warrantyInfo.coverage[k]=g,e[36]||(e[36]=g=>l.$emit("update:warranty-info",s.warrantyInfo))],variant:"outlined",label:`Coverage Item ${k+1}`},{append:i(()=>[t(f,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:g=>l.$emit("remove-coverage-item",k)},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])]))),128)),t(f,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:e[37]||(e[37]=r=>l.$emit("add-coverage-item"))},{default:i(()=>e[93]||(e[93]=[_("Add Coverage Item")])),_:1,__:[93]})]),_:1,__:[94]}),t(w,{cols:"12"},{default:i(()=>[t(x,{modelValue:s.warrantyInfo.terms,"onUpdate:modelValue":[e[38]||(e[38]=r=>s.warrantyInfo.terms=r),e[39]||(e[39]=r=>l.$emit("update:warranty-info",s.warrantyInfo))],label:"Terms & Conditions",variant:"outlined",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A,{value:"seo"},{default:i(()=>[t(V,null,{default:i(()=>[t(w,{cols:"12"},{default:i(()=>[t(y,{modelValue:a.localForm.meta_title,"onUpdate:modelValue":[e[40]||(e[40]=r=>a.localForm.meta_title=r),e[41]||(e[41]=r=>l.$emit("update:form",a.localForm))],label:"Meta Title",variant:"outlined",hint:"SEO title (50-60 characters recommended)"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12"},{default:i(()=>[t(x,{modelValue:a.localForm.meta_description,"onUpdate:modelValue":[e[42]||(e[42]=r=>a.localForm.meta_description=r),e[43]||(e[43]=r=>l.$emit("update:form",a.localForm))],label:"Meta Description",variant:"outlined",rows:"3",hint:"SEO description (150-160 characters recommended)"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12"},{default:i(()=>[t(y,{modelValue:a.localForm.meta_keywords,"onUpdate:modelValue":[e[44]||(e[44]=r=>a.localForm.meta_keywords=r),e[45]||(e[45]=r=>l.$emit("update:form",a.localForm))],label:"Meta Keywords",variant:"outlined",hint:"Comma-separated keywords"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12"},{default:i(()=>[t(y,{modelValue:a.localForm.og_image,"onUpdate:modelValue":[e[46]||(e[46]=r=>a.localForm.og_image=r),e[47]||(e[47]=r=>l.$emit("update:form",a.localForm))],label:"Open Graph Image URL",variant:"outlined",hint:"Image for social media sharing"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A,{value:"settings"},{default:i(()=>[t(V,null,{default:i(()=>[t(w,{cols:"12",md:"6"},{default:i(()=>[t(T,{modelValue:a.localForm.published,"onUpdate:modelValue":[e[48]||(e[48]=r=>a.localForm.published=r),e[49]||(e[49]=r=>l.$emit("update:form",a.localForm))],label:"Published",color:"success"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12",md:"6"},{default:i(()=>[t(T,{modelValue:a.localForm.featured,"onUpdate:modelValue":[e[50]||(e[50]=r=>a.localForm.featured=r),e[51]||(e[51]=r=>l.$emit("update:form",a.localForm))],label:"Featured Product",color:"amber"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12",md:"6"},{default:i(()=>[t(y,{modelValue:a.localForm.stock,"onUpdate:modelValue":[e[52]||(e[52]=r=>a.localForm.stock=r),e[53]||(e[53]=r=>l.$emit("update:form",a.localForm))],modelModifiers:{number:!0},label:"Stock Quantity",variant:"outlined",type:"number"},null,8,["modelValue"])]),_:1}),t(w,{cols:"12",md:"6"},{default:i(()=>[t(y,{modelValue:a.localForm.order,"onUpdate:modelValue":[e[54]||(e[54]=r=>a.localForm.order=r),e[55]||(e[55]=r=>l.$emit("update:form",a.localForm))],modelModifiers:{number:!0},label:"Display Order",variant:"outlined",type:"number",hint:"Lower numbers appear first"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))]),_:1}),s.loading?L("",!0):(c(),P(N,{key:0,class:"pa-4 bg-grey-lighten-4"},{default:i(()=>[t(j),t(f,{variant:"text",onClick:u.close,disabled:s.saving},{default:i(()=>e[95]||(e[95]=[_("Cancel")])),_:1,__:[95]},8,["onClick","disabled"]),t(f,{color:"primary",variant:"flat",onClick:e[57]||(e[57]=r=>l.$emit("save")),loading:s.saving,disabled:s.loading},{default:i(()=>[_(b(s.editingProduct?"Update":"Create")+" Product ",1)]),_:1},8,["loading","disabled"])]),_:1}))]),_:1})]),_:1},8,["model-value"])}const wt=W(Xe,[["render",bt],["__scopeId","data-v-34e05fa7"]]),Ft={components:{ProductDetailsDialog:Ne,ProductFormDialog:wt},mixins:[Y],data(){return{products:[],showDialog:!1,showDetailsDialog:!1,formTab:"basic",detailsTab:"basic",editingProduct:null,productDetails:null,saving:!1,loadingProduct:!1,loadingProductDetails:!1,publishedFilter:null,featuredFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}],featuredOptions:[{title:"Featured",value:!0},{title:"Not Featured",value:!1}],form:{title:"",slug:"",sku:"",short_description:"",description:"",thumbnail:"",images:[],price:null,price_range:"",show_price:!0,category_ids:[],tag_names:[],specifications:{},key_features:[],downloads:[],published:!1,featured:!1,stock:null,order:0,meta_title:"",meta_description:"",meta_keywords:"",og_image:""},availableCategories:[],availableTags:[],loadingCategories:!1,specificationsList:[],featuresList:[],downloadsList:[],faqsList:[],warrantyInfo:{period:"2 Years",coverage:[],terms:""},downloadTypes:["PDF","ZIP","DOC","DOCX","XLS","XLSX","Other"],detailsSpecificationsList:[],detailsFeaturesList:[],detailsDownloadsList:[],detailsFaqsList:[],detailsWarrantyInfo:{period:"2 Years",coverage:[],terms:""},thumbnailFile:null,galleryFiles:[],uploadingThumbnail:!1,uploadingGallery:!1,thumbnailPreview:null,galleryPreviews:[],imageUrlInputs:[]}},async mounted(){await Promise.all([this.loadProducts(),this.loadCategories(),this.loadTags()])},methods:{async loadProducts(){try{this.loading=!0;const l=this.buildPaginationParams();this.search&&(l.search=this.search),this.publishedFilter!==null&&(l.published=this.publishedFilter),this.featuredFilter!==null&&(l.featured=this.featuredFilter);const e=await z.get("/api/v1/products",{params:l,headers:this.getAuthHeaders()}),s=e.data.data||[];this.products=s.map(d=>({...d,thumbnail:this.resolveImageUrl(d.thumbnail)})),this.updatePagination(e.data)}catch(l){this.handleApiError(l,"Failed to load products")}finally{this.loading=!1}},async loadCategories(){var l;try{this.loadingCategories=!0;let e=await z.get("/api/v1/categories?type=product",{headers:this.getAuthHeaders()}).catch(()=>null);if(e||(e=await z.get("/api/v1/categories",{headers:this.getAuthHeaders()}).catch(()=>null)),e&&e.data){const s=((l=e.data)==null?void 0:l.data)||e.data||[];this.availableCategories=Array.isArray(s)?s.filter(d=>!d.type||d.type==="product"):[]}else this.availableCategories=[]}catch(e){console.error("Error loading categories:",e),this.availableCategories=[]}finally{this.loadingCategories=!1}},async loadTags(){var l;try{let e=await z.get("/api/v1/tags?type=product",{headers:this.getAuthHeaders()}).catch(()=>null);if(e||(e=await z.get("/api/v1/tags",{headers:this.getAuthHeaders()}).catch(()=>null)),e&&e.data){const s=((l=e.data)==null?void 0:l.data)||e.data||[],d=Array.isArray(s)?s.filter(a=>!a.type||a.type==="product"):[];this.availableTags=d.map(a=>a.name||a)}else this.availableTags=[]}catch(e){console.error("Error loading tags:",e),this.availableTags=[]}},async openDialog(l=null){if(this.editingProduct=l,this.showDialog=!0,l)try{await this.loadProductForEdit(l)}catch(e){console.error("Error loading product for edit:",e)}else this.resetForm()},async loadProductForEdit(l){var e,s,d,a,u,f,F,D;this.loadingProduct=!0;try{const m=await z.get(`/api/v1/products/${l.id}`,{headers:this.getAuthHeaders()}),o=((e=m.data)==null?void 0:e.data)||m.data;if(!o)throw new Error("No product data received from server");console.log("Loaded product data:",o);const C=this.normalizeImageInput(o.thumbnail||""),S=Array.isArray(o.images)?o.images.map(y=>this.normalizeImageInput(y)):[];this.form={title:o.title||"",slug:o.slug||"",sku:o.sku||"",short_description:o.short_description||"",description:o.description||"",thumbnail:C,images:S,price:o.price||null,price_range:o.price_range||"",show_price:o.show_price!==!1,category_ids:(o.categories||[]).map(y=>y.id),tag_names:(o.tags||[]).map(y=>y.name),published:o.published||!1,featured:o.featured||!1,stock:o.stock||null,order:o.order||0,meta_title:o.meta_title||"",meta_description:o.meta_description||"",meta_keywords:o.meta_keywords||"",og_image:o.og_image||""},this.imageUrlInputs=[],this.specificationsList=[],o.specifications&&typeof o.specifications=="object"&&Object.keys(o.specifications).forEach(y=>{!y.startsWith("_")&&!/^\d+$/.test(String(y))&&this.specificationsList.push({key:y,value:o.specifications[y]})}),o.key_features&&Array.isArray(o.key_features)?this.featuresList=[...o.key_features]:(s=o.specifications)!=null&&s._key_features&&Array.isArray(o.specifications._key_features)?this.featuresList=[...o.specifications._key_features]:this.featuresList=[],this.downloadsList=Array.isArray(o.downloads)?[...o.downloads]:[],o.faqs&&Array.isArray(o.faqs)?this.faqsList=[...o.faqs]:(d=o.specifications)!=null&&d._faqs&&Array.isArray(o.specifications._faqs)?this.faqsList=[...o.specifications._faqs]:this.faqsList=[],o.warranty_info&&typeof o.warranty_info=="object"?this.warrantyInfo={period:o.warranty_info.period||"2 Years",coverage:Array.isArray(o.warranty_info.coverage)?[...o.warranty_info.coverage]:[],terms:o.warranty_info.terms||""}:(a=o.specifications)!=null&&a._warranty_info&&typeof o.specifications._warranty_info=="object"?this.warrantyInfo={period:o.specifications._warranty_info.period||"2 Years",coverage:Array.isArray(o.specifications._warranty_info.coverage)?[...o.specifications._warranty_info.coverage]:[],terms:o.specifications._warranty_info.terms||""}:this.warrantyInfo={period:"2 Years",coverage:[],terms:""},this.formTab="basic"}catch(m){console.error("Error loading product:",m);const o=((f=(u=m.response)==null?void 0:u.data)==null?void 0:f.message)||((D=(F=m.response)==null?void 0:F.data)==null?void 0:D.error)||"Failed to load product data";throw this.showError(o),this.closeDialog(),m}finally{this.loadingProduct=!1}},resetForm(){this.form={title:"",slug:"",sku:"",short_description:"",description:"",thumbnail:"",images:[],price:null,price_range:"",show_price:!0,category_ids:[],tag_names:[],published:!1,featured:!1,stock:null,order:0,meta_title:"",meta_description:"",meta_keywords:"",og_image:""},this.specificationsList=[],this.featuresList=[],this.downloadsList.forEach(l=>{l.file&&(l.file=null,l.uploading=!1,l.uploaded=!1)}),this.downloadsList=[],this.faqsList=[],this.warrantyInfo={period:"2 Years",coverage:[],terms:""},this.thumbnailFile=null,this.thumbnailPreview=null,this.galleryFiles=[],this.galleryPreviews=[],this.imageUrlInputs=[],this.formTab="basic"},generateSlug(){this.form.title&&(this.form.slug=this.form.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))},addImageUrl(){this.imageUrlInputs.push("")},removeImageUrl(l){this.imageUrlInputs.splice(l,1)},removeImage(l){this.form.images.splice(l,1)},previewThumbnail(l){if(!l){this.thumbnailPreview=null;return}const e=Array.isArray(l)?l[0]:l;if(!e){this.thumbnailPreview=null;return}const s=new FileReader;s.onload=d=>{this.thumbnailPreview=d.target.result},s.readAsDataURL(e)},previewGalleryImages(l){if(!l){this.galleryPreviews=[],this.galleryFiles=[];return}const e=Array.isArray(l)?l:[l];if(e.length===0){this.galleryPreviews=[],this.galleryFiles=[];return}this.galleryFiles=e.filter(d=>d);const s=e.map(d=>d?new Promise(a=>{const u=new FileReader;u.onload=f=>{a({url:f.target.result,name:d.name,size:d.size,file:d})},u.onerror=()=>a(null),u.readAsDataURL(d)}):Promise.resolve(null));Promise.all(s).then(d=>{this.galleryPreviews=d.filter(a=>a!==null)})},removeGalleryPreview(l){this.galleryPreviews.splice(l,1),Array.isArray(this.galleryFiles)&&this.galleryFiles.length>l&&this.galleryFiles.splice(l,1),this.galleryPreviews.length===0&&(this.galleryFiles=[])},formatFileSize(l){if(!l)return"0 Bytes";const e=1024,s=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(l)/Math.log(e));return Math.round(l/Math.pow(e,d)*100)/100+" "+s[d]},async uploadThumbnailFile(){var e,s,d,a;if(!this.thumbnailFile)return null;const l=Array.isArray(this.thumbnailFile)?this.thumbnailFile[0]:this.thumbnailFile;if(!l)return null;this.uploadingThumbnail=!0;try{const u=new FormData;u.append("image",l),u.append("folder","products"),this.form.title&&u.append("prefix",this.form.title);const f=await z.post("/api/v1/upload/image",u,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(f.data.success)return this.normalizeImageInput(f.data.path||f.data.url);throw new Error(f.data.message||"Failed to upload thumbnail")}catch(u){console.error("Error uploading thumbnail:",u);const f=((s=(e=u.response)==null?void 0:e.data)==null?void 0:s.message)||((a=(d=u.response)==null?void 0:d.data)==null?void 0:a.error)||"Failed to upload thumbnail";throw new Error(f)}finally{this.uploadingThumbnail=!1}},async uploadGalleryFiles(){var e,s,d,a;if(!this.galleryPreviews||this.galleryPreviews.length===0)return[];const l=[];this.uploadingGallery=!0;try{const u=this.galleryPreviews.filter(D=>D.file).map(D=>D.file);if(u.length===0)return[];const f=new FormData;u.forEach(D=>{f.append("images[]",D)}),f.append("folder","products"),this.form.title&&f.append("prefix",this.form.title);const F=await z.post("/api/v1/upload/images",f,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(F.data.success&&F.data.images&&F.data.images.length>0){const D=F.data.images.map(m=>this.normalizeImageInput(m.path||m.url));l.push(...D)}else throw new Error(F.data.message||"Failed to upload images");return l}catch(u){console.error("Error uploading gallery images:",u);const f=((s=(e=u.response)==null?void 0:e.data)==null?void 0:s.message)||((a=(d=u.response)==null?void 0:d.data)==null?void 0:a.error)||"Failed to upload images";throw new Error(f)}finally{this.uploadingGallery=!1}},addSpecification(){this.specificationsList.push({key:"",value:""})},removeSpecification(l){this.specificationsList.splice(l,1)},addFeature(){this.featuresList.push("")},removeFeature(l){this.featuresList.splice(l,1)},addDownload(){this.downloadsList.push({title:"",type:"PDF",size:"",url:"",file:null,uploading:!1,uploaded:!1})},removeDownload(l){this.downloadsList.splice(l,1)},handleDownloadFileChange(l){const e=this.downloadsList[l];if(e.file){const s=e.file.name.split(".").pop().toUpperCase();["PDF","ZIP","DOC","DOCX","XLS","XLSX"].includes(s)&&(e.type=s),e.size=this.formatFileSize(e.file.size)}},clearDownloadFile(l){const e=this.downloadsList[l];e.file=null,e.uploading=!1,e.uploaded=!1,e.url||(e.size="")},async uploadDownloadFile(l){var d,a,u,f;const e=this.downloadsList[l];if(!e.file)return null;const s=e.file.size||0;e.uploading=!0;try{const F=new FormData;F.append("file",e.file),F.append("folder","downloads"),this.form.title&&F.append("prefix",this.form.title);const D=await z.post("/api/v1/upload/file",F,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(D.data.success){const m=this.normalizeImageInput(D.data.path||D.data.url);e.url=m;const o=D.data.size||s;return e.size=this.formatFileSize(o),e.uploaded=!0,m}else throw new Error(D.data.message||"Failed to upload file")}catch(F){console.error("Error uploading download file:",F);const D=((a=(d=F.response)==null?void 0:d.data)==null?void 0:a.message)||((f=(u=F.response)==null?void 0:u.data)==null?void 0:f.error)||"Failed to upload file";throw new Error(D)}finally{e.uploading=!1}},addFAQ(){this.faqsList.push({question:"",answer:""})},removeFAQ(l){this.faqsList.splice(l,1)},addCoverageItem(){this.warrantyInfo.coverage.push("")},removeCoverageItem(l){this.warrantyInfo.coverage.splice(l,1)},async saveProduct(){var l,e,s,d;try{if(!this.form.title||!this.form.slug){this.showError("Title and Slug are required");return}this.saving=!0;let a=this.form.thumbnail;if(this.thumbnailFile)try{const m=await this.uploadThumbnailFile();m&&(a=m,this.form.thumbnail=a)}catch(m){this.showError(m.message||"Failed to upload thumbnail");return}let u=[...this.form.images.filter(m=>m).map(m=>this.normalizeImageInput(m))];if(this.galleryPreviews&&this.galleryPreviews.length>0)try{const m=await this.uploadGalleryFiles();u=[...u,...m]}catch(m){this.showError(m.message||"Failed to upload gallery images");return}const f=this.imageUrlInputs.filter(m=>m&&m.trim()).map(m=>this.normalizeImageInput(m.trim()));u=[...u,...f];for(let m=0;m<this.downloadsList.length;m++){const o=this.downloadsList[m];if(o.file&&!o.uploaded)try{await this.uploadDownloadFile(m)}catch(C){this.showError(`Failed to upload download file "${o.title||o.file.name}": ${C.message}`);return}}const F={};this.specificationsList.forEach(m=>{if(m.key&&m.value){const o=String(m.key);/^\d+$/.test(o)||(F[m.key]=m.value)}});const D={title:this.form.title,slug:this.form.slug,sku:this.form.sku||null,short_description:this.form.short_description||null,description:this.form.description||null,thumbnail:this.normalizeImageInput(a)||null,images:u.map(m=>this.normalizeImageInput(m)),price:this.form.price?parseFloat(this.form.price):null,price_range:this.form.price_range||null,show_price:this.form.show_price!==!1,specifications:Object.keys(F).length>0?F:null,downloads:this.downloadsList.filter(m=>m.title&&m.url).length>0?this.downloadsList.filter(m=>m.title&&m.url):null,key_features:this.featuresList.filter(m=>m).length>0?this.featuresList.filter(m=>m):null,faqs:this.faqsList.filter(m=>m.question&&m.answer).length>0?this.faqsList.filter(m=>m.question&&m.answer):null,warranty_info:this.warrantyInfo,meta_title:this.form.meta_title||null,meta_description:this.form.meta_description||null,meta_keywords:this.form.meta_keywords||null,og_image:this.normalizeImageInput(this.form.og_image)||null,published:this.form.published||!1,featured:this.form.featured||!1,stock:this.form.stock?parseInt(this.form.stock):null,order:this.form.order?parseInt(this.form.order):0,category_ids:this.form.category_ids||[],tag_names:this.form.tag_names||[]};if(this.editingProduct){const m=await z.put(`/api/v1/products/${this.editingProduct.id}`,D,{headers:this.getAuthHeaders()});this.showSuccess("Product updated successfully")}else{const m=await z.post("/api/v1/products",D,{headers:this.getAuthHeaders()});this.showSuccess("Product created successfully")}this.thumbnailFile=null,this.thumbnailPreview=null,this.galleryFiles=[],this.galleryPreviews=[],this.imageUrlInputs=[],this.closeDialog(),await this.loadProducts()}catch(a){console.error("Error saving product:",a);const u=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||((d=(s=a.response)==null?void 0:s.data)==null?void 0:d.error)||a.message||"Failed to save product";this.showError(u)}finally{this.saving=!1}},editProduct(l){this.openDialog(l)},async viewProduct(l){var e,s,d,a,u,f,F,D;this.showDetailsDialog=!0,this.loadingProductDetails=!0,this.detailsTab="basic";try{const m=await z.get(`/api/v1/products/${l.id}`,{headers:this.getAuthHeaders()}),o=((e=m.data)==null?void 0:e.data)||m.data;if(!o)throw new Error("No product data received");o.thumbnail&&(o.thumbnail=this.resolveImageUrl(o.thumbnail)),Array.isArray(o.images)&&(o.images=o.images.map(C=>this.resolveImageUrl(C))),o.og_image&&(o.og_image=this.resolveImageUrl(o.og_image)),this.productDetails=o,this.detailsSpecificationsList=[],o.specifications&&typeof o.specifications=="object"&&Object.keys(o.specifications).forEach(C=>{!C.startsWith("_")&&!/^\d+$/.test(String(C))&&this.detailsSpecificationsList.push({key:C,value:o.specifications[C]})}),o.key_features&&Array.isArray(o.key_features)?this.detailsFeaturesList=[...o.key_features]:(s=o.specifications)!=null&&s._key_features&&Array.isArray(o.specifications._key_features)?this.detailsFeaturesList=[...o.specifications._key_features]:this.detailsFeaturesList=[],this.detailsDownloadsList=Array.isArray(o.downloads)?[...o.downloads]:[],o.faqs&&Array.isArray(o.faqs)?this.detailsFaqsList=[...o.faqs]:(d=o.specifications)!=null&&d._faqs&&Array.isArray(o.specifications._faqs)?this.detailsFaqsList=[...o.specifications._faqs]:this.detailsFaqsList=[],o.warranty_info&&typeof o.warranty_info=="object"?this.detailsWarrantyInfo={period:o.warranty_info.period||"2 Years",coverage:Array.isArray(o.warranty_info.coverage)?[...o.warranty_info.coverage]:[],terms:o.warranty_info.terms||""}:(a=o.specifications)!=null&&a._warranty_info&&typeof o.specifications._warranty_info=="object"?this.detailsWarrantyInfo={period:o.specifications._warranty_info.period||"2 Years",coverage:Array.isArray(o.specifications._warranty_info.coverage)?[...o.specifications._warranty_info.coverage]:[],terms:o.specifications._warranty_info.terms||""}:this.detailsWarrantyInfo={period:"2 Years",coverage:[],terms:""}}catch(m){console.error("Error loading product details:",m);const o=((f=(u=m.response)==null?void 0:u.data)==null?void 0:f.message)||((D=(F=m.response)==null?void 0:F.data)==null?void 0:D.error)||"Failed to load product details";this.showError(o),this.closeDetailsDialog()}finally{this.loadingProductDetails=!1}},closeDetailsDialog(){this.showDetailsDialog=!1,this.productDetails=null,this.detailsTab="basic",this.detailsSpecificationsList=[],this.detailsFeaturesList=[],this.detailsDownloadsList=[],this.detailsFaqsList=[],this.detailsWarrantyInfo={period:"2 Years",coverage:[],terms:""}},async editProductFromDetails(){var l,e,s;if(this.productDetails){const d={...this.productDetails};this.closeDetailsDialog(),await this.$nextTick();const a=this.products.find(u=>u.id===d.id);if(a){this.editingProduct=a,this.showDialog=!0;try{this.loadingProduct=!0,await this.$nextTick();const u=this.normalizeImageInput(d.thumbnail||""),f=Array.isArray(d.images)?d.images.map(F=>this.normalizeImageInput(F)):[];this.form={title:d.title||"",slug:d.slug||"",sku:d.sku||"",short_description:d.short_description||"",description:d.description||"",thumbnail:u,images:f,price:d.price||null,price_range:d.price_range||"",show_price:d.show_price!==!1,category_ids:(d.categories||[]).map(F=>F.id),tag_names:(d.tags||[]).map(F=>F.name),published:d.published||!1,featured:d.featured||!1,stock:d.stock||null,order:d.order||0,meta_title:d.meta_title||"",meta_description:d.meta_description||"",meta_keywords:d.meta_keywords||"",og_image:d.og_image||""},this.imageUrlInputs=[],this.specificationsList=[],d.specifications&&typeof d.specifications=="object"&&Object.keys(d.specifications).forEach(F=>{!F.startsWith("_")&&!/^\d+$/.test(String(F))&&this.specificationsList.push({key:F,value:d.specifications[F]})}),d.key_features&&Array.isArray(d.key_features)?this.featuresList=[...d.key_features]:(l=d.specifications)!=null&&l._key_features&&Array.isArray(d.specifications._key_features)?this.featuresList=[...d.specifications._key_features]:this.featuresList=[],this.downloadsList=Array.isArray(d.downloads)?[...d.downloads]:[],d.faqs&&Array.isArray(d.faqs)?this.faqsList=[...d.faqs]:(e=d.specifications)!=null&&e._faqs&&Array.isArray(d.specifications._faqs)?this.faqsList=[...d.specifications._faqs]:this.faqsList=[],d.warranty_info&&typeof d.warranty_info=="object"?this.warrantyInfo={period:d.warranty_info.period||"2 Years",coverage:Array.isArray(d.warranty_info.coverage)?[...d.warranty_info.coverage]:[],terms:d.warranty_info.terms||""}:(s=d.specifications)!=null&&s._warranty_info&&typeof d.specifications._warranty_info=="object"?this.warrantyInfo={period:d.specifications._warranty_info.period||"2 Years",coverage:Array.isArray(d.specifications._warranty_info.coverage)?[...d.specifications._warranty_info.coverage]:[],terms:d.specifications._warranty_info.terms||""}:this.warrantyInfo={period:"2 Years",coverage:[],terms:""},this.formTab="basic"}catch(u){console.error("Error populating edit form:",u),this.showError("Failed to load product data for editing")}finally{this.loadingProduct=!1}}}},async deleteProduct(l){if(confirm("Are you sure you want to delete this product?"))try{await z.delete(`/api/v1/products/${l}`,{headers:this.getAuthHeaders()}),this.showSuccess("Product deleted successfully"),await this.loadProducts()}catch(e){this.handleApiError(e,"Error deleting product")}},closeDialog(){this.loadingProduct||this.saving||(this.showDialog=!1,this.editingProduct=null,this.loadingProduct=!1,this.thumbnailFile=null,this.thumbnailPreview=null,this.galleryFiles=[],this.galleryPreviews=[],this.resetForm())},onPerPageChange(){this.resetPagination(),this.loadProducts()},onSort(l){this.handleSort(l),this.loadProducts()},normalizeImageInput(l){return K(l)},resolveImageUrl(l){return Q(l)}}},kt={class:"page-header"},Dt={class:"text-caption text-grey"},Pt={key:0},xt={class:"d-flex align-center"},Vt={class:"d-flex align-center"},Lt={class:"d-flex align-center"},It={class:"d-flex align-center"},Ut={class:"font-weight-medium"},Ct={class:"d-flex flex-wrap gap-1"},At={key:0,class:"text-caption text-grey"},Tt={key:0},zt={class:"d-flex justify-space-between align-center mt-4"},St={class:"text-caption text-grey"},qt={key:0},Et={key:1};function Mt(l,e,s,d,a,u){const f=v("v-btn"),F=v("v-select"),D=v("v-col"),m=v("v-text-field"),o=v("v-row"),C=v("v-card-text"),S=v("v-card"),y=v("v-card-title"),w=v("v-icon"),x=v("v-img"),R=v("v-avatar"),V=v("v-chip"),A=v("v-table"),q=v("v-pagination"),O=v("ProductDetailsDialog"),M=v("ProductFormDialog");return c(),h("div",null,[n("div",kt,[e[25]||(e[25]=n("h1",{class:"text-h4 page-title"},"Products Management",-1)),t(f,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=p=>u.openDialog()),class:"add-button"},{default:i(()=>e[24]||(e[24]=[_("Create Product")])),_:1,__:[24]})]),t(S,{class:"mb-4"},{default:i(()=>[t(C,null,{default:i(()=>[t(o,null,{default:i(()=>[t(D,{cols:"12",md:"3"},{default:i(()=>[t(F,{modelValue:l.perPage,"onUpdate:modelValue":[e[1]||(e[1]=p=>l.perPage=p),u.onPerPageChange],items:l.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(D,{cols:"12",md:"3"},{default:i(()=>[t(F,{modelValue:a.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=p=>a.publishedFilter=p),u.loadProducts],items:a.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(D,{cols:"12",md:"3"},{default:i(()=>[t(F,{modelValue:a.featuredFilter,"onUpdate:modelValue":[e[3]||(e[3]=p=>a.featuredFilter=p),u.loadProducts],items:a.featuredOptions,label:"Filter by Featured","prepend-inner-icon":"mdi-star",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(D,{cols:"12",md:"3"},{default:i(()=>[t(m,{modelValue:l.search,"onUpdate:modelValue":[e[4]||(e[4]=p=>l.search=p),u.loadProducts],label:"Search products","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(S,null,{default:i(()=>[t(y,{class:"d-flex justify-space-between align-center"},{default:i(()=>[e[27]||(e[27]=n("span",null,"Products",-1)),n("span",Dt,[e[26]||(e[26]=_(" Total Records: ")),n("strong",null,b(l.pagination.total||0),1),a.products.length>0?(c(),h("span",Pt," | Showing "+b((l.currentPage-1)*l.perPage+1)+" to "+b(Math.min(l.currentPage*l.perPage,l.pagination.total))+" of "+b(l.pagination.total),1)):L("",!0)])]),_:1,__:[27]}),t(C,null,{default:i(()=>[t(A,null,{default:i(()=>[n("thead",null,[n("tr",null,[e[32]||(e[32]=n("th",null,"Image",-1)),n("th",{class:"sortable",onClick:e[5]||(e[5]=p=>u.onSort("title"))},[n("div",xt,[e[28]||(e[28]=_(" Title ")),t(w,{icon:l.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),n("th",{class:"sortable",onClick:e[6]||(e[6]=p=>u.onSort("sku"))},[n("div",Vt,[e[29]||(e[29]=_(" SKU ")),t(w,{icon:l.getSortIcon("sku"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[33]||(e[33]=n("th",null,"Categories",-1)),n("th",{class:"sortable",onClick:e[7]||(e[7]=p=>u.onSort("price"))},[n("div",Lt,[e[30]||(e[30]=_(" Price ")),t(w,{icon:l.getSortIcon("price"),size:"small",class:"ml-1"},null,8,["icon"])])]),n("th",{class:"sortable",onClick:e[8]||(e[8]=p=>u.onSort("published"))},[n("div",It,[e[31]||(e[31]=_(" Status ")),t(w,{icon:l.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[34]||(e[34]=n("th",null,"Actions",-1))])]),n("tbody",null,[(c(!0),h(I,null,U(a.products,p=>(c(),h("tr",{key:p.id},[n("td",null,[p.thumbnail?(c(),P(R,{key:0,size:"40"},{default:i(()=>[t(x,{src:u.resolveImageUrl(p.thumbnail),cover:""},null,8,["src"])]),_:2},1024)):(c(),P(R,{key:1,size:"40",color:"grey-lighten-2"},{default:i(()=>[t(w,{icon:"mdi-package-variant"})]),_:1}))]),n("td",null,[n("div",Ut,b(p.title),1),p.featured?(c(),P(V,{key:0,color:"amber",size:"x-small",class:"mt-1"},{default:i(()=>e[35]||(e[35]=[_("Featured")])),_:1,__:[35]})):L("",!0)]),n("td",null,[t(V,{size:"small",variant:"outlined"},{default:i(()=>[_(b(p.sku||"-"),1)]),_:2},1024)]),n("td",null,[n("div",Ct,[(c(!0),h(I,null,U(p.categories||[],T=>(c(),P(V,{key:T.id,size:"x-small",color:"primary",variant:"tonal"},{default:i(()=>[_(b(T.name),1)]),_:2},1024))),128)),!p.categories||p.categories.length===0?(c(),h("span",At,"-")):L("",!0)])]),n("td",null,b(p.price?"$"+p.price:p.price_range||"-"),1),n("td",null,[t(V,{color:p.published?"success":"error",size:"small"},{default:i(()=>[_(b(p.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),n("td",null,[t(f,{size:"small",icon:"mdi-eye",onClick:T=>u.viewProduct(p),variant:"text",color:"info",class:"mr-1"},null,8,["onClick"]),t(f,{size:"small",icon:"mdi-pencil",onClick:T=>u.editProduct(p),variant:"text",color:"primary",class:"mr-1"},null,8,["onClick"]),t(f,{size:"small",icon:"mdi-delete",onClick:T=>u.deleteProduct(p.id),variant:"text",color:"error"},null,8,["onClick"])])]))),128)),a.products.length===0?(c(),h("tr",Tt,e[36]||(e[36]=[n("td",{colspan:"7",class:"text-center py-4"},"No products found",-1)]))):L("",!0)])]),_:1}),n("div",zt,[n("div",St,[a.products.length>0?(c(),h("span",qt," Showing "+b((l.currentPage-1)*l.perPage+1)+" to "+b(Math.min(l.currentPage*l.perPage,l.pagination.total))+" of "+b(l.pagination.total)+" records ",1)):(c(),h("span",Et,"No records found"))]),l.pagination.last_page>1?(c(),P(q,{key:0,modelValue:l.currentPage,"onUpdate:modelValue":[e[9]||(e[9]=p=>l.currentPage=p),u.loadProducts],length:l.pagination.last_page},null,8,["modelValue","length","onUpdate:modelValue"])):L("",!0)])]),_:1})]),_:1}),t(O,{modelValue:a.showDetailsDialog,"onUpdate:modelValue":e[10]||(e[10]=p=>a.showDetailsDialog=p),"product-details":a.productDetails,loading:a.loadingProductDetails,"specifications-list":a.detailsSpecificationsList,"features-list":a.detailsFeaturesList,"downloads-list":a.detailsDownloadsList,"faqs-list":a.detailsFaqsList,"warranty-info":a.detailsWarrantyInfo,onEdit:u.editProductFromDetails},null,8,["modelValue","product-details","loading","specifications-list","features-list","downloads-list","faqs-list","warranty-info","onEdit"]),t(M,{modelValue:a.showDialog,"onUpdate:modelValue":e[11]||(e[11]=p=>a.showDialog=p),"editing-product":a.editingProduct,loading:a.loadingProduct,saving:a.saving,form:a.form,"form-tab":a.formTab,"available-categories":a.availableCategories,"available-tags":a.availableTags,"loading-categories":a.loadingCategories,"specifications-list":a.specificationsList,"features-list":a.featuresList,"downloads-list":a.downloadsList,"faqs-list":a.faqsList,"warranty-info":a.warrantyInfo,"download-types":a.downloadTypes,"thumbnail-file":a.thumbnailFile,"gallery-files":a.galleryFiles,"thumbnail-preview":a.thumbnailPreview,"gallery-previews":a.galleryPreviews,"image-url-inputs":a.imageUrlInputs,"onUpdate:form":e[12]||(e[12]=p=>a.form=p),"onUpdate:formTab":e[13]||(e[13]=p=>a.formTab=p),"onUpdate:specificationsList":e[14]||(e[14]=p=>a.specificationsList=p),"onUpdate:featuresList":e[15]||(e[15]=p=>a.featuresList=p),"onUpdate:downloadsList":e[16]||(e[16]=p=>a.downloadsList=p),"onUpdate:faqsList":e[17]||(e[17]=p=>a.faqsList=p),"onUpdate:warrantyInfo":e[18]||(e[18]=p=>a.warrantyInfo=p),"onUpdate:thumbnailFile":e[19]||(e[19]=p=>a.thumbnailFile=p),"onUpdate:galleryFiles":e[20]||(e[20]=p=>a.galleryFiles=p),"onUpdate:thumbnailPreview":e[21]||(e[21]=p=>a.thumbnailPreview=p),"onUpdate:galleryPreviews":e[22]||(e[22]=p=>a.galleryPreviews=p),"onUpdate:imageUrlInputs":e[23]||(e[23]=p=>a.imageUrlInputs=p),onClose:u.closeDialog,onSave:u.saveProduct,onGenerateSlug:u.generateSlug,onAddImageUrl:u.addImageUrl,onRemoveImageUrl:u.removeImageUrl,onRemoveImage:u.removeImage,onPreviewThumbnail:u.previewThumbnail,onPreviewGalleryImages:u.previewGalleryImages,onRemoveGalleryPreview:u.removeGalleryPreview,onAddSpecification:u.addSpecification,onRemoveSpecification:u.removeSpecification,onAddFeature:u.addFeature,onRemoveFeature:u.removeFeature,onAddDownload:u.addDownload,onRemoveDownload:u.removeDownload,onHandleDownloadFileChange:u.handleDownloadFileChange,onClearDownloadFile:u.clearDownloadFile,onAddFaq:u.addFAQ,onRemoveFaq:u.removeFAQ,onAddCoverageItem:u.addCoverageItem,onRemoveCoverageItem:u.removeCoverageItem},null,8,["modelValue","editing-product","loading","saving","form","form-tab","available-categories","available-tags","loading-categories","specifications-list","features-list","downloads-list","faqs-list","warranty-info","download-types","thumbnail-file","gallery-files","thumbnail-preview","gallery-previews","image-url-inputs","onClose","onSave","onGenerateSlug","onAddImageUrl","onRemoveImageUrl","onRemoveImage","onPreviewThumbnail","onPreviewGalleryImages","onRemoveGalleryPreview","onAddSpecification","onRemoveSpecification","onAddFeature","onRemoveFeature","onAddDownload","onRemoveDownload","onHandleDownloadFileChange","onClearDownloadFile","onAddFaq","onRemoveFaq","onAddCoverageItem","onRemoveCoverageItem"])])}const jt=W(Ft,[["render",Mt],["__scopeId","data-v-bbbaebbb"]]);export{jt as default};
