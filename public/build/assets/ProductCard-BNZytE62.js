import{_ as O,p as J,q as n,c as V,w as u,b as s,a as r,h as g,r as p,f as S,n as L,m as b,i as A,d as m,t as c,F as R,e as G,x as D,o as l}from"./app-DJIffI4A.js";import{S as K}from"./ShareDialog-Cs9-QYLz.js";import{r as Q}from"./uploads-CnEkgyD_.js";import{f as W,a as I}from"./formatters-DOdYL610.js";const X={class:"product-image-container position-relative bg-grey-lighten-4",style:{height:"240px",overflow:"hidden"}},Y={class:"actions-overlay d-flex align-center justify-center gap-2"},Z={class:"pa-5"},H={class:"d-flex justify-space-between align-start mb-2"},tt={class:"text-caption font-weight-bold text-primary text-uppercase tracking-wide"},et={key:0,class:"d-flex align-center"},ot={class:"text-caption font-weight-bold"},at={class:"text-h6 font-weight-bold text-grey-darken-4 mb-2 lh-tight",style:{"min-height":"48px"}},rt={class:"text-body-2 text-medium-emphasis mb-4 line-clamp-2",style:{"min-height":"40px"}},st={key:0,class:"specs-preview my-4 py-3 border-top border-bottom border-dashed"},it={class:"d-flex flex-wrap gap-3"},ct={class:"spec-label"},lt={class:"spec-value"},nt={class:"d-flex align-center justify-space-between mt-4"},dt={key:0},ut={key:0,class:"text-caption text-medium-emphasis text-decoration-line-through mr-2"},pt={class:"text-h6 font-weight-black text-primary"},mt={key:1,class:"text-h6 font-weight-bold text-primary"},ht={__name:"ProductCard",props:{product:{type:Object,required:!0},comparisonDisabled:{type:Boolean,default:!1}},emits:["toggle-comparison"],setup(a){const e=a,h=J(!1),y=t=>!t||typeof t!="string"?null:Q(t),N=t=>{if(!t)return null;if(Array.isArray(t))return t.length>0?t[0]:null;if(typeof t=="string")try{const o=JSON.parse(t);if(Array.isArray(o)&&o.length>0)return o[0]}catch{return t}return null},w=n(()=>{var o,d;let t=null;if((o=e.product)!=null&&o.thumbnail&&(t=y(e.product.thumbnail)),!t&&((d=e.product)!=null&&d.images)){const v=N(e.product.images);v&&(t=y(v))}return t||"/assets/img/default.jpg"}),j=n(()=>w.value==="/assets/img/default.jpg"),B=n(()=>e.product.categories&&e.product.categories.length>0?e.product.categories[0].name:"Uncategorized"),T=n(()=>e.product.price!==null&&e.product.price!==void 0&&e.product.price!==""||!!e.product.price_range),_=n(()=>W(e.product,"Contact for Price")),k=n(()=>{const t=[];return e.product.specifications&&(e.product.specifications.capacity&&t.push({label:"Capacity",value:e.product.specifications.capacity}),e.product.specifications.input&&t.push({label:"Input",value:e.product.specifications.input}),e.product.specifications.type&&t.push({label:"Type",value:e.product.specifications.type})),t.slice(0,3)}),P=n(()=>`${window.location.origin}/products/${e.product.slug}`),C=n(()=>{const t=e.product.title||"Product",o=e.product.short_description||"",d=_.value;return`Check out ${t}${o?` - ${o}`:""}${d?` - ${d}`:""}`}),E=()=>{navigator.share?navigator.share({title:e.product.title,text:C.value,url:P.value}).catch(t=>{t.name!=="AbortError"&&(h.value=!0)}):h.value=!0};return(t,o)=>{const d=p("v-chip"),v=p("v-img"),f=p("v-btn"),x=p("v-tooltip"),$=p("v-icon"),F=p("v-card"),q=p("v-hover");return l(),V(q,null,{default:u(({isHovering:z,props:M})=>[s(F,b(M,{elevation:z?8:2,class:"product-card h-100 bg-white rounded-xl overflow-hidden transition-all"}),{default:u(()=>[r("div",X,[a.product.featured?(l(),V(d,{key:0,color:"amber-accent-4",variant:"flat",size:"x-small",class:"position-absolute top-0 left-0 ma-3 font-weight-bold z-index-2"},{default:u(()=>o[2]||(o[2]=[S(" FEATURED ")])),_:1,__:[2]})):g("",!0),s(v,{src:w.value,alt:a.product.title,height:"100%",cover:"",class:L(["product-img transition-transform",{"scale-110":z||j.value}])},null,8,["src","alt","class"]),r("div",Y,[s(x,{text:"View product details",location:"top"},{activator:u(({props:i})=>[s(f,b({icon:"mdi-eye-outline",variant:"flat",color:"white",size:"small",class:"hover-scale"},i,{to:`/products/${a.product.slug}`,"aria-label":"View product details"}),null,16,["to"])]),_:1}),s(x,{text:"Add to comparison",location:"top"},{activator:u(({props:i})=>[s(f,b({icon:"mdi-scale-balance",variant:"flat",color:"primary",size:"small",class:"hover-scale"},i,{disabled:a.comparisonDisabled,onClick:o[0]||(o[0]=A(U=>t.$emit("toggle-comparison",a.product),["prevent"])),"aria-label":"Add to comparison"}),null,16,["disabled"])]),_:1}),s(x,{text:"Share product",location:"top"},{activator:u(({props:i})=>[s(f,b({icon:"mdi-share-variant",variant:"flat",color:"success",size:"small",class:"hover-scale"},i,{onClick:A(E,["prevent"]),"aria-label":"Share product"}),null,16)]),_:1})])]),r("div",Z,[r("div",H,[r("div",tt,c(B.value),1),a.product.rating?(l(),m("div",et,[s($,{icon:"mdi-star",color:"amber",size:"x-small",class:"mr-1"}),r("span",ot,c(a.product.rating),1)])):g("",!0)]),r("h3",at,c(a.product.title),1),r("p",rt,c(a.product.short_description),1),k.value.length>0?(l(),m("div",st,[r("div",it,[(l(!0),m(R,null,G(k.value,(i,U)=>(l(),m("div",{key:U,class:"spec-badge"},[r("span",ct,c(i.label),1),r("span",lt,c(i.value),1)]))),128))])])):g("",!0),r("div",nt,[T.value?(l(),m("div",dt,[a.product.oldPrice&&D(I)(a.product.oldPrice)?(l(),m("span",ut," Tk "+c(D(I)(a.product.oldPrice)),1)):g("",!0),r("span",pt,c(_.value),1)])):(l(),m("div",mt,c(_.value),1)),s(f,{variant:"text",color:"primary",class:"px-0 font-weight-bold text-capitalize",to:`/products/${a.product.slug}`},{default:u(()=>[o[3]||(o[3]=S(" View Details ")),s($,{icon:"mdi-arrow-right",size:"small",class:"ml-1"})]),_:1,__:[3]},8,["to"])])])]),_:2},1040,["elevation"]),s(K,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=i=>h.value=i),title:a.product.title,url:P.value,"share-text":C.value},null,8,["modelValue","title","url","share-text"])]),_:1})}}},_t=O(ht,[["__scopeId","data-v-205f7fb8"]]);export{_t as P};
