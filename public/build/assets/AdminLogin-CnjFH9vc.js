import{_ as x,G as y,d as L,a as s,b as t,w as i,r as l,i as S,f as u,g as B,B as P,o as V}from"./app-iP0VSsOb.js";const k={data(){return{form:{email:"",password:""},loading:!1,showPassword:!1,brandingLogo:null,rules:{required:n=>!!n||"This field is required",email:n=>/.+@.+\..+/.test(n)||"E-mail must be valid"}}},async mounted(){await this.loadBrandingSettings()},methods:{...y(P,["login"]),async handleLogin(){var e,d;const{valid:n}=await this.$refs.form.validate();if(n){this.loading=!0;try{await this.login(this.form),this.$router.push({name:"AdminDashboard"})}catch(r){let o="Login failed";if(r.response){if((e=r.response.data)!=null&&e.message)o=r.response.data.message;else if((d=r.response.data)!=null&&d.errors){const c=r.response.data.errors;o=Object.values(c).flat().join(", ")}}window.Swal?window.Swal.fire({icon:"error",title:"Authentication Failed",text:o,confirmButtonColor:"#d33",background:"#fff",iconColor:"#d33"}):alert(o)}finally{this.loading=!1}}},async loadBrandingSettings(){try{const n=await B.get("/api/openapi/settings?group=branding");n.data&&n.data.logo&&(this.brandingLogo=n.data.logo)}catch(n){console.error("Error loading branding settings:",n)}}}},A={class:"login-container fill-height"},j={class:"brand-logo mb-6"},C={class:"d-flex d-md-none justify-center mb-6"};function q(n,e,d,r,o,c){const p=l("v-img"),m=l("v-col"),f=l("v-text-field"),b=l("v-icon"),h=l("v-btn"),w=l("v-form"),g=l("v-row"),v=l("v-card"),_=l("v-container");return V(),L("div",A,[e[9]||(e[9]=s("div",{class:"background-shapes"},[s("div",{class:"shape shape-1"}),s("div",{class:"shape shape-2"}),s("div",{class:"shape shape-3"})],-1)),t(_,{class:"fill-height d-flex align-center justify-center",fluid:""},{default:i(()=>[t(g,{justify:"center"},{default:i(()=>[t(m,{cols:"12",sm:"10",md:"8",lg:"6",xl:"4"},{default:i(()=>[t(v,{class:"login-card glass-effect",elevation:"24"},{default:i(()=>[t(g,{"no-gutters":""},{default:i(()=>[t(m,{cols:"12",md:"6",class:"d-none d-md-flex flex-column align-center justify-center branding-section pa-8"},{default:i(()=>[s("div",j,[t(p,{src:o.brandingLogo||"https://it.cpbangladesh.com/all-assets/common/logo/cpb/cpbit.png",alt:"Logo",width:"120",class:"drop-shadow rounded-logo",cover:""},null,8,["src"])]),e[3]||(e[3]=s("h2",{class:"text-white text-h4 font-weight-bold mb-2 text-center"},"Welcome Back!",-1)),e[4]||(e[4]=s("p",{class:"text-white text-body-1 text-center opacity-80"}," Sign in to access your dashboard and manage your business efficiently. ",-1))]),_:1,__:[3,4]}),t(m,{cols:"12",md:"6",class:"form-section pa-8 bg-white"},{default:i(()=>[s("div",C,[t(p,{src:o.brandingLogo||"https://it.cpbangladesh.com/all-assets/common/logo/cpb/cpbit.png",alt:"Logo",width:"80",class:"rounded-logo",cover:""},null,8,["src"])]),e[6]||(e[6]=s("h3",{class:"text-h5 font-weight-bold text-primary mb-1 text-center text-md-left"},"Admin Login",-1)),e[7]||(e[7]=s("p",{class:"text-caption text-grey mb-8 text-center text-md-left"},"Please enter your credentials to continue",-1)),t(w,{onSubmit:S(c.handleLogin,["prevent"]),ref:"form"},{default:i(()=>[t(f,{modelValue:o.form.email,"onUpdate:modelValue":e[0]||(e[0]=a=>o.form.email=a),label:"Email Address",placeholder:"admin@example.com",type:"email",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-email-outline",rules:[o.rules.required,o.rules.email],class:"mb-2",density:"comfortable"},null,8,["modelValue","rules"]),t(f,{modelValue:o.form.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.form.password=a),label:"Password",placeholder:"••••••••",type:o.showPassword?"text":"password",variant:"outlined",color:"primary","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":o.showPassword?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=a=>o.showPassword=!o.showPassword),rules:[o.rules.required],class:"mb-6",density:"comfortable"},null,8,["modelValue","type","append-inner-icon","rules"]),t(h,{type:"submit",color:"primary",block:"",size:"large",loading:o.loading,class:"login-btn text-capitalize font-weight-bold mb-4",elevation:"4"},{default:i(()=>[e[5]||(e[5]=u(" Sign In ")),t(b,{end:"",icon:"mdi-arrow-right",class:"ml-2"})]),_:1,__:[5]},8,["loading"])]),_:1},8,["onSubmit"]),e[8]||(e[8]=s("div",{class:"text-center mt-4"},[s("p",{class:"text-caption text-grey"},[u(" Protected by "),s("span",{class:"font-weight-bold text-primary"},"CPB-IT Security")])],-1))]),_:1,__:[6,7,8]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const I=x(k,[["render",q],["__scopeId","data-v-fb55b18c"]]);export{I as default};
