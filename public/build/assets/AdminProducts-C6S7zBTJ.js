import{_ as U,c as m,g as o,a as n,w as s,r as i,b as _,o as u,d as r,f as x,h as y,F as z,e as A,t as p}from"./app-Bn86bo5G.js";import{a as D}from"./adminPaginationMixin-DN7Wb3ng.js";const E={mixins:[D],data(){return{products:[],showDialog:!1,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadProducts()},methods:{async loadProducts(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.publishedFilter!==null&&(t.published=this.publishedFilter);const e=await _.get("/api/v1/products",{params:t,headers:this.getAuthHeaders()});this.products=e.data.data||[],this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load products")}finally{this.loading=!1}},editProduct(t){alert("Edit functionality coming soon")},async deleteProduct(t){if(confirm("Are you sure you want to delete this product?"))try{await _.delete(`/api/v1/products/${t}`,{headers:this.getAuthHeaders()}),this.showSuccess("Product deleted successfully"),await this.loadProducts()}catch(e){this.handleApiError(e,"Error deleting product")}},onPerPageChange(){this.resetPagination(),this.loadProducts()},onSort(t){this.handleSort(t),this.loadProducts()}}},I={class:"d-flex justify-space-between align-center mb-6"},N={class:"d-flex align-center"},B={class:"d-flex align-center"},O={class:"d-flex align-center"},H={class:"d-flex align-center"},M={key:0};function T(t,e,j,K,d,a){const v=i("v-btn"),f=i("v-select"),g=i("v-col"),V=i("v-text-field"),k=i("v-row"),h=i("v-card-text"),b=i("v-card"),C=i("v-card-title"),c=i("v-icon"),P=i("v-chip"),S=i("v-table"),w=i("v-pagination");return u(),m("div",null,[o("div",I,[e[10]||(e[10]=o("h1",{class:"text-h4"},"Products Management",-1)),n(v,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=l=>d.showDialog=!0)},{default:s(()=>e[9]||(e[9]=[r("Create Product")])),_:1,__:[9]})]),n(b,{class:"mb-4"},{default:s(()=>[n(h,null,{default:s(()=>[n(k,null,{default:s(()=>[n(g,{cols:"12",md:"4"},{default:s(()=>[n(f,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=l=>t.perPage=l),a.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),n(g,{cols:"12",md:"4"},{default:s(()=>[n(f,{modelValue:d.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=l=>d.publishedFilter=l),a.loadProducts],items:d.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),n(g,{cols:"12",md:"4"},{default:s(()=>[n(V,{modelValue:t.search,"onUpdate:modelValue":[e[3]||(e[3]=l=>t.search=l),a.loadProducts],label:"Search products","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),n(b,null,{default:s(()=>[n(C,null,{default:s(()=>e[11]||(e[11]=[r("Products")])),_:1,__:[11]}),n(h,null,{default:s(()=>[n(S,null,{default:s(()=>[o("thead",null,[o("tr",null,[o("th",{class:"sortable",onClick:e[4]||(e[4]=l=>a.onSort("title"))},[o("div",N,[e[12]||(e[12]=r(" Title ")),n(c,{icon:t.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[5]||(e[5]=l=>a.onSort("sku"))},[o("div",B,[e[13]||(e[13]=r(" SKU ")),n(c,{icon:t.getSortIcon("sku"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[6]||(e[6]=l=>a.onSort("price"))},[o("div",O,[e[14]||(e[14]=r(" Price ")),n(c,{icon:t.getSortIcon("price"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[7]||(e[7]=l=>a.onSort("published"))},[o("div",H,[e[15]||(e[15]=r(" Published ")),n(c,{icon:t.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[16]||(e[16]=o("th",null,"Actions",-1))])]),o("tbody",null,[(u(!0),m(z,null,A(d.products,l=>(u(),m("tr",{key:l.id},[o("td",null,p(l.title),1),o("td",null,[n(P,{size:"small",variant:"outlined"},{default:s(()=>[r(p(l.sku||"-"),1)]),_:2},1024)]),o("td",null,p(l.price?"$"+l.price:"-"),1),o("td",null,[n(P,{color:l.published?"success":"error",size:"small"},{default:s(()=>[r(p(l.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),o("td",null,[n(v,{size:"small",icon:"mdi-pencil",onClick:F=>a.editProduct(l),variant:"text"},null,8,["onClick"]),n(v,{size:"small",icon:"mdi-delete",onClick:F=>a.deleteProduct(l.id),variant:"text",color:"error"},null,8,["onClick"])])]))),128)),d.products.length===0?(u(),m("tr",M,e[17]||(e[17]=[o("td",{colspan:"5",class:"text-center py-4"},"No products found",-1)]))):y("",!0)])]),_:1}),t.pagination.last_page>1?(u(),x(w,{key:0,modelValue:t.currentPage,"onUpdate:modelValue":[e[8]||(e[8]=l=>t.currentPage=l),a.loadProducts],length:t.pagination.last_page,class:"mt-4"},null,8,["modelValue","length","onUpdate:modelValue"])):y("",!0)]),_:1})]),_:1})])}const G=U(E,[["render",T]]);export{G as default};
