import{_ as A,d as x,b as i,a,r as s,w as r,t as b,c as u,g as v,f as p,n as P,o as l}from"./app-Di36VVY-.js";const S={name:"CareerDetailPage",data(){return{career:null,loading:!0,submitting:!1,applicationForm:{name:"",email:"",phone:"",cover_letter:"",resume:null}}},mounted(){this.loadCareer()},watch:{$route(){this.loadCareer()}},methods:{async loadCareer(){var c;try{this.loading=!0,this.career=null;const e=this.$route.params.slug,_=await this.$axios.get(`/api/openapi/careers/${e}`),f=((c=_.data)==null?void 0:c.data)||_.data;f?this.career=f:(console.warn("No career data received"),this.career=null)}catch(e){console.error("Error loading career:",e),console.error("Error response:",e.response),this.career=null}finally{this.loading=!1}},async submitApplication(){var e,_,f,t;const{valid:c}=await this.$refs.applicationForm.validate();if(c){if(!this.career||!this.career.is_active){alert("This position is no longer accepting applications.");return}this.submitting=!0;try{const n=new FormData;n.append("career_id",this.career.id),n.append("name",this.applicationForm.name),n.append("email",this.applicationForm.email),n.append("phone",this.applicationForm.phone||""),n.append("cover_letter",this.applicationForm.cover_letter||""),this.applicationForm.resume&&n.append("resume",this.applicationForm.resume);const m=await this.$axios.post("/api/openapi/careers/apply",n,{headers:{"Content-Type":"multipart/form-data"}});m.data.success&&(this.resetForm(),window.Swal?window.Swal.fire({icon:"success",title:"Application Submitted!",text:m.data.message||"Your application has been submitted successfully.",confirmButtonText:"OK"}):alert(m.data.message||"Application submitted successfully!"))}catch(n){console.error("Error submitting application:",n);let m="Failed to submit application. Please try again.";if((_=(e=n.response)==null?void 0:e.data)!=null&&_.message)m=n.response.data.message;else if((t=(f=n.response)==null?void 0:f.data)!=null&&t.errors){const d=n.response.data.errors;m=Object.values(d).flat().join(", ")}window.Swal?window.Swal.fire({icon:"error",title:"Application Failed",text:m}):alert(m)}finally{this.submitting=!1}}},resetForm(){this.applicationForm={name:"",email:"",phone:"",cover_letter:"",resume:null},this.$refs.applicationForm&&(this.$refs.applicationForm.resetValidation(),this.$refs.applicationForm.reset())},formatDate(c){return c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-"},validateBangladeshPhone(c){if(!c)return!0;const e=c.replace(/[\s\-\(\)]/g,""),_=/^01[3-9]\d{8}$/,f=/^\+8801[3-9]\d{8}$/;return _.test(e)||f.test(e)}}},H={class:"career-detail-page"},N={key:0,class:"text-center py-16"},E={key:1},U={class:"mb-10 page-hero position-relative d-flex align-center justify-center text-center overflow-hidden"},j={class:"text-h4 text-lg-h2 font-weight-black text-white mb-4 text-shadow-sm"},q={class:"d-flex flex-wrap justify-center gap-4"},O={class:"text-capitalize"},R={class:"py-12"},I=["innerHTML"],J=["innerHTML"],K=["innerHTML"],X=["innerHTML"],Y={class:"text-caption"},G={key:2,class:"text-center py-16"};function Q(c,e,_,f,t,n){const m=s("v-progress-circular"),d=s("v-icon"),w=s("v-chip"),D=s("v-fade-transition"),k=s("v-container"),g=s("v-card-title"),h=s("v-card-text"),y=s("v-card"),V=s("v-col"),C=s("v-alert"),F=s("v-text-field"),z=s("v-textarea"),B=s("v-file-input"),T=s("v-btn"),M=s("v-form"),L=s("v-row");return l(),x("div",H,[t.loading?(l(),x("div",N,[i(m,{indeterminate:"",color:"primary",size:"64"}),e[5]||(e[5]=a("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading career details...",-1))])):t.career?(l(),x("div",E,[a("section",U,[e[6]||(e[6]=a("div",{class:"hero-bg-gradient"},null,-1)),e[7]||(e[7]=a("div",{class:"hero-pattern"},null,-1)),i(k,{class:"position-relative z-index-2"},{default:r(()=>[i(D,{appear:""},{default:r(()=>[a("div",null,[a("h1",j,b(t.career.title),1),a("div",q,[t.career.department?(l(),u(w,{key:0,color:"white",variant:"flat",size:"large"},{default:r(()=>[i(d,{icon:"mdi-office-building",class:"mr-2"}),p(" "+b(t.career.department),1)]),_:1})):v("",!0),t.career.location?(l(),u(w,{key:1,color:"white",variant:"flat",size:"large"},{default:r(()=>[i(d,{icon:"mdi-map-marker",class:"mr-2"}),p(" "+b(t.career.location),1)]),_:1})):v("",!0),t.career.employment_type?(l(),u(w,{key:2,color:"white",variant:"flat",size:"large"},{default:r(()=>[i(d,{icon:"mdi-briefcase-clock",class:"mr-2"}),a("span",O,b(t.career.employment_type),1)]),_:1})):v("",!0)])])]),_:1})]),_:1})]),a("section",R,[i(k,null,{default:r(()=>[i(L,null,{default:r(()=>[i(V,{cols:"12",md:"8"},{default:r(()=>[i(y,{class:"mb-6",elevation:"2"},{default:r(()=>[i(g,{class:"bg-primary text-white"},{default:r(()=>e[8]||(e[8]=[p("Job Description")])),_:1,__:[8]}),i(h,{class:"pa-6"},{default:r(()=>[a("div",{innerHTML:t.career.description||"No description available."},null,8,I)]),_:1})]),_:1}),t.career.responsibilities?(l(),u(y,{key:0,class:"mb-6",elevation:"2"},{default:r(()=>[i(g,{class:"bg-primary text-white"},{default:r(()=>e[9]||(e[9]=[p("Responsibilities")])),_:1,__:[9]}),i(h,{class:"pa-6"},{default:r(()=>[a("div",{innerHTML:t.career.responsibilities},null,8,J)]),_:1})]),_:1})):v("",!0),t.career.requirements?(l(),u(y,{key:1,class:"mb-6",elevation:"2"},{default:r(()=>[i(g,{class:"bg-primary text-white"},{default:r(()=>e[10]||(e[10]=[p("Requirements")])),_:1,__:[10]}),i(h,{class:"pa-6"},{default:r(()=>[a("div",{innerHTML:t.career.requirements},null,8,K)]),_:1})]),_:1})):v("",!0),t.career.benefits?(l(),u(y,{key:2,class:"mb-6",elevation:"2"},{default:r(()=>[i(g,{class:"bg-primary text-white"},{default:r(()=>e[11]||(e[11]=[p("Benefits")])),_:1,__:[11]}),i(h,{class:"pa-6"},{default:r(()=>[a("div",{innerHTML:t.career.benefits},null,8,X)]),_:1})]),_:1})):v("",!0)]),_:1}),i(V,{cols:"12",md:"4"},{default:r(()=>[i(y,{class:P(["sticky-top",{"application-closed":!t.career.is_active}]),elevation:"2"},{default:r(()=>[i(g,{class:"bg-primary text-white"},{default:r(()=>[i(d,{icon:"mdi-file-document-edit",class:"mr-2"}),e[12]||(e[12]=p(" Apply for this Position "))]),_:1,__:[12]}),i(h,{class:"pa-6"},{default:r(()=>[t.career.is_active?t.career.deadline?(l(),u(C,{key:1,type:"info",variant:"tonal",class:"mb-4"},{default:r(()=>[a("div",Y,[e[14]||(e[14]=a("strong",null,"Application Deadline:",-1)),e[15]||(e[15]=a("br",null,null,-1)),p(" "+b(n.formatDate(t.career.deadline)),1)])]),_:1})):v("",!0):(l(),u(C,{key:0,type:"warning",variant:"tonal",class:"mb-4"},{default:r(()=>e[13]||(e[13]=[p(" This position is no longer accepting applications. ")])),_:1,__:[13]})),t.career.is_active?(l(),u(M,{key:2,ref:"applicationForm"},{default:r(()=>[i(F,{modelValue:t.applicationForm.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.applicationForm.name=o),label:"Full Name *",variant:"outlined",rules:[o=>!!o||"Name is required"],density:"compact","prepend-inner-icon":"mdi-account"},null,8,["modelValue","rules"]),i(F,{modelValue:t.applicationForm.email,"onUpdate:modelValue":e[1]||(e[1]=o=>t.applicationForm.email=o),label:"Email *",type:"email",variant:"outlined",rules:[o=>!!o||"Email is required",o=>/.+@.+\..+/.test(o)||"Email must be valid"],density:"compact","prepend-inner-icon":"mdi-email"},null,8,["modelValue","rules"]),i(F,{modelValue:t.applicationForm.phone,"onUpdate:modelValue":e[2]||(e[2]=o=>t.applicationForm.phone=o),label:"Phone",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone",placeholder:"01707080401 or +8801707080401",rules:[o=>!o||n.validateBangladeshPhone(o)||"Please enter a valid Bangladesh phone number (e.g., 01707080401 or +8801707080401)"],hint:"Bangladesh phone number format","persistent-hint":""},null,8,["modelValue","rules"]),i(z,{modelValue:t.applicationForm.cover_letter,"onUpdate:modelValue":e[3]||(e[3]=o=>t.applicationForm.cover_letter=o),label:"Cover Letter",variant:"outlined",rows:"4",density:"compact","prepend-inner-icon":"mdi-text",hint:"Tell us why you're interested in this position","persistent-hint":""},null,8,["modelValue"]),i(B,{modelValue:t.applicationForm.resume,"onUpdate:modelValue":e[4]||(e[4]=o=>t.applicationForm.resume=o),label:"Resume (PDF, DOC, DOCX)",variant:"outlined",density:"compact","prepend-icon":"","prepend-inner-icon":"mdi-file-document",accept:".pdf,.doc,.docx",rules:[o=>!o||o.size<5242880||"File size must be less than 5MB"],hint:"Max file size: 5MB","persistent-hint":"","show-size":""},null,8,["modelValue","rules"]),i(T,{color:"primary",variant:"flat",block:"",size:"large",onClick:n.submitApplication,loading:t.submitting,disabled:!t.career.is_active},{default:r(()=>[i(d,{icon:"mdi-send",class:"mr-2"}),e[16]||(e[16]=p(" Submit Application "))]),_:1,__:[16]},8,["onClick","loading","disabled"])]),_:1},512)):v("",!0)]),_:1})]),_:1},8,["class"]),i(y,{class:"mt-4",elevation:"2",to:{name:"Careers"},style:{cursor:"pointer"}},{default:r(()=>[i(h,{class:"pa-4 d-flex align-center justify-center"},{default:r(()=>[i(d,{icon:"mdi-arrow-left",class:"mr-2",color:"primary"}),e[17]||(e[17]=a("span",{class:"text-body-1 font-weight-medium text-primary"},"Back to Careers",-1))]),_:1,__:[17]})]),_:1})]),_:1})]),_:1})]),_:1})])])):(l(),x("div",G,[i(d,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),e[19]||(e[19]=a("h3",{class:"text-h6 font-weight-bold mb-2"},"Career not found",-1)),e[20]||(e[20]=a("p",{class:"text-body-2 text-medium-emphasis mb-6"}," The career opportunity you're looking for doesn't exist or has been removed. ",-1)),i(T,{color:"primary",to:{name:"Careers"}},{default:r(()=>e[18]||(e[18]=[p("View All Careers")])),_:1,__:[18]})]))])}const Z=A(S,[["render",Q],["__scopeId","data-v-ac1180be"]]);export{Z as default};
