import{_ as U,c as p,e as a,a as t,w as s,b as d,r as o,g as z,h as P,F as A,d as x,f as y,o as u,t as m}from"./app-DjJ9iHSO.js";import{a as D}from"./adminPaginationMixin-DN7Wb3ng.js";const E={mixins:[D],data(){return{pages:[],showDialog:!1,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadPages()},methods:{async loadPages(){try{this.loading=!0;const l=this.buildPaginationParams();this.search&&(l.search=this.search),this.publishedFilter!==null&&(l.published=this.publishedFilter);const e=await y.get("/api/v1/pages",{params:l,headers:this.getAuthHeaders()});this.pages=e.data.data||[],this.updatePagination(e.data)}catch(l){this.handleApiError(l,"Failed to load pages")}finally{this.loading=!1}},onSort(l){this.handleSort(l),this.loadPages()},editPage(l){alert("Edit functionality coming soon")},async deletePage(l){if(confirm("Are you sure you want to delete this page?"))try{await y.delete(`/api/v1/pages/${l}`,{headers:this.getAuthHeaders()}),this.showSuccess("Page deleted successfully"),await this.loadPages()}catch(e){this.handleApiError(e,"Error deleting page")}}}},N={class:"page-header"},B={class:"d-flex align-center"},I={class:"d-flex align-center"},O={class:"d-flex align-center"},T={key:0};function H(l,e,M,L,r,i){const g=o("v-btn"),f=o("v-select"),c=o("v-col"),V=o("v-text-field"),k=o("v-row"),h=o("v-card-text"),b=o("v-card"),C=o("v-card-title"),v=o("v-icon"),_=o("v-chip"),S=o("v-table"),w=o("v-pagination");return u(),p("div",null,[a("div",N,[e[9]||(e[9]=a("h1",{class:"text-h4 page-title"},"Pages Management",-1)),t(g,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=n=>r.showDialog=!0),class:"add-button"},{default:s(()=>e[8]||(e[8]=[d("Create Page")])),_:1,__:[8]})]),t(b,{class:"mb-4"},{default:s(()=>[t(h,null,{default:s(()=>[t(k,null,{default:s(()=>[t(c,{cols:"12",md:"4"},{default:s(()=>[t(f,{modelValue:l.perPage,"onUpdate:modelValue":[e[1]||(e[1]=n=>l.perPage=n),l.onPerPageChange],items:l.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(c,{cols:"12",md:"4"},{default:s(()=>[t(f,{modelValue:r.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=n=>r.publishedFilter=n),i.loadPages],items:r.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(c,{cols:"12",md:"4"},{default:s(()=>[t(V,{modelValue:l.search,"onUpdate:modelValue":[e[3]||(e[3]=n=>l.search=n),i.loadPages],label:"Search pages","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(b,null,{default:s(()=>[t(C,null,{default:s(()=>e[10]||(e[10]=[d("Pages")])),_:1,__:[10]}),t(h,null,{default:s(()=>[t(S,null,{default:s(()=>[a("thead",null,[a("tr",null,[a("th",{class:"sortable",onClick:e[4]||(e[4]=n=>i.onSort("title"))},[a("div",B,[e[11]||(e[11]=d(" Title ")),t(v,{icon:l.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),a("th",{class:"sortable",onClick:e[5]||(e[5]=n=>i.onSort("slug"))},[a("div",I,[e[12]||(e[12]=d(" Slug ")),t(v,{icon:l.getSortIcon("slug"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[14]||(e[14]=a("th",null,"Type",-1)),a("th",{class:"sortable",onClick:e[6]||(e[6]=n=>i.onSort("published"))},[a("div",O,[e[13]||(e[13]=d(" Published ")),t(v,{icon:l.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[15]||(e[15]=a("th",null,"Actions",-1))])]),a("tbody",null,[(u(!0),p(A,null,x(r.pages,n=>(u(),p("tr",{key:n.id},[a("td",null,m(n.title),1),a("td",null,[t(_,{size:"small",variant:"outlined"},{default:s(()=>[d(m(n.slug),1)]),_:2},1024)]),a("td",null,m(n.page_type||"-"),1),a("td",null,[t(_,{color:n.published?"success":"error",size:"small"},{default:s(()=>[d(m(n.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),a("td",null,[t(g,{size:"small",icon:"mdi-pencil",onClick:F=>i.editPage(n),variant:"text"},null,8,["onClick"]),t(g,{size:"small",icon:"mdi-delete",onClick:F=>i.deletePage(n.id),variant:"text",color:"error"},null,8,["onClick"])])]))),128)),r.pages.length===0?(u(),p("tr",T,e[16]||(e[16]=[a("td",{colspan:"5",class:"text-center py-4"},"No pages found",-1)]))):P("",!0)])]),_:1}),l.pagination.last_page>1?(u(),z(w,{key:0,modelValue:l.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=n=>l.currentPage=n),i.loadPages],length:l.pagination.last_page,class:"mt-4"},null,8,["modelValue","length","onUpdate:modelValue"])):P("",!0)]),_:1})]),_:1})])}const G=U(E,[["render",H]]);export{G as default};
