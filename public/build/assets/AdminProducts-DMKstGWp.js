import{_ as U,c as m,e as n,a as o,w as s,b as d,r as a,g as z,h as _,F as x,d as A,f as y,o as u,t as p}from"./app-D0CoK2OG.js";import{a as D}from"./adminPaginationMixin-DN7Wb3ng.js";const E={mixins:[D],data(){return{products:[],showDialog:!1,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadProducts()},methods:{async loadProducts(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.publishedFilter!==null&&(t.published=this.publishedFilter);const e=await y.get("/api/v1/products",{params:t,headers:this.getAuthHeaders()});this.products=e.data.data||[],this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load products")}finally{this.loading=!1}},editProduct(t){alert("Edit functionality coming soon")},async deleteProduct(t){if(confirm("Are you sure you want to delete this product?"))try{await y.delete(`/api/v1/products/${t}`,{headers:this.getAuthHeaders()}),this.showSuccess("Product deleted successfully"),await this.loadProducts()}catch(e){this.handleApiError(e,"Error deleting product")}},onPerPageChange(){this.resetPagination(),this.loadProducts()},onSort(t){this.handleSort(t),this.loadProducts()}}},I={class:"page-header"},N={class:"d-flex align-center"},B={class:"d-flex align-center"},O={class:"d-flex align-center"},H={class:"d-flex align-center"},M={key:0};function T(t,e,K,L,r,i){const v=a("v-btn"),h=a("v-select"),g=a("v-col"),V=a("v-text-field"),k=a("v-row"),f=a("v-card-text"),b=a("v-card"),C=a("v-card-title"),c=a("v-icon"),P=a("v-chip"),S=a("v-table"),w=a("v-pagination");return u(),m("div",null,[n("div",I,[e[10]||(e[10]=n("h1",{class:"text-h4 page-title"},"Products Management",-1)),o(v,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=l=>r.showDialog=!0),class:"add-button"},{default:s(()=>e[9]||(e[9]=[d("Create Product")])),_:1,__:[9]})]),o(b,{class:"mb-4"},{default:s(()=>[o(f,null,{default:s(()=>[o(k,null,{default:s(()=>[o(g,{cols:"12",md:"4"},{default:s(()=>[o(h,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=l=>t.perPage=l),i.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),o(g,{cols:"12",md:"4"},{default:s(()=>[o(h,{modelValue:r.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=l=>r.publishedFilter=l),i.loadProducts],items:r.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),o(g,{cols:"12",md:"4"},{default:s(()=>[o(V,{modelValue:t.search,"onUpdate:modelValue":[e[3]||(e[3]=l=>t.search=l),i.loadProducts],label:"Search products","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(b,null,{default:s(()=>[o(C,null,{default:s(()=>e[11]||(e[11]=[d("Products")])),_:1,__:[11]}),o(f,null,{default:s(()=>[o(S,null,{default:s(()=>[n("thead",null,[n("tr",null,[n("th",{class:"sortable",onClick:e[4]||(e[4]=l=>i.onSort("title"))},[n("div",N,[e[12]||(e[12]=d(" Title ")),o(c,{icon:t.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),n("th",{class:"sortable",onClick:e[5]||(e[5]=l=>i.onSort("sku"))},[n("div",B,[e[13]||(e[13]=d(" SKU ")),o(c,{icon:t.getSortIcon("sku"),size:"small",class:"ml-1"},null,8,["icon"])])]),n("th",{class:"sortable",onClick:e[6]||(e[6]=l=>i.onSort("price"))},[n("div",O,[e[14]||(e[14]=d(" Price ")),o(c,{icon:t.getSortIcon("price"),size:"small",class:"ml-1"},null,8,["icon"])])]),n("th",{class:"sortable",onClick:e[7]||(e[7]=l=>i.onSort("published"))},[n("div",H,[e[15]||(e[15]=d(" Published ")),o(c,{icon:t.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[16]||(e[16]=n("th",null,"Actions",-1))])]),n("tbody",null,[(u(!0),m(x,null,A(r.products,l=>(u(),m("tr",{key:l.id},[n("td",null,p(l.title),1),n("td",null,[o(P,{size:"small",variant:"outlined"},{default:s(()=>[d(p(l.sku||"-"),1)]),_:2},1024)]),n("td",null,p(l.price?"$"+l.price:"-"),1),n("td",null,[o(P,{color:l.published?"success":"error",size:"small"},{default:s(()=>[d(p(l.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),n("td",null,[o(v,{size:"small",icon:"mdi-pencil",onClick:F=>i.editProduct(l),variant:"text"},null,8,["onClick"]),o(v,{size:"small",icon:"mdi-delete",onClick:F=>i.deleteProduct(l.id),variant:"text",color:"error"},null,8,["onClick"])])]))),128)),r.products.length===0?(u(),m("tr",M,e[17]||(e[17]=[n("td",{colspan:"5",class:"text-center py-4"},"No products found",-1)]))):_("",!0)])]),_:1}),t.pagination.last_page>1?(u(),z(w,{key:0,modelValue:t.currentPage,"onUpdate:modelValue":[e[8]||(e[8]=l=>t.currentPage=l),i.loadProducts],length:t.pagination.last_page,class:"mt-4"},null,8,["modelValue","length","onUpdate:modelValue"])):_("",!0)]),_:1})]),_:1})])}const G=U(E,[["render",T]]);export{G as default};
