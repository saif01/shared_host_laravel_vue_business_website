import{_ as R,g as P,c as b,w as l,b as s,r as n,a as o,t as c,d as p,f as m,h as v,F as B,e as q,n as H,o as a}from"./app-iP0VSsOb.js";import{a as j}from"./adminPaginationMixin-DN7Wb3ng.js";import{Q as X}from"./quill.snow-BNU-bvb3.js";import{r as Y,n as Z}from"./uploads-CnEkgyD_.js";const $={name:"ServiceFormDialog",mixins:[j],props:{modelValue:{type:Boolean,default:!1},editingService:{type:Object,default:null}},emits:["update:modelValue","saved"],data(){return{activeTab:"basic",loading:!1,saving:!1,imageFile:null,imagePreview:null,uploadingImage:!1,ogImageFile:null,ogImagePreview:null,uploadingOgImage:!1,featuresText:"",benefitsText:"",quillEditor:null,form:{title:"",slug:"",short_description:"",description:"",icon:"",image:"",price_range:"",features:[],benefits:[],meta_title:"",meta_description:"",meta_keywords:"",og_image:"",published:!1,order:0}}},computed:{dialog:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},suggestedMetaTitle(){return this.form.meta_title||!this.form.title?null:this.form.title.length>60?this.form.title.substring(0,57)+"...":this.form.title},suggestedMetaDescription(){if(this.form.meta_description||!this.form.short_description)return null;let t=this.form.short_description;if(t.length>160){t=t.substring(0,157);const e=t.lastIndexOf(" ");e>120?t=t.substring(0,e)+"...":t+="..."}return t},suggestedMetaKeywords(){return this.form.meta_keywords?null:this.generateSuggestedKeywords()}},watch:{modelValue(t){t&&(this.activeTab="basic",this.editingService?this.loadServiceForEdit():this.resetForm())},editingService:{handler(t){t&&this.dialog?this.loadServiceForEdit():!t&&this.dialog&&this.resetForm()},immediate:!1},activeTab(t){t==="content"&&this.dialog&&!this.loading?setTimeout(()=>{this.initEditor()},300):t!=="content"&&this.quillEditor&&this.destroyEditor()}},methods:{resetForm(){this.quillEditor&&this.destroyEditor(),this.form={title:"",slug:"",short_description:"",description:"",icon:"",image:"",price_range:"",features:[],benefits:[],meta_title:"",meta_description:"",meta_keywords:"",og_image:"",published:!1,order:0},this.imageFile=null,this.imagePreview=null,this.ogImageFile=null,this.ogImagePreview=null,this.featuresText="",this.benefitsText="",this.$refs.formRef&&this.$refs.formRef.resetValidation()},async loadServiceForEdit(){if(this.editingService){this.loading=!0;try{const e=(await P.get(`/api/v1/services/${this.editingService.id}`,{headers:this.getAuthHeaders()})).data;this.form={title:e.title||"",slug:e.slug||"",short_description:e.short_description||"",description:e.description||"",icon:e.icon||"",image:e.image||"",price_range:e.price_range||"",features:Array.isArray(e.features)?[...e.features]:[],benefits:Array.isArray(e.benefits)?[...e.benefits]:[],meta_title:e.meta_title||"",meta_description:e.meta_description||"",meta_keywords:e.meta_keywords||"",og_image:e.og_image||"",published:e.published||!1,order:e.order||0};const f=this.normalizeImageInput(e.image||""),_=this.normalizeImageInput(e.og_image||"");this.form.image=f,this.form.og_image=_,this.imagePreview=this.resolveImageUrl(e.image||f),this.ogImagePreview=this.resolveImageUrl(e.og_image||_),this.featuresText=Array.isArray(e.features)?e.features.join(`
`):"",this.benefitsText=Array.isArray(e.benefits)?e.benefits.join(`
`):""}catch(t){this.handleApiError(t,"Failed to load service data"),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){!this.saving&&!this.loading&&(this.destroyEditor(),this.dialog=!1,this.resetForm())},initEditor(){this.quillEditor&&this.destroyEditor(),this.$nextTick(()=>{if(this.$refs.editorContainer&&this.activeTab==="content")try{this.$refs.editorContainer.innerHTML="",this.quillEditor=new X(this.$refs.editorContainer,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["blockquote","code-block"],["clean"]]},placeholder:"Enter detailed description of the service..."}),this.form.description&&(this.quillEditor.root.innerHTML=this.form.description),this.quillEditor.on("text-change",()=>{this.form.description=this.quillEditor.root.innerHTML}),this.quillEditor.on("selection-change",()=>{this.form.description=this.quillEditor.root.innerHTML})}catch(t){console.error("Error initializing Quill editor:",t),this.showError("Failed to initialize text editor")}})},destroyEditor(){if(this.quillEditor){try{if(this.quillEditor.root&&this.quillEditor.root.innerHTML){const t=this.quillEditor.root.innerHTML.trim();t&&t!=="<p><br></p>"&&(this.form.description=t)}}catch(t){console.error("Error saving editor content:",t)}try{this.quillEditor=null,this.$refs.editorContainer&&(this.$refs.editorContainer.innerHTML="")}catch(t){console.error("Error destroying editor:",t),this.quillEditor=null}}else this.$refs.editorContainer&&(this.$refs.editorContainer.innerHTML="")},generateSlug(){this.form.title&&!this.editingService&&(this.form.slug=this.form.title.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},handleImageSelect(t){if(t){const e=Array.isArray(t)?t[0]:t;if(e&&e.size>5242880){this.showError("Image file size must be less than 5MB"),this.imageFile=null;return}if(e&&!e.type.startsWith("image/")){this.showError("Please select a valid image file"),this.imageFile=null;return}if(this.imageFile=e,e){const f=new FileReader;f.onload=_=>{this.imagePreview=_.target.result},f.onerror=()=>{this.showError("Failed to read image file"),this.imageFile=null,this.imagePreview=null},f.readAsDataURL(e)}else this.imagePreview=null}else this.imageFile=null,this.form.image?this.imagePreview=this.resolveImageUrl(this.form.image):this.imagePreview=null},removeImage(){confirm("Are you sure you want to remove this image?")&&(this.imagePreview=null,this.imageFile=null,this.form.image="")},handleOgImageSelect(t){if(t){const e=Array.isArray(t)?t[0]:t;if(e&&e.size>5242880){this.showError("OG image file size must be less than 5MB"),this.ogImageFile=null;return}if(e&&!e.type.startsWith("image/")){this.showError("Please select a valid image file"),this.ogImageFile=null;return}if(this.ogImageFile=e,e){const f=new FileReader;f.onload=_=>{this.ogImagePreview=_.target.result},f.onerror=()=>{this.showError("Failed to read image file"),this.ogImageFile=null,this.ogImagePreview=null},f.readAsDataURL(e)}else this.ogImagePreview=null}else this.ogImageFile=null,this.form.og_image?this.ogImagePreview=this.resolveImageUrl(this.form.og_image):this.ogImagePreview=null},removeOgImage(){confirm("Are you sure you want to remove the Open Graph image?")&&(this.ogImagePreview=null,this.ogImageFile=null,this.form.og_image="")},generateMetaTitle(){this.form.title&&(this.form.meta_title=this.form.title.length>60?this.form.title.substring(0,57)+"...":this.form.title)},generateMetaDescription(){if(this.form.short_description){let t=this.form.short_description;if(t.length>160){t=t.substring(0,157);const e=t.lastIndexOf(" ");e>120?t=t.substring(0,e)+"...":t+="..."}this.form.meta_description=t}},generateMetaKeywords(){const t=this.generateSuggestedKeywords();t&&(this.form.meta_keywords=t)},generateSuggestedKeywords(){const t=[];if(this.form.title){const _=this.form.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(i=>i.length>3).slice(0,5);t.push(..._)}if(this.form.short_description){const _=this.form.short_description.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(i=>i.length>4).slice(0,5);t.push(..._)}this.form.features&&this.form.features.length>0&&this.form.features.forEach(_=>{const i=_.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(r=>r.length>3).slice(0,2);t.push(...i)});const e=["the","and","for","with","from","this","that","your","our","service","services"],f=[...new Set(t)].filter(_=>!e.includes(_)).slice(0,10);return f.length>0?f.join(", "):null},suggestMetaFields(){},applySuggestedMetaTitle(){this.suggestedMetaTitle&&(this.form.meta_title=this.suggestedMetaTitle)},applySuggestedMetaDescription(){this.suggestedMetaDescription&&(this.form.meta_description=this.suggestedMetaDescription)},applySuggestedMetaKeywords(){this.suggestedMetaKeywords&&(this.form.meta_keywords=this.suggestedMetaKeywords)},getMetaTitleColor(){const t=this.form.meta_title?this.form.meta_title.length:0;return t===0?"primary":t<50?"warning":t>60?"error":"success"},getMetaDescriptionColor(){const t=this.form.meta_description?this.form.meta_description.length:0;return t===0?"primary":t<120?"warning":t>160?"error":"success"},getPreviewTitle(){return this.form.meta_title||this.form.title||"Service Title"},getPreviewDescription(){return this.form.meta_description||this.form.short_description||"Service description will appear here in search results..."},getPreviewUrl(){const t=window.location.origin||"https://example.com",e=this.form.slug||"service-slug";return`${t}/services/${e}`},updateFeaturesFromText(){this.featuresText?this.form.features=this.featuresText.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):this.form.features=[]},updateBenefitsFromText(){this.benefitsText?this.form.benefits=this.benefitsText.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):this.form.benefits=[]},removeFeature(t){this.form.features.splice(t,1),this.featuresText=this.form.features.join(`
`)},removeBenefit(t){this.form.benefits.splice(t,1),this.benefitsText=this.form.benefits.join(`
`)},async uploadImage(){var e,f,_,i;if(!this.imageFile)return null;const t=Array.isArray(this.imageFile)?this.imageFile[0]:this.imageFile;if(!t)return null;this.uploadingImage=!0;try{const r=new FormData;r.append("image",t),r.append("folder","services"),this.form.title&&r.append("prefix",this.form.title);const u=await P.post("/api/v1/upload/image",r,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(u.data.success){const w=this.normalizeImageInput(u.data.path||u.data.url);return this.form.image=w,this.imagePreview=this.resolveImageUrl(u.data.url||w),this.imageFile=null,w}else throw new Error(u.data.message||"Failed to upload image")}catch(r){const u=((f=(e=r.response)==null?void 0:e.data)==null?void 0:f.message)||((i=(_=r.response)==null?void 0:_.data)==null?void 0:i.error)||"Failed to upload image";throw new Error(u)}finally{this.uploadingImage=!1}},async uploadOgImage(){var e,f,_,i;if(!this.ogImageFile)return null;const t=Array.isArray(this.ogImageFile)?this.ogImageFile[0]:this.ogImageFile;if(!t)return null;this.uploadingOgImage=!0;try{const r=new FormData;r.append("image",t),r.append("folder","services/og"),this.form.title&&r.append("prefix",this.form.title);const u=await P.post("/api/v1/upload/image",r,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(u.data.success){const w=this.normalizeImageInput(u.data.path||u.data.url);return this.form.og_image=w,this.ogImagePreview=this.resolveImageUrl(u.data.url||w),this.ogImageFile=null,w}else throw new Error(u.data.message||"Failed to upload OG image")}catch(r){const u=((f=(e=r.response)==null?void 0:e.data)==null?void 0:f.message)||((i=(_=r.response)==null?void 0:_.data)==null?void 0:i.error)||"Failed to upload OG image";throw new Error(u)}finally{this.uploadingOgImage=!1}},async saveService(){this.quillEditor&&(this.form.description=this.quillEditor.root.innerHTML);const{valid:t}=await this.$refs.formRef.validate();if(!t){this.showError("Please fill in all required fields");return}this.updateFeaturesFromText(),this.updateBenefitsFromText(),this.saving=!0;try{if(this.imageFile)try{await this.uploadImage()}catch(f){this.showError(f.message||"Failed to upload image");return}if(this.ogImageFile)try{await this.uploadOgImage()}catch(f){this.showError(f.message||"Failed to upload OG image");return}const e={title:this.form.title,slug:this.form.slug,short_description:this.form.short_description||null,description:this.form.description||null,icon:this.form.icon||null,image:this.normalizeImageInput(this.form.image)||null,price_range:this.form.price_range||null,features:this.form.features.length>0?this.form.features:null,benefits:this.form.benefits.length>0?this.form.benefits:null,meta_title:this.form.meta_title||null,meta_description:this.form.meta_description||null,meta_keywords:this.form.meta_keywords||null,og_image:this.normalizeImageInput(this.form.og_image)||null,published:this.form.published||!1,order:this.form.order||0};this.editingService?(await P.put(`/api/v1/services/${this.editingService.id}`,e,{headers:this.getAuthHeaders()}),this.showSuccess("Service updated successfully")):(await P.post("/api/v1/services",e,{headers:this.getAuthHeaders()}),this.showSuccess("Service created successfully")),this.$emit("saved"),this.closeDialog()}catch(e){this.handleApiError(e,this.editingService?"Failed to update service":"Failed to create service")}finally{this.saving=!1}},normalizeImageInput(t){return Z(t)},resolveImageUrl(t){return Y(t)}}},ee={class:"text-h5 font-weight-bold"},te={key:0,class:"d-flex align-center justify-center pa-12"},ie={class:"text-center"},se={class:"pa-6"},le={class:"pa-6"},oe={class:"rich-text-editor-wrapper"},re={ref:"editorContainer",class:"rich-text-editor"},ne={class:"d-flex flex-column flex-md-row align-start"},ae={key:0,class:"mr-md-4 mb-4 mb-md-0"},de={class:"mt-2"},me={class:"flex-grow-1"},ue={key:1,class:"text-caption text-medium-emphasis mt-2"},ce={key:0,class:"mt-2"},ge={key:0,class:"mt-2"},fe={class:"pa-6"},pe={class:"d-flex align-center justify-space-between"},he={class:"text-body-2"},ve={key:0,class:"ml-2"},_e={key:1,class:"ml-2"},be={key:2,class:"ml-2 text-success"},ye={class:"d-flex align-center justify-space-between flex-wrap"},we={class:"text-body-2 mb-2"},xe={key:0,class:"ml-2"},Se={key:1,class:"ml-2"},ke={key:2,class:"ml-2 text-success"},Ie={class:"d-flex align-center justify-space-between flex-wrap"},Fe={class:"text-body-2 mb-2"},Ve={class:"text-caption text-medium-emphasis"},Ce={class:"d-flex flex-column flex-md-row align-start"},De={key:0,class:"mr-md-4 mb-4 mb-md-0"},Te={class:"mt-2"},Pe={class:"flex-grow-1"},Ee={key:1,class:"text-caption text-medium-emphasis mt-2"},Me={class:"search-preview"},ze={class:"search-url mb-1 text-caption",style:{color:"#006621"}};function Ue(t,e,f,_,i,r){const u=n("v-btn"),w=n("v-card-title"),F=n("v-progress-circular"),E=n("v-tab"),M=n("v-tabs"),x=n("v-text-field"),y=n("v-col"),h=n("v-textarea"),I=n("v-icon"),D=n("v-switch"),V=n("v-row"),T=n("v-window-item"),C=n("v-label"),z=n("v-img"),g=n("v-file-input"),k=n("v-alert"),U=n("v-card"),L=n("v-chip"),S=n("v-divider"),A=n("v-window"),K=n("v-form"),G=n("v-card-text"),N=n("v-spacer"),W=n("v-card-actions"),Q=n("v-dialog");return a(),b(Q,{modelValue:r.dialog,"onUpdate:modelValue":e[16]||(e[16]=d=>r.dialog=d),"max-width":"1200",scrollable:"",persistent:""},{default:l(()=>[s(U,null,{default:l(()=>[s(w,{class:"d-flex align-center justify-space-between bg-primary text-white pa-4"},{default:l(()=>[o("span",ee,c(f.editingService?"Edit Service":"Create New Service"),1),s(u,{icon:"mdi-close",variant:"text",color:"white",onClick:r.closeDialog,disabled:i.saving||i.loading},null,8,["onClick","disabled"])]),_:1}),s(G,{class:"pa-0"},{default:l(()=>[i.loading?(a(),p("div",te,[o("div",ie,[s(F,{indeterminate:"",color:"primary",size:"64"}),e[17]||(e[17]=o("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading service data...",-1))])])):(a(),b(K,{key:1,ref:"formRef"},{default:l(()=>[s(M,{modelValue:i.activeTab,"onUpdate:modelValue":e[0]||(e[0]=d=>i.activeTab=d),"bg-color":"grey-lighten-4"},{default:l(()=>[s(E,{value:"basic"},{default:l(()=>e[18]||(e[18]=[m("Basic Information")])),_:1,__:[18]}),s(E,{value:"content"},{default:l(()=>e[19]||(e[19]=[m("Content")])),_:1,__:[19]}),s(E,{value:"seo"},{default:l(()=>e[20]||(e[20]=[m("SEO & Meta")])),_:1,__:[20]})]),_:1},8,["modelValue"]),s(A,{modelValue:i.activeTab,"onUpdate:modelValue":e[15]||(e[15]=d=>i.activeTab=d)},{default:l(()=>[s(T,{value:"basic"},{default:l(()=>[o("div",se,[s(V,null,{default:l(()=>[s(y,{cols:"12"},{default:l(()=>[s(x,{modelValue:i.form.title,"onUpdate:modelValue":e[1]||(e[1]=d=>i.form.title=d),label:"Service Title *",variant:"outlined",rules:[d=>!!d||"Title is required"],hint:"Enter the service title",onBlur:r.generateSlug,"persistent-hint":""},null,8,["modelValue","rules","onBlur"])]),_:1}),s(y,{cols:"12",md:"6"},{default:l(()=>[s(x,{modelValue:i.form.slug,"onUpdate:modelValue":e[2]||(e[2]=d=>i.form.slug=d),label:"Slug *",variant:"outlined",rules:[d=>!!d||"Slug is required",d=>!d||/^[a-z0-9-]+$/.test(d)||"Slug can only contain lowercase letters, numbers, and hyphens"],hint:"URL-friendly version (auto-generated from title)","persistent-hint":""},{append:l(()=>[s(u,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateSlug,disabled:!i.form.title},null,8,["onClick","disabled"])]),_:1},8,["modelValue","rules"])]),_:1}),s(y,{cols:"12",md:"6"},{default:l(()=>[s(x,{modelValue:i.form.order,"onUpdate:modelValue":e[3]||(e[3]=d=>i.form.order=d),label:"Order",type:"number",variant:"outlined",hint:"Display order (lower numbers first)","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(h,{modelValue:i.form.short_description,"onUpdate:modelValue":e[4]||(e[4]=d=>i.form.short_description=d),label:"Short Description",variant:"outlined",rows:"3",hint:"Brief description shown in service listings","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(y,{cols:"12",md:"6"},{default:l(()=>[s(x,{modelValue:i.form.icon,"onUpdate:modelValue":e[5]||(e[5]=d=>i.form.icon=d),label:"Icon",variant:"outlined",hint:"Material Design Icon name (e.g., mdi-battery-charging-high)","persistent-hint":"","prepend-inner-icon":"mdi-information-outline"},{append:l(()=>[i.form.icon?(a(),b(I,{key:0,icon:i.form.icon,size:"small"},null,8,["icon"])):v("",!0)]),_:1},8,["modelValue"])]),_:1}),s(y,{cols:"12",md:"6"},{default:l(()=>[s(x,{modelValue:i.form.price_range,"onUpdate:modelValue":e[6]||(e[6]=d=>i.form.price_range=d),label:"Price Range",variant:"outlined",hint:"e.g., $100 - $500","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(D,{modelValue:i.form.published,"onUpdate:modelValue":e[7]||(e[7]=d=>i.form.published=d),label:"Published",color:"success",hint:"Publish this service on the public website","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s(T,{value:"content"},{default:l(()=>[o("div",le,[s(V,null,{default:l(()=>[s(y,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[21]||(e[21]=[m("Full Description")])),_:1,__:[21]}),o("div",oe,[o("div",re,null,512)])]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[22]||(e[22]=[m("Service Image")])),_:1,__:[22]}),s(U,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",ne,[i.imagePreview||i.form.image?(a(),p("div",ae,[s(z,{src:i.imagePreview||r.resolveImageUrl(i.form.image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),o("div",de,[s(u,{color:"error",size:"small",variant:"text",onClick:r.removeImage,"prepend-icon":"mdi-delete"},{default:l(()=>e[23]||(e[23]=[m(" Remove Image ")])),_:1,__:[23]},8,["onClick"])])])):v("",!0),o("div",me,[s(g,{modelValue:i.imageFile,"onUpdate:modelValue":[e[8]||(e[8]=d=>i.imageFile=d),r.handleImageSelect],accept:"image/*",label:"Select Service Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 1200x800px or larger. Max file size: 5MB","persistent-hint":""},{append:l(()=>[i.uploadingImage?(a(),b(F,{key:0,indeterminate:"",color:"primary",size:"24"})):v("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),i.imageFile&&i.imageFile.size>5242880?(a(),b(k,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>e[24]||(e[24]=[m(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[24]})):v("",!0),!i.imagePreview&&!i.imageFile?(a(),p("div",ue," No image selected. Upload an image to display with this service. ")):v("",!0)])])]),_:1})]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[25]||(e[25]=[m("Features")])),_:1,__:[25]}),s(h,{modelValue:i.featuresText,"onUpdate:modelValue":e[9]||(e[9]=d=>i.featuresText=d),variant:"outlined",rows:"4",hint:"Enter one feature per line","persistent-hint":"",onBlur:r.updateFeaturesFromText},null,8,["modelValue","onBlur"]),i.form.features&&i.form.features.length>0?(a(),p("div",ce,[(a(!0),p(B,null,q(i.form.features,(d,O)=>(a(),b(L,{key:O,class:"ma-1",closable:"","onClick:close":J=>r.removeFeature(O)},{default:l(()=>[m(c(d),1)]),_:2},1032,["onClick:close"]))),128))])):v("",!0)]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[26]||(e[26]=[m("Benefits")])),_:1,__:[26]}),s(h,{modelValue:i.benefitsText,"onUpdate:modelValue":e[10]||(e[10]=d=>i.benefitsText=d),variant:"outlined",rows:"4",hint:"Enter one benefit per line","persistent-hint":"",onBlur:r.updateBenefitsFromText},null,8,["modelValue","onBlur"]),i.form.benefits&&i.form.benefits.length>0?(a(),p("div",ge,[(a(!0),p(B,null,q(i.form.benefits,(d,O)=>(a(),b(L,{key:O,class:"ma-1",closable:"","onClick:close":J=>r.removeBenefit(O),color:"success",variant:"flat"},{default:l(()=>[m(c(d),1)]),_:2},1032,["onClick:close"]))),128))])):v("",!0)]),_:1})]),_:1})])]),_:1}),s(T,{value:"seo"},{default:l(()=>[o("div",fe,[s(k,{type:"info",variant:"tonal",class:"mb-6",density:"compact"},{default:l(()=>e[27]||(e[27]=[o("div",{class:"text-body-2"},[o("strong",null,"SEO Best Practices:"),m(" Fill in these fields to improve your service visibility in search engines and social media. If left empty, default values from the service title and description will be used. ")],-1)])),_:1,__:[27]}),s(V,null,{default:l(()=>[s(y,{cols:"12"},{default:l(()=>[s(x,{modelValue:i.form.meta_title,"onUpdate:modelValue":e[11]||(e[11]=d=>i.form.meta_title=d),label:"Meta Title",variant:"outlined",hint:"SEO title for search engines (recommended: 50-60 characters)","persistent-hint":"",counter:60,color:r.getMetaTitleColor(),"prepend-inner-icon":"mdi-format-title"},{append:l(()=>[s(u,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateMetaTitle,disabled:!i.form.title,title:"Auto-generate from service title"},null,8,["onClick","disabled"])]),_:1},8,["modelValue","color"]),!i.form.meta_title&&r.suggestedMetaTitle?(a(),b(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",pe,[o("span",he,[e[28]||(e[28]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaTitle),1)]),s(u,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaTitle,class:"ml-2"},{default:l(()=>e[29]||(e[29]=[m(" Apply ")])),_:1,__:[29]},8,["onClick"])])]),_:1})):v("",!0),o("div",{class:H(["text-caption",r.getMetaTitleColor()+"--text"])},[m(c(i.form.meta_title.length)+"/60 characters ",1),i.form.meta_title.length<50?(a(),p("span",ve," (Too short - recommended: 50-60) ")):i.form.meta_title.length>60?(a(),p("span",_e," (Too long - may be truncated) ")):(a(),p("span",be,"✓ Good length"))],2)]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(h,{modelValue:i.form.meta_description,"onUpdate:modelValue":e[12]||(e[12]=d=>i.form.meta_description=d),label:"Meta Description",variant:"outlined",rows:"4",hint:"SEO description for search results (recommended: 150-160 characters)","persistent-hint":"",counter:160,color:r.getMetaDescriptionColor(),"prepend-inner-icon":"mdi-text"},{append:l(()=>[s(u,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateMetaDescription,disabled:!i.form.short_description,title:"Auto-generate from short description"},null,8,["onClick","disabled"])]),_:1},8,["modelValue","color"]),!i.form.meta_description&&r.suggestedMetaDescription?(a(),b(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",ye,[o("span",we,[e[30]||(e[30]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaDescription),1)]),s(u,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaDescription},{default:l(()=>e[31]||(e[31]=[m(" Apply ")])),_:1,__:[31]},8,["onClick"])])]),_:1})):v("",!0),o("div",{class:H(["text-caption",r.getMetaDescriptionColor()+"--text"])},[m(c(i.form.meta_description.length)+"/160 characters ",1),i.form.meta_description.length<120?(a(),p("span",xe," (Too short - recommended: 150-160) ")):i.form.meta_description.length>160?(a(),p("span",Se," (Too long - may be truncated) ")):(a(),p("span",ke,"✓ Good length"))],2)]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(x,{modelValue:i.form.meta_keywords,"onUpdate:modelValue":e[13]||(e[13]=d=>i.form.meta_keywords=d),label:"Meta Keywords",variant:"outlined",hint:"Comma-separated keywords for SEO (e.g., power backup, UPS systems, battery)","persistent-hint":"","prepend-inner-icon":"mdi-tag-multiple"},{append:l(()=>[s(u,{icon:"mdi-auto-fix",size:"small",variant:"text",onClick:r.generateMetaKeywords,disabled:!i.form.title&&!i.form.short_description&&i.form.features.length===0,title:"Auto-generate from title, description, and features"},null,8,["onClick","disabled"])]),_:1},8,["modelValue"]),!i.form.meta_keywords&&r.suggestedMetaKeywords?(a(),b(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",Ie,[o("span",Fe,[e[32]||(e[32]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaKeywords),1)]),s(u,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaKeywords},{default:l(()=>e[33]||(e[33]=[m(" Apply ")])),_:1,__:[33]},8,["onClick"])])]),_:1})):v("",!0),o("div",Ve,c((i.form.meta_keywords||"").split(",").filter(d=>d.trim()).length)+" keywords entered ",1)]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(S,{class:"my-4"}),e[34]||(e[34]=o("h3",{class:"text-h6 font-weight-bold mb-4"},"Open Graph (Social Media)",-1)),e[35]||(e[35]=o("p",{class:"text-body-2 text-medium-emphasis mb-4"}," This image will be displayed when your service is shared on social media platforms like Facebook, Twitter, LinkedIn, etc. ",-1))]),_:1,__:[34,35]}),s(y,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[36]||(e[36]=[m("Open Graph Image")])),_:1,__:[36]}),s(U,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",Ce,[i.ogImagePreview||i.form.og_image?(a(),p("div",De,[s(z,{src:i.ogImagePreview||r.resolveImageUrl(i.form.og_image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),o("div",Te,[s(u,{color:"error",size:"small",variant:"text",onClick:r.removeOgImage,"prepend-icon":"mdi-delete"},{default:l(()=>e[37]||(e[37]=[m(" Remove Image ")])),_:1,__:[37]},8,["onClick"])]),e[38]||(e[38]=o("div",{class:"text-caption text-medium-emphasis mt-2"}," Recommended: 1200x630px (1.91:1 ratio) ",-1))])):v("",!0),o("div",Pe,[s(g,{modelValue:i.ogImageFile,"onUpdate:modelValue":[e[14]||(e[14]=d=>i.ogImageFile=d),r.handleOgImageSelect],accept:"image/*",label:"Select Open Graph Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 1200x630px. Max file size: 5MB","persistent-hint":""},{append:l(()=>[i.uploadingOgImage?(a(),b(F,{key:0,indeterminate:"",color:"primary",size:"24"})):v("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),i.ogImageFile&&i.ogImageFile.size>5242880?(a(),b(k,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>e[39]||(e[39]=[m(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[39]})):v("",!0),!i.ogImagePreview&&!i.ogImageFile?(a(),p("div",Ee," No image selected. If not provided, the service image will be used. ")):v("",!0)])])]),_:1})]),_:1}),s(y,{cols:"12"},{default:l(()=>[s(S,{class:"my-4"}),e[40]||(e[40]=o("h3",{class:"text-h6 font-weight-bold mb-4"},"Search Engine Preview",-1)),s(U,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",Me,[o("div",ze,c(r.getPreviewUrl()),1),o("div",{class:H(["search-title mb-1 text-h6",r.getMetaTitleColor()+"--text"]),style:{color:"#1a0dab",cursor:"pointer"}},c(r.getPreviewTitle()),3),o("div",{class:H(["search-description text-body-2",r.getMetaDescriptionColor()+"--text"]),style:{color:"#545454"}},c(r.getPreviewDescription()),3)])]),_:1})]),_:1,__:[40]})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1},512))]),_:1}),s(W,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[s(N),s(u,{variant:"text",onClick:r.closeDialog,disabled:i.saving},{default:l(()=>e[41]||(e[41]=[m("Cancel")])),_:1,__:[41]},8,["onClick","disabled"]),s(u,{color:"primary",variant:"flat",onClick:r.saveService,loading:i.saving},{default:l(()=>[m(c(f.editingService?"Update":"Create")+" Service ",1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Ae=R($,[["render",Ue],["__scopeId","data-v-e55e9d39"]]),Oe={name:"ServiceDetailsDialog",props:{modelValue:{type:Boolean,default:!1},serviceId:{type:[Number,String],default:null}},emits:["update:modelValue","edit"],data(){return{loading:!1,service:null,tab:"basic"}},computed:{dialog:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},watch:{modelValue(t){t&&this.serviceId&&this.loadService()},serviceId(){this.dialog&&this.serviceId&&this.loadService()}},methods:{async loadService(){if(this.serviceId){this.loading=!0,this.service=null,this.tab="basic";try{const e=(await P.get(`/api/v1/services/${this.serviceId}`,{headers:this.getAuthHeaders()})).data;if(!e)throw new Error("No service data received");this.service=e}catch(t){console.error("Failed to load service details:",t),alert("Failed to load service details. Please try again."),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){this.dialog=!1,this.service=null,this.tab="basic"},handleEdit(){this.service&&(this.$emit("edit",this.service),this.closeDialog())},getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}},formatDateTime(t){return t?new Date(t).toLocaleString():"-"}}},Be={class:"d-flex align-center"},qe={key:0,class:"d-flex align-center justify-center pa-12"},Le={class:"text-center"},He={key:1},Re={class:"text-h6 font-weight-bold mb-4"},je={class:"text-body-1 mb-4"},Ke={class:"text-body-1 mb-4"},Ge={class:"text-body-1 mb-4"},Ne={class:"text-body-1 mb-4"},We={key:1,class:"text-grey"},Qe={class:"text-body-1 mb-4"},Je={class:"mb-4"},Xe={class:"mb-4"},Ye={class:"mb-4"},Ze={class:"text-body-1 mb-4"},$e={class:"text-body-1 mb-4"},et=["innerHTML"],tt={class:"text-body-1 mb-4"},it={class:"text-body-1 mb-4"},st={class:"text-body-1 mb-4"};function lt(t,e,f,_,i,r){const u=n("v-icon"),w=n("v-btn"),F=n("v-card-title"),E=n("v-progress-circular"),M=n("v-tab"),x=n("v-tabs"),y=n("v-divider"),h=n("v-col"),I=n("v-chip"),D=n("v-row"),V=n("v-window-item"),T=n("v-img"),C=n("v-window"),z=n("v-card-text"),g=n("v-spacer"),k=n("v-card-actions"),U=n("v-card"),L=n("v-dialog");return a(),b(L,{modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=S=>r.dialog=S),"max-width":"1200",scrollable:""},{default:l(()=>[s(U,null,{default:l(()=>[s(F,{class:"d-flex align-center justify-space-between bg-info text-white pa-4"},{default:l(()=>[o("div",Be,[s(u,{icon:"mdi-eye",class:"mr-3"}),e[3]||(e[3]=o("span",{class:"text-h5 font-weight-bold"},"Service Details",-1))]),s(w,{icon:"mdi-close",variant:"text",color:"white",onClick:r.closeDialog,disabled:i.loading},null,8,["onClick","disabled"])]),_:1}),s(z,{class:"pa-0"},{default:l(()=>[i.loading?(a(),p("div",qe,[o("div",Le,[s(E,{indeterminate:"",color:"info",size:"64"}),e[4]||(e[4]=o("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading service details...",-1))])])):i.service?(a(),p("div",He,[s(x,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=S=>i.tab=S),color:"info","bg-color":"grey-lighten-4"},{default:l(()=>[s(M,{value:"basic"},{default:l(()=>[s(u,{icon:"mdi-information",class:"mr-2"}),e[5]||(e[5]=m(" Basic Info "))]),_:1,__:[5]}),s(M,{value:"content"},{default:l(()=>[s(u,{icon:"mdi-text",class:"mr-2"}),e[6]||(e[6]=m(" Content "))]),_:1,__:[6]}),s(M,{value:"seo"},{default:l(()=>[s(u,{icon:"mdi-search-web",class:"mr-2"}),e[7]||(e[7]=m(" SEO & Meta "))]),_:1,__:[7]})]),_:1},8,["modelValue"]),s(y),s(C,{modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=S=>i.tab=S),class:"pa-6"},{default:l(()=>[s(V,{value:"basic"},{default:l(()=>[s(D,null,{default:l(()=>[s(h,{cols:"12"},{default:l(()=>[e[8]||(e[8]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Service Title",-1)),o("div",Re,c(i.service.title||"-"),1)]),_:1,__:[8]}),s(h,{cols:"12",md:"6"},{default:l(()=>[e[9]||(e[9]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Slug",-1)),o("div",je,[s(I,{size:"small",variant:"outlined"},{default:l(()=>[m(c(i.service.slug||"-"),1)]),_:1})])]),_:1,__:[9]}),s(h,{cols:"12",md:"6"},{default:l(()=>[e[10]||(e[10]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Order",-1)),o("div",Ke,c(i.service.order||0),1)]),_:1,__:[10]}),s(h,{cols:"12"},{default:l(()=>[e[11]||(e[11]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Short Description",-1)),o("div",Ge,c(i.service.short_description||"-"),1)]),_:1,__:[11]}),s(h,{cols:"12",md:"6"},{default:l(()=>[e[12]||(e[12]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Icon",-1)),o("div",Ne,[i.service.icon?(a(),b(u,{key:0,icon:i.service.icon,size:"large"},null,8,["icon"])):(a(),p("span",We,"-"))])]),_:1,__:[12]}),s(h,{cols:"12",md:"6"},{default:l(()=>[e[13]||(e[13]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Price Range",-1)),o("div",Qe,c(i.service.price_range||"-"),1)]),_:1,__:[13]}),s(h,{cols:"12"},{default:l(()=>[e[14]||(e[14]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Status",-1)),o("div",Je,[s(I,{color:i.service.published?"success":"error",size:"small"},{default:l(()=>[m(c(i.service.published?"Published":"Draft"),1)]),_:1},8,["color"])])]),_:1,__:[14]}),i.service.features&&i.service.features.length>0?(a(),b(h,{key:0,cols:"12"},{default:l(()=>[e[15]||(e[15]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Features",-1)),o("div",Xe,[(a(!0),p(B,null,q(i.service.features,(S,A)=>(a(),b(I,{key:A,class:"ma-1",size:"small",color:"primary",variant:"flat"},{default:l(()=>[m(c(S),1)]),_:2},1024))),128))])]),_:1,__:[15]})):v("",!0),i.service.benefits&&i.service.benefits.length>0?(a(),b(h,{key:1,cols:"12"},{default:l(()=>[e[16]||(e[16]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Benefits",-1)),o("div",Ye,[(a(!0),p(B,null,q(i.service.benefits,(S,A)=>(a(),b(I,{key:A,class:"ma-1",size:"small",color:"success",variant:"flat"},{default:l(()=>[m(c(S),1)]),_:2},1024))),128))])]),_:1,__:[16]})):v("",!0),i.service.created_at?(a(),b(h,{key:2,cols:"12"},{default:l(()=>[e[17]||(e[17]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Created At",-1)),o("div",Ze,c(r.formatDateTime(i.service.created_at)),1)]),_:1,__:[17]})):v("",!0),i.service.updated_at?(a(),b(h,{key:3,cols:"12"},{default:l(()=>[e[18]||(e[18]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Updated At",-1)),o("div",$e,c(r.formatDateTime(i.service.updated_at)),1)]),_:1,__:[18]})):v("",!0)]),_:1})]),_:1}),s(V,{value:"content"},{default:l(()=>[s(D,null,{default:l(()=>[i.service.image?(a(),b(h,{key:0,cols:"12"},{default:l(()=>[e[19]||(e[19]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Service Image",-1)),s(T,{src:i.service.image,"max-width":"600","max-height":"400",class:"rounded elevation-2 mb-4",cover:""},null,8,["src"])]),_:1,__:[19]})):v("",!0),s(h,{cols:"12"},{default:l(()=>[e[20]||(e[20]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Full Description",-1)),o("div",{class:"text-body-1",innerHTML:i.service.description||"-"},null,8,et)]),_:1,__:[20]})]),_:1})]),_:1}),s(V,{value:"seo"},{default:l(()=>[s(D,null,{default:l(()=>[s(h,{cols:"12"},{default:l(()=>[e[21]||(e[21]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Title",-1)),o("div",tt,c(i.service.meta_title||"-"),1)]),_:1,__:[21]}),s(h,{cols:"12"},{default:l(()=>[e[22]||(e[22]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Description",-1)),o("div",it,c(i.service.meta_description||"-"),1)]),_:1,__:[22]}),s(h,{cols:"12"},{default:l(()=>[e[23]||(e[23]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Keywords",-1)),o("div",st,c(i.service.meta_keywords||"-"),1)]),_:1,__:[23]}),i.service.og_image?(a(),b(h,{key:0,cols:"12"},{default:l(()=>[e[24]||(e[24]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Open Graph Image",-1)),s(T,{src:i.service.og_image,"max-width":"600","max-height":"400",class:"rounded elevation-2 mb-4",cover:""},null,8,["src"])]),_:1,__:[24]})):v("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):v("",!0)]),_:1}),s(k,{class:"pa-4 bg-grey-lighten-5"},{default:l(()=>[s(g),s(w,{color:"primary","prepend-icon":"mdi-pencil",onClick:r.handleEdit},{default:l(()=>e[25]||(e[25]=[m(" Edit Service ")])),_:1,__:[25]},8,["onClick"]),s(w,{color:"grey",variant:"text",onClick:r.closeDialog},{default:l(()=>e[26]||(e[26]=[m("Close")])),_:1,__:[26]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const ot=R(Oe,[["render",lt]]),rt={components:{ServiceFormDialog:Ae,ServiceDetailsDialog:ot},mixins:[j],data(){return{services:[],showDialog:!1,editingService:null,showDetailsDialog:!1,selectedServiceId:null,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadServices()},methods:{async loadServices(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.publishedFilter!==null&&(t.published=this.publishedFilter);const e=await P.get("/api/v1/services",{params:t,headers:this.getAuthHeaders()});this.services=e.data.data||[],this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load services")}finally{this.loading=!1}},openDialog(t=null){this.editingService=t,this.showDialog=!0},editService(t){this.openDialog(t)},viewService(t){this.selectedServiceId=t.id,this.showDetailsDialog=!0},handleEditFromDetails(t){this.showDetailsDialog=!1,this.$nextTick(()=>{this.openDialog(t)})},handleServiceSaved(){this.loadServices()},async deleteService(t){if(confirm("Are you sure you want to delete this service?"))try{await P.delete(`/api/v1/services/${t}`,{headers:this.getAuthHeaders()}),this.showSuccess("Service deleted successfully"),await this.loadServices()}catch(e){this.handleApiError(e,"Error deleting service")}},onPerPageChange(){this.resetPagination(),this.loadServices()},onSort(t){this.handleSort(t),this.loadServices()}}},nt={class:"page-header"},at={class:"text-caption text-grey"},dt={key:0},mt={class:"d-flex align-center"},ut={class:"d-flex align-center"},ct={class:"d-flex align-center"},gt={key:0},ft={class:"d-flex justify-space-between align-center mt-4"},pt={class:"text-caption text-grey"},ht={key:0},vt={key:1};function _t(t,e,f,_,i,r){const u=n("v-btn"),w=n("v-select"),F=n("v-col"),E=n("v-text-field"),M=n("v-row"),x=n("v-card-text"),y=n("v-card"),h=n("v-card-title"),I=n("v-icon"),D=n("v-chip"),V=n("v-table"),T=n("v-pagination"),C=n("ServiceFormDialog"),z=n("ServiceDetailsDialog");return a(),p("div",null,[o("div",nt,[e[11]||(e[11]=o("h1",{class:"text-h4 page-title"},"Services Management",-1)),s(u,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=g=>r.openDialog()),class:"add-button"},{default:l(()=>e[10]||(e[10]=[m("Create Service")])),_:1,__:[10]})]),s(y,{class:"mb-4"},{default:l(()=>[s(x,null,{default:l(()=>[s(M,null,{default:l(()=>[s(F,{cols:"12",md:"4"},{default:l(()=>[s(w,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=g=>t.perPage=g),r.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(F,{cols:"12",md:"4"},{default:l(()=>[s(w,{modelValue:i.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=g=>i.publishedFilter=g),r.loadServices],items:i.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(F,{cols:"12",md:"4"},{default:l(()=>[s(E,{modelValue:t.search,"onUpdate:modelValue":[e[3]||(e[3]=g=>t.search=g),r.loadServices],label:"Search services","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),s(y,null,{default:l(()=>[s(h,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[13]||(e[13]=o("span",null,"Services",-1)),o("span",at,[e[12]||(e[12]=m(" Total Records: ")),o("strong",null,c(t.pagination.total||0),1),i.services.length>0?(a(),p("span",dt," | Showing "+c((t.currentPage-1)*t.perPage+1)+" to "+c(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+c(t.pagination.total),1)):v("",!0)])]),_:1,__:[13]}),s(x,null,{default:l(()=>[s(V,null,{default:l(()=>[o("thead",null,[o("tr",null,[o("th",{class:"sortable",onClick:e[4]||(e[4]=g=>r.onSort("title"))},[o("div",mt,[e[14]||(e[14]=m(" Title ")),s(I,{icon:t.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[5]||(e[5]=g=>r.onSort("slug"))},[o("div",ut,[e[15]||(e[15]=m(" Slug ")),s(I,{icon:t.getSortIcon("slug"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[6]||(e[6]=g=>r.onSort("published"))},[o("div",ct,[e[16]||(e[16]=m(" Published ")),s(I,{icon:t.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[17]||(e[17]=o("th",null,"Actions",-1))])]),o("tbody",null,[(a(!0),p(B,null,q(i.services,g=>(a(),p("tr",{key:g.id},[o("td",null,c(g.title),1),o("td",null,[s(D,{size:"small",variant:"outlined"},{default:l(()=>[m(c(g.slug),1)]),_:2},1024)]),o("td",null,[s(D,{color:g.published?"success":"error",size:"small"},{default:l(()=>[m(c(g.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),o("td",null,[s(u,{size:"small",icon:"mdi-eye",onClick:k=>r.viewService(g),variant:"text",color:"info",title:"View Service"},null,8,["onClick"]),s(u,{size:"small",icon:"mdi-pencil",onClick:k=>r.editService(g),variant:"text",title:"Edit Service"},null,8,["onClick"]),s(u,{size:"small",icon:"mdi-delete",onClick:k=>r.deleteService(g.id),variant:"text",color:"error",title:"Delete Service"},null,8,["onClick"])])]))),128)),i.services.length===0?(a(),p("tr",gt,e[18]||(e[18]=[o("td",{colspan:"4",class:"text-center py-4"},"No services found",-1)]))):v("",!0)])]),_:1}),o("div",ft,[o("div",pt,[i.services.length>0?(a(),p("span",ht," Showing "+c((t.currentPage-1)*t.perPage+1)+" to "+c(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+c(t.pagination.total)+" records ",1)):(a(),p("span",vt," No records found "))]),t.pagination.last_page>1?(a(),b(T,{key:0,modelValue:t.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=g=>t.currentPage=g),r.loadServices],length:t.pagination.last_page},null,8,["modelValue","length","onUpdate:modelValue"])):v("",!0)])]),_:1})]),_:1}),s(C,{modelValue:i.showDialog,"onUpdate:modelValue":e[8]||(e[8]=g=>i.showDialog=g),"editing-service":i.editingService,onSaved:r.handleServiceSaved},null,8,["modelValue","editing-service","onSaved"]),s(z,{modelValue:i.showDetailsDialog,"onUpdate:modelValue":e[9]||(e[9]=g=>i.showDetailsDialog=g),"service-id":i.selectedServiceId,onEdit:r.handleEditFromDetails},null,8,["modelValue","service-id","onEdit"])])}const St=R(rt,[["render",_t]]);export{St as default};
