import{_ as L,g as C,c as V,w as o,b as t,r as n,a as s,d as _,f as u,h as D,e as U,F as M,o as d,t as y}from"./app-DsVQXQQK.js";import{a as R}from"./adminPaginationMixin-DN7Wb3ng.js";import{Q as J}from"./quill.snow-CCbvmaOf.js";import{r as z,n as H}from"./uploads-CnEkgyD_.js";const K={name:"AboutFormDialog",mixins:[R],props:{modelValue:{type:Boolean,default:!1},aboutData:{type:Object,default:null}},emits:["update:modelValue","saved"],data(){return{activeTab:"hero",loading:!1,saving:!1,storyImageFile:null,storyImagePreview:null,uploadingStoryImage:!1,storyQuillEditor:null,form:{hero:{overline:"WHO WE ARE",title:"Empowering Your World",subtitle:"We are dedicated to providing reliable, efficient, and sustainable power solutions for businesses and homes across the globe."},story:{overline:"OUR STORY",title:"Decades of Excellence in Power Solutions",description:"",image:"",stats:[]},valuesTitle:"Our Core Values",valuesSubtitle:"The principles that guide every project we undertake.",values:[],teamOverline:"OUR TEAM",teamTitle:"Meet the Experts",team:[]}}},computed:{dialog:{get(){return this.modelValue},set(i){this.$emit("update:modelValue",i)}}},watch:{modelValue(i){i?(this.activeTab="hero",this.aboutData?this.loadAboutForEdit():this.resetForm()):this.storyQuillEditor&&this.destroyStoryEditor()},aboutData:{handler(i){i&&this.dialog?this.loadAboutForEdit():!i&&this.dialog&&this.resetForm()},immediate:!1},activeTab(i){i==="story"&&this.dialog&&!this.loading?this.$nextTick(()=>{setTimeout(()=>{this.initStoryEditor()},300)}):i!=="story"&&this.storyQuillEditor&&this.destroyStoryEditor()}},methods:{resetForm(){this.storyQuillEditor&&this.destroyStoryEditor(),this.form={hero:{overline:"WHO WE ARE",title:"Empowering Your World",subtitle:"We are dedicated to providing reliable, efficient, and sustainable power solutions for businesses and homes across the globe."},story:{overline:"OUR STORY",title:"Decades of Excellence in Power Solutions",description:"",image:"",stats:[]},valuesTitle:"Our Core Values",valuesSubtitle:"The principles that guide every project we undertake.",values:[],teamOverline:"OUR TEAM",teamTitle:"Meet the Experts",team:[]},this.storyImageFile=null,this.storyImagePreview=null},loadAboutForEdit(){if(!this.aboutData){this.resetForm();return}this.loading=!0;try{this.aboutData.hero&&(this.form.hero={...this.aboutData.hero}),this.aboutData.story&&(this.form.story={overline:this.aboutData.story.overline||"",title:this.aboutData.story.title||"",description:this.aboutData.story.description||"",image:this.aboutData.story.image||"",stats:this.aboutData.story.stats?[...this.aboutData.story.stats]:[]},this.form.story.image&&(this.storyImagePreview=this.resolveImageUrl(this.form.story.image))),this.form.valuesTitle=this.aboutData.valuesTitle||"Our Core Values",this.form.valuesSubtitle=this.aboutData.valuesSubtitle||"",this.form.values=this.aboutData.values?this.aboutData.values.map(i=>({title:i.title||"",description:i.description||i.desc||"",icon:i.icon||""})):[],this.form.teamOverline=this.aboutData.teamOverline||"OUR TEAM",this.form.teamTitle=this.aboutData.teamTitle||"Meet the Experts",this.form.team=this.aboutData.team?this.aboutData.team.map(i=>({name:i.name||"",role:i.role||"",image:i.image||"",linkedin:i.linkedin||"",twitter:i.twitter||"",imagePreview:i.image?this.resolveImageUrl(i.image):null,imageFile:null,uploadingImage:!1})):[],this.$nextTick(()=>{this.activeTab==="story"&&setTimeout(()=>{this.initStoryEditor()},500)})}catch(i){console.error("Error loading about data:",i),this.handleApiError(i,"Failed to load about content")}finally{this.loading=!1}},initStoryEditor(){this.storyQuillEditor&&this.destroyStoryEditor(),this.$nextTick(()=>{const i=this.$refs.storyEditorContainer;if(!(!i||this.activeTab!=="story"))try{i.innerHTML="",this.storyQuillEditor=new J(i,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link"],["clean"]]},placeholder:"Enter story description..."});const e=this.form.story.description||"";e&&setTimeout(()=>{this.storyQuillEditor&&(this.storyQuillEditor.root.innerHTML=e)},100),this.storyQuillEditor.on("text-change",()=>{if(!this.storyQuillEditor)return;const r=this.storyQuillEditor.root.innerHTML.trim();r&&r!=="<p><br></p>"&&r!=="<p></p>"?this.form.story.description=this.storyQuillEditor.root.innerHTML:(!r||r==="<p><br></p>"||r==="<p></p>")&&(this.form.story.description="")}),this.storyQuillEditor.on("selection-change",()=>{if(!this.storyQuillEditor)return;const r=this.storyQuillEditor.root.innerHTML.trim();r&&r!=="<p><br></p>"&&r!=="<p></p>"&&(this.form.story.description=this.storyQuillEditor.root.innerHTML)})}catch(e){console.error("Error initializing Quill editor:",e),this.showError("Failed to initialize text editor")}})},destroyStoryEditor(){if(this.storyQuillEditor){try{if(this.storyQuillEditor.root&&this.storyQuillEditor.root.innerHTML){const i=this.storyQuillEditor.root.innerHTML.trim();i&&i!=="<p><br></p>"&&i!=="<p></p>"&&(this.form.story.description=this.storyQuillEditor.root.innerHTML)}}catch(i){console.error("Error saving editor content:",i)}try{this.storyQuillEditor=null,this.$refs.storyEditorContainer&&(this.$refs.storyEditorContainer.innerHTML="")}catch(i){console.error("Error destroying editor:",i),this.storyQuillEditor=null}}else this.$refs.storyEditorContainer&&(this.$refs.storyEditorContainer.innerHTML="")},handleStoryImageSelect(i){if(i){const e=Array.isArray(i)?i[0]:i;if(e&&e.size>5242880){this.showError("Image file size must be less than 5MB"),this.storyImageFile=null;return}if(e&&!e.type.startsWith("image/")){this.showError("Please select a valid image file"),this.storyImageFile=null;return}if(this.storyImageFile=e,e){const r=new FileReader;r.onload=f=>{this.storyImagePreview=f.target.result},r.onerror=()=>{this.showError("Failed to read image file"),this.storyImageFile=null,this.storyImagePreview=null},r.readAsDataURL(e)}else this.storyImagePreview=null}else this.storyImageFile=null,this.form.story.image?this.storyImagePreview=this.resolveImageUrl(this.form.story.image):this.storyImagePreview=null},removeStoryImage(){confirm("Are you sure you want to remove this image?")&&(this.storyImagePreview=null,this.storyImageFile=null,this.form.story.image="")},async uploadStoryImage(){var e,r,f,l;if(!this.storyImageFile)return null;const i=Array.isArray(this.storyImageFile)?this.storyImageFile[0]:this.storyImageFile;if(!i)return null;this.uploadingStoryImage=!0;try{const m=new FormData;m.append("image",i),m.append("folder","about");const h=await C.post("/api/v1/upload/image",m,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(h.data.success||h.data.path){const w=H(h.data.path||h.data.url);return this.form.story.image=w,this.storyImagePreview=z(h.data.url||w),this.storyImageFile=null,w}else throw new Error(h.data.message||"Failed to upload image")}catch(m){const h=((r=(e=m.response)==null?void 0:e.data)==null?void 0:r.message)||((l=(f=m.response)==null?void 0:f.data)==null?void 0:l.error)||"Failed to upload image";throw new Error(h)}finally{this.uploadingStoryImage=!1}},addStat(){this.form.story.stats.push({value:"",label:""})},removeStat(i){this.form.story.stats.splice(i,1)},addValue(){this.form.values.push({title:"",description:"",icon:"mdi-check-circle"})},removeValue(i){this.form.values.splice(i,1)},addTeamMember(){this.form.team.push({name:"",role:"",image:"",linkedin:"",twitter:"",imagePreview:null})},removeTeamMember(i){this.form.team.splice(i,1)},handleTeamMemberImageSelect(i,e){if(i){const r=Array.isArray(i)?i[0]:i;if(r&&r.size>5242880){this.showError("Image file size must be less than 5MB"),this.form.team[e].imageFile=null;return}if(r&&!r.type.startsWith("image/")){this.showError("Please select a valid image file"),this.form.team[e].imageFile=null;return}if(this.form.team[e].imageFile=r,r){const f=new FileReader;f.onload=l=>{this.$set(this.form.team[e],"imagePreview",l.target.result)},f.onerror=()=>{this.showError("Failed to read image file"),this.form.team[e].imageFile=null,this.$set(this.form.team[e],"imagePreview",null)},f.readAsDataURL(r)}else this.$set(this.form.team[e],"imagePreview",null)}else this.form.team[e].imageFile=null,this.form.team[e].image?this.$set(this.form.team[e],"imagePreview",this.resolveImageUrl(this.form.team[e].image)):this.$set(this.form.team[e],"imagePreview",null)},removeTeamMemberImage(i){confirm("Are you sure you want to remove this image?")&&(this.$set(this.form.team[i],"imagePreview",null),this.form.team[i].imageFile=null,this.form.team[i].image="")},async uploadTeamMemberImage(i){var f,l,m,h;const e=this.form.team[i];if(!e.imageFile)return null;const r=Array.isArray(e.imageFile)?e.imageFile[0]:e.imageFile;if(!r)return null;e.uploadingImage=!0;try{const w=new FormData;w.append("image",r),w.append("folder","about/team"),e.name&&w.append("prefix",e.name);const b=await C.post("/api/v1/upload/image",w,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(b.data.success||b.data.path){const I=H(b.data.path||b.data.url);return e.image=I,this.$set(e,"imagePreview",z(b.data.url||I)),e.imageFile=null,I}else throw new Error(b.data.message||"Failed to upload image")}catch(w){const b=((l=(f=w.response)==null?void 0:f.data)==null?void 0:l.message)||((h=(m=w.response)==null?void 0:m.data)==null?void 0:h.error)||"Failed to upload image";throw new Error(b)}finally{e.uploadingImage=!1}},async saveAbout(){var e;if(!this.$refs.formRef){this.showError("Form reference not found");return}const{valid:i}=await this.$refs.formRef.validate();if(!i){this.showError("Please fill in all required fields");return}if(this.storyQuillEditor&&this.storyQuillEditor.root){const r=this.storyQuillEditor.root.innerHTML.trim();r&&r!=="<p><br></p>"&&r!=="<p></p>"?this.form.story.description=this.storyQuillEditor.root.innerHTML:this.form.story.description=""}this.saving=!0;try{if(this.storyImageFile)try{await this.uploadStoryImage()}catch(f){this.handleApiError(f,"Failed to upload story image"),this.saving=!1;return}for(let f=0;f<this.form.team.length;f++)if(this.form.team[f].imageFile)try{await this.uploadTeamMemberImage(f)}catch(l){this.handleApiError(l,`Failed to upload image for ${this.form.team[f].name||"team member"}`),this.saving=!1;return}const r={...this.form};try{await C.put("/api/v1/about",r,{headers:this.getAuthHeaders()}),this.showSuccess("About content saved successfully"),this.$emit("saved"),this.closeDialog()}catch(f){((e=f.response)==null?void 0:e.status)===404?(await C.post("/api/v1/about",r,{headers:this.getAuthHeaders()}),this.showSuccess("About content created successfully"),this.$emit("saved"),this.closeDialog()):this.handleApiError(f,"Failed to save about content")}}catch(r){this.handleApiError(r,"Failed to save about content")}finally{this.saving=!1}},closeDialog(){this.storyQuillEditor&&this.destroyStoryEditor(),this.dialog=!1},resolveImageUrl(i){return z(i)}},beforeUnmount(){this.storyQuillEditor&&this.destroyStoryEditor()}},X={key:0,class:"d-flex align-center justify-center pa-12"},Z={class:"text-center"},$={class:"pa-6"},ee={class:"pa-6"},te={class:"rich-text-editor-wrapper"},oe={ref:"storyEditorContainer",class:"rich-text-editor"},le={class:"d-flex flex-column flex-md-row align-start"},ie={key:0,class:"mr-md-4 mb-4 mb-md-0"},ae={class:"mt-2"},se={class:"flex-grow-1"},re={key:1,class:"text-caption text-medium-emphasis mt-2"},ne={class:"d-flex justify-space-between align-center mb-2"},de={class:"pa-6"},ue={class:"d-flex justify-space-between align-center mb-2"},me={class:"pa-6"},ce={class:"d-flex justify-space-between align-center mb-2"},pe={class:"d-flex flex-column flex-md-row align-start"},he={key:0,class:"mr-md-4 mb-4 mb-md-0"},fe={class:"mt-2"},ve={class:"flex-grow-1"},ge={key:1,class:"text-caption text-medium-emphasis mt-2"};function ye(i,e,r,f,l,m){const h=n("v-btn"),w=n("v-card-title"),b=n("v-progress-circular"),I=n("v-tab"),P=n("v-tabs"),v=n("v-text-field"),p=n("v-col"),S=n("v-textarea"),x=n("v-row"),k=n("v-window-item"),F=n("v-label"),Q=n("v-img"),O=n("v-file-input"),g=n("v-alert"),E=n("v-card"),A=n("v-divider"),N=n("v-icon"),W=n("v-window"),B=n("v-form"),j=n("v-card-text"),q=n("v-spacer"),Y=n("v-card-actions"),G=n("v-dialog");return d(),V(G,{modelValue:m.dialog,"onUpdate:modelValue":e[12]||(e[12]=a=>m.dialog=a),"max-width":"1400",scrollable:"",persistent:""},{default:o(()=>[t(E,null,{default:o(()=>[t(w,{class:"d-flex align-center justify-space-between bg-primary text-white pa-4"},{default:o(()=>[e[13]||(e[13]=s("span",{class:"text-h5 font-weight-bold"},"Edit About Page Content",-1)),t(h,{icon:"mdi-close",variant:"text",color:"white",onClick:m.closeDialog,disabled:l.saving||l.loading},null,8,["onClick","disabled"])]),_:1,__:[13]}),t(j,{class:"pa-0"},{default:o(()=>[l.loading?(d(),_("div",X,[s("div",Z,[t(b,{indeterminate:"",color:"primary",size:"64"}),e[14]||(e[14]=s("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading about content...",-1))])])):(d(),V(B,{key:1,ref:"formRef"},{default:o(()=>[t(P,{modelValue:l.activeTab,"onUpdate:modelValue":e[0]||(e[0]=a=>l.activeTab=a),"bg-color":"grey-lighten-4"},{default:o(()=>[t(I,{value:"hero"},{default:o(()=>e[15]||(e[15]=[u("Hero Section")])),_:1,__:[15]}),t(I,{value:"story"},{default:o(()=>e[16]||(e[16]=[u("Our Story")])),_:1,__:[16]}),t(I,{value:"values"},{default:o(()=>e[17]||(e[17]=[u("Core Values")])),_:1,__:[17]}),t(I,{value:"team"},{default:o(()=>e[18]||(e[18]=[u("Team")])),_:1,__:[18]})]),_:1},8,["modelValue"]),t(W,{modelValue:l.activeTab,"onUpdate:modelValue":e[11]||(e[11]=a=>l.activeTab=a)},{default:o(()=>[t(k,{value:"hero"},{default:o(()=>[s("div",$,[t(x,null,{default:o(()=>[t(p,{cols:"12"},{default:o(()=>[t(v,{modelValue:l.form.hero.overline,"onUpdate:modelValue":e[1]||(e[1]=a=>l.form.hero.overline=a),label:"Hero Overline",variant:"outlined",hint:"Small text above the title (e.g., 'WHO WE ARE')","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(v,{modelValue:l.form.hero.title,"onUpdate:modelValue":e[2]||(e[2]=a=>l.form.hero.title=a),label:"Hero Title *",variant:"outlined",rules:[a=>!!a||"Title is required"],hint:"Main heading for the hero section","persistent-hint":""},null,8,["modelValue","rules"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(S,{modelValue:l.form.hero.subtitle,"onUpdate:modelValue":e[3]||(e[3]=a=>l.form.hero.subtitle=a),label:"Hero Subtitle *",variant:"outlined",rows:"3",rules:[a=>!!a||"Subtitle is required"],hint:"Subtitle text below the main title","persistent-hint":""},null,8,["modelValue","rules"])]),_:1})]),_:1})])]),_:1}),t(k,{value:"story"},{default:o(()=>[s("div",ee,[t(x,null,{default:o(()=>[t(p,{cols:"12"},{default:o(()=>[t(v,{modelValue:l.form.story.overline,"onUpdate:modelValue":e[4]||(e[4]=a=>l.form.story.overline=a),label:"Story Overline",variant:"outlined",hint:"Small text above the story title","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(v,{modelValue:l.form.story.title,"onUpdate:modelValue":e[5]||(e[5]=a=>l.form.story.title=a),label:"Story Title",variant:"outlined",hint:"Main heading for the story section","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(F,{class:"mb-2"},{default:o(()=>e[19]||(e[19]=[u("Story Description")])),_:1,__:[19]}),s("div",te,[s("div",oe,null,512)])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(F,{class:"mb-2"},{default:o(()=>e[20]||(e[20]=[u("Story Image")])),_:1,__:[20]}),t(E,{variant:"outlined",class:"pa-4"},{default:o(()=>[s("div",le,[l.storyImagePreview||l.form.story.image?(d(),_("div",ie,[t(Q,{src:l.storyImagePreview||m.resolveImageUrl(l.form.story.image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),s("div",ae,[t(h,{color:"error",size:"small",variant:"text",onClick:m.removeStoryImage,"prepend-icon":"mdi-delete"},{default:o(()=>e[21]||(e[21]=[u(" Remove Image ")])),_:1,__:[21]},8,["onClick"])])])):D("",!0),s("div",se,[t(O,{modelValue:l.storyImageFile,"onUpdate:modelValue":[e[6]||(e[6]=a=>l.storyImageFile=a),m.handleStoryImageSelect],accept:"image/*",label:"Select Story Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 800x500px. Max file size: 5MB","persistent-hint":""},{append:o(()=>[l.uploadingStoryImage?(d(),V(b,{key:0,indeterminate:"",color:"primary",size:"24"})):D("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),l.storyImageFile&&l.storyImageFile.size>5242880?(d(),V(g,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:o(()=>e[22]||(e[22]=[u(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[22]})):D("",!0),!l.storyImagePreview&&!l.storyImageFile&&!l.form.story.image?(d(),_("div",re," No image selected. Upload an image to display with the story section. ")):D("",!0)])])]),_:1})]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(A,{class:"my-4"}),e[24]||(e[24]=s("h3",{class:"text-h6 font-weight-bold mb-4"},"Statistics",-1)),(d(!0),_(M,null,U(l.form.story.stats,(a,T)=>(d(),_("div",{key:T,class:"mb-4"},[t(E,{variant:"outlined",class:"pa-4"},{default:o(()=>[s("div",ne,[s("strong",null,"Stat "+y(T+1),1),t(h,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:c=>m.removeStat(T)},null,8,["onClick"])]),t(x,null,{default:o(()=>[t(p,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,label:"Value",variant:"outlined",hint:"e.g., 15+, 500+","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(p,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:a.label,"onUpdate:modelValue":c=>a.label=c,label:"Label",variant:"outlined",hint:"e.g., Years Experience","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),t(h,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:m.addStat},{default:o(()=>e[23]||(e[23]=[u("Add Statistic")])),_:1,__:[23]},8,["onClick"])]),_:1,__:[24]})]),_:1})])]),_:1}),t(k,{value:"values"},{default:o(()=>[s("div",de,[t(x,null,{default:o(()=>[t(p,{cols:"12"},{default:o(()=>[t(v,{modelValue:l.form.valuesTitle,"onUpdate:modelValue":e[7]||(e[7]=a=>l.form.valuesTitle=a),label:"Values Section Title",variant:"outlined",hint:"Main heading for the values section","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(S,{modelValue:l.form.valuesSubtitle,"onUpdate:modelValue":e[8]||(e[8]=a=>l.form.valuesSubtitle=a),label:"Values Section Subtitle",variant:"outlined",rows:"2",hint:"Subtitle text for the values section","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(A,{class:"my-4"}),e[26]||(e[26]=s("h3",{class:"text-h6 font-weight-bold mb-4"},"Core Values",-1)),(d(!0),_(M,null,U(l.form.values,(a,T)=>(d(),_("div",{key:T,class:"mb-4"},[t(E,{variant:"outlined",class:"pa-4"},{default:o(()=>[s("div",ue,[s("strong",null,"Value "+y(T+1),1),t(h,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:c=>m.removeValue(T)},null,8,["onClick"])]),t(x,null,{default:o(()=>[t(p,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:a.title,"onUpdate:modelValue":c=>a.title=c,label:"Title *",variant:"outlined",rules:[c=>!!c||"Title is required"],hint:"Value title","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),t(p,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:a.icon,"onUpdate:modelValue":c=>a.icon=c,label:"Icon",variant:"outlined",hint:"Material Design Icon name (e.g., mdi-shield-check)","persistent-hint":"","prepend-inner-icon":"mdi-information-outline"},{append:o(()=>[a.icon?(d(),V(N,{key:0,icon:a.icon,size:"small"},null,8,["icon"])):D("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(p,{cols:"12"},{default:o(()=>[t(S,{modelValue:a.description,"onUpdate:modelValue":c=>a.description=c,label:"Description *",variant:"outlined",rows:"3",rules:[c=>!!c||"Description is required"],hint:"Value description","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),t(h,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:m.addValue},{default:o(()=>e[25]||(e[25]=[u("Add Value")])),_:1,__:[25]},8,["onClick"])]),_:1,__:[26]})]),_:1})])]),_:1}),t(k,{value:"team"},{default:o(()=>[s("div",me,[t(x,null,{default:o(()=>[t(p,{cols:"12"},{default:o(()=>[t(v,{modelValue:l.form.teamOverline,"onUpdate:modelValue":e[9]||(e[9]=a=>l.form.teamOverline=a),label:"Team Section Overline",variant:"outlined",hint:"Small text above the team title","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(v,{modelValue:l.form.teamTitle,"onUpdate:modelValue":e[10]||(e[10]=a=>l.form.teamTitle=a),label:"Team Section Title",variant:"outlined",hint:"Main heading for the team section","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(A,{class:"my-4"}),e[31]||(e[31]=s("h3",{class:"text-h6 font-weight-bold mb-4"},"Team Members",-1)),(d(!0),_(M,null,U(l.form.team,(a,T)=>(d(),_("div",{key:T,class:"mb-4"},[t(E,{variant:"outlined",class:"pa-4"},{default:o(()=>[s("div",ce,[s("strong",null,"Team Member "+y(T+1),1),t(h,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:c=>m.removeTeamMember(T)},null,8,["onClick"])]),t(x,null,{default:o(()=>[t(p,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:a.name,"onUpdate:modelValue":c=>a.name=c,label:"Name *",variant:"outlined",rules:[c=>!!c||"Name is required"],hint:"Team member name","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),t(p,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:a.role,"onUpdate:modelValue":c=>a.role=c,label:"Role *",variant:"outlined",rules:[c=>!!c||"Role is required"],hint:"Team member role","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),t(p,{cols:"12"},{default:o(()=>[t(F,{class:"mb-2"},{default:o(()=>e[27]||(e[27]=[u("Member Image")])),_:1,__:[27]}),t(E,{variant:"outlined",class:"pa-4"},{default:o(()=>[s("div",pe,[a.imagePreview||a.image?(d(),_("div",he,[t(Q,{src:a.imagePreview||m.resolveImageUrl(a.image),"max-width":"150","max-height":"150",class:"rounded elevation-2",cover:""},null,8,["src"]),s("div",fe,[t(h,{color:"error",size:"small",variant:"text",onClick:c=>m.removeTeamMemberImage(T),"prepend-icon":"mdi-delete"},{default:o(()=>e[28]||(e[28]=[u(" Remove Image ")])),_:2,__:[28]},1032,["onClick"])])])):D("",!0),s("div",ve,[t(O,{ref_for:!0,ref:`teamImageFile_${T}`,"onUpdate:modelValue":c=>m.handleTeamMemberImageSelect(c,T),accept:"image/*",label:"Select Team Member Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended: Square image. Max file size: 5MB","persistent-hint":""},{append:o(()=>[a.uploadingImage?(d(),V(b,{key:0,indeterminate:"",color:"primary",size:"24"})):D("",!0)]),_:2},1032,["onUpdate:modelValue"]),a.imageFile&&a.imageFile.size>5242880?(d(),V(g,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:o(()=>e[29]||(e[29]=[u(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[29]})):D("",!0),!a.imagePreview&&!a.imageFile&&!a.image?(d(),_("div",ge," No image selected. Upload an image to display with this team member. ")):D("",!0)])])]),_:2},1024)]),_:2},1024),t(p,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:a.linkedin,"onUpdate:modelValue":c=>a.linkedin=c,label:"LinkedIn URL",variant:"outlined",hint:"Optional LinkedIn profile URL","persistent-hint":"","prepend-inner-icon":"mdi-linkedin"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(p,{cols:"12",md:"6"},{default:o(()=>[t(v,{modelValue:a.twitter,"onUpdate:modelValue":c=>a.twitter=c,label:"Twitter URL",variant:"outlined",hint:"Optional Twitter profile URL","persistent-hint":"","prepend-inner-icon":"mdi-twitter"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),t(h,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",onClick:m.addTeamMember},{default:o(()=>e[30]||(e[30]=[u("Add Team Member")])),_:1,__:[30]},8,["onClick"])]),_:1,__:[31]})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1},512))]),_:1}),t(Y,{class:"pa-4 bg-grey-lighten-4"},{default:o(()=>[t(q),t(h,{variant:"text",onClick:m.closeDialog,disabled:l.saving},{default:o(()=>e[32]||(e[32]=[u("Cancel")])),_:1,__:[32]},8,["onClick","disabled"]),t(h,{color:"primary",variant:"flat",onClick:m.saveAbout,loading:l.saving},{default:o(()=>e[33]||(e[33]=[u(" Save About Content ")])),_:1,__:[33]},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const _e=L(K,[["render",ye],["__scopeId","data-v-ff06d54b"]]),be={components:{AboutFormDialog:_e},mixins:[R],data(){return{aboutData:null,showDialog:!1,loading:!1,error:null}},async mounted(){await this.loadAboutData()},methods:{async loadAboutData(){var i;this.loading=!0,this.error=null;try{const e=await C.get("/api/v1/about",{headers:this.getAuthHeaders()});this.aboutData=e.data||null}catch(e){console.error("Error loading about data:",e),((i=e.response)==null?void 0:i.status)===404?this.aboutData=null:(this.error="Failed to load about content",this.handleApiError(e,"Failed to load about content"))}finally{this.loading=!1}},openDialog(){this.showDialog=!0},handleAboutSaved(){this.loadAboutData()},resolveImageUrl(i){return z(i)}}},we={class:"page-header"},Ve={key:0,class:"text-center py-8"},Ee={key:2,class:"about-preview"},Te={class:"mb-2"},De={class:"mb-2"},Se={class:"mb-2"},Ie={class:"mb-2"},xe={class:"mb-2"},ke=["innerHTML"],Fe={key:0,class:"mt-2"},Ae={class:"d-flex gap-4 mt-2"},Ue={key:1,class:"mt-2"},Me={class:"mb-2"},Ce={class:"mb-2"},Pe={class:"mt-4"},Qe={class:"d-flex align-center mb-2"},Oe={class:"text-body-2 text-medium-emphasis"},ze={class:"mb-2"},He={class:"mb-2"},Le={class:"mt-4"},Re={class:"font-weight-bold"},Ne={class:"text-caption text-primary"};function We(i,e,r,f,l,m){const h=n("v-btn"),w=n("v-chip"),b=n("v-card-title"),I=n("v-progress-circular"),P=n("v-alert"),v=n("v-icon"),p=n("v-card-text"),S=n("v-card"),x=n("v-img"),k=n("v-col"),F=n("v-row"),Q=n("v-avatar"),O=n("AboutFormDialog");return d(),_("div",null,[s("div",we,[e[3]||(e[3]=s("h1",{class:"text-h4 page-title"},"About Page Management",-1)),t(h,{color:"primary","prepend-icon":"mdi-pencil",onClick:e[0]||(e[0]=g=>m.openDialog()),class:"add-button"},{default:o(()=>e[2]||(e[2]=[u(" Edit About Content ")])),_:1,__:[2]})]),t(S,{class:"mb-4"},{default:o(()=>[t(b,{class:"d-flex justify-space-between align-center"},{default:o(()=>[e[6]||(e[6]=s("span",null,"About Page Content",-1)),l.aboutData?(d(),V(w,{key:0,color:"success",size:"small"},{default:o(()=>e[4]||(e[4]=[u(" Content Loaded ")])),_:1,__:[4]})):(d(),V(w,{key:1,color:"warning",size:"small"},{default:o(()=>e[5]||(e[5]=[u(" No Content ")])),_:1,__:[5]}))]),_:1,__:[6]}),t(p,null,{default:o(()=>[l.loading?(d(),_("div",Ve,[t(I,{indeterminate:"",color:"primary",size:"48"}),e[7]||(e[7]=s("p",{class:"mt-4 text-body-2"},"Loading about content...",-1))])):l.error?(d(),V(P,{key:1,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[u(y(l.error),1)]),_:1})):l.aboutData?(d(),_("div",Ee,[t(S,{variant:"outlined",class:"mb-4"},{default:o(()=>[t(b,{class:"bg-primary text-white"},{default:o(()=>[t(v,{icon:"mdi-image-text",class:"mr-2"}),e[8]||(e[8]=u(" Hero Section "))]),_:1,__:[8]}),t(p,null,{default:o(()=>{var g,E,A;return[s("div",Te,[e[9]||(e[9]=s("strong",null,"Overline:",-1)),u(" "+y(((g=l.aboutData.hero)==null?void 0:g.overline)||"N/A"),1)]),s("div",De,[e[10]||(e[10]=s("strong",null,"Title:",-1)),u(" "+y(((E=l.aboutData.hero)==null?void 0:E.title)||"N/A"),1)]),s("div",null,[e[11]||(e[11]=s("strong",null,"Subtitle:",-1)),u(" "+y(((A=l.aboutData.hero)==null?void 0:A.subtitle)||"N/A"),1)])]}),_:1})]),_:1}),l.aboutData.story?(d(),V(S,{key:0,variant:"outlined",class:"mb-4"},{default:o(()=>[t(b,{class:"bg-primary text-white"},{default:o(()=>[t(v,{icon:"mdi-book-open-page-variant",class:"mr-2"}),e[12]||(e[12]=u(" Our Story Section "))]),_:1,__:[12]}),t(p,null,{default:o(()=>[s("div",Se,[e[13]||(e[13]=s("strong",null,"Overline:",-1)),u(" "+y(l.aboutData.story.overline||"N/A"),1)]),s("div",Ie,[e[14]||(e[14]=s("strong",null,"Title:",-1)),u(" "+y(l.aboutData.story.title||"N/A"),1)]),s("div",xe,[e[15]||(e[15]=s("strong",null,"Description:",-1)),s("div",{innerHTML:l.aboutData.story.description||"N/A",class:"text-body-2 mt-1"},null,8,ke)]),l.aboutData.story.stats&&l.aboutData.story.stats.length>0?(d(),_("div",Fe,[e[16]||(e[16]=s("strong",null,"Stats:",-1)),s("div",Ae,[(d(!0),_(M,null,U(l.aboutData.story.stats,(g,E)=>(d(),V(w,{key:E,size:"small",variant:"outlined"},{default:o(()=>[u(y(g.value)+" - "+y(g.label),1)]),_:2},1024))),128))])])):D("",!0),l.aboutData.story.image?(d(),_("div",Ue,[e[17]||(e[17]=s("strong",null,"Image:",-1)),t(x,{src:m.resolveImageUrl(l.aboutData.story.image),"max-width":"200","max-height":"150",class:"mt-2 rounded"},null,8,["src"])])):D("",!0)]),_:1})]),_:1})):D("",!0),l.aboutData.values&&l.aboutData.values.length>0?(d(),V(S,{key:1,variant:"outlined",class:"mb-4"},{default:o(()=>[t(b,{class:"bg-primary text-white"},{default:o(()=>[t(v,{icon:"mdi-heart",class:"mr-2"}),e[18]||(e[18]=u(" Core Values Section "))]),_:1,__:[18]}),t(p,null,{default:o(()=>[s("div",Me,[e[19]||(e[19]=s("strong",null,"Title:",-1)),u(" "+y(l.aboutData.valuesTitle||"N/A"),1)]),s("div",Ce,[e[20]||(e[20]=s("strong",null,"Subtitle:",-1)),u(" "+y(l.aboutData.valuesSubtitle||"N/A"),1)]),s("div",Pe,[s("strong",null,"Values ("+y(l.aboutData.values.length)+"):",1),t(F,{class:"mt-2"},{default:o(()=>[(d(!0),_(M,null,U(l.aboutData.values,(g,E)=>(d(),V(k,{key:E,cols:"12",md:"4"},{default:o(()=>[t(S,{variant:"outlined",class:"pa-3"},{default:o(()=>[s("div",Qe,[t(v,{icon:g.icon||"mdi-check-circle",class:"mr-2"},null,8,["icon"]),s("strong",null,y(g.title),1)]),s("p",Oe,y(g.description||g.desc),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})):D("",!0),l.aboutData.team&&l.aboutData.team.length>0?(d(),V(S,{key:2,variant:"outlined"},{default:o(()=>[t(b,{class:"bg-primary text-white"},{default:o(()=>[t(v,{icon:"mdi-account-group",class:"mr-2"}),e[21]||(e[21]=u(" Team Section "))]),_:1,__:[21]}),t(p,null,{default:o(()=>[s("div",ze,[e[22]||(e[22]=s("strong",null,"Overline:",-1)),u(" "+y(l.aboutData.teamOverline||"N/A"),1)]),s("div",He,[e[23]||(e[23]=s("strong",null,"Title:",-1)),u(" "+y(l.aboutData.teamTitle||"N/A"),1)]),s("div",Le,[s("strong",null,"Team Members ("+y(l.aboutData.team.length)+"):",1),t(F,{class:"mt-2"},{default:o(()=>[(d(!0),_(M,null,U(l.aboutData.team,(g,E)=>(d(),V(k,{key:E,cols:"12",sm:"6",md:"3"},{default:o(()=>[t(S,{variant:"outlined",class:"pa-3 text-center"},{default:o(()=>[t(Q,{size:"80",class:"mb-2"},{default:o(()=>[t(x,{src:g.image?m.resolveImageUrl(g.image):"https://i.pravatar.cc/300?img="+E,cover:""},null,8,["src"])]),_:2},1024),s("div",Re,y(g.name),1),s("div",Ne,y(g.role),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})):D("",!0)])):(d(),V(P,{key:3,type:"info",variant:"tonal"},{default:o(()=>e[24]||(e[24]=[u(' No about content found. Click "Edit About Content" to create content. ')])),_:1,__:[24]}))]),_:1})]),_:1}),t(O,{modelValue:l.showDialog,"onUpdate:modelValue":e[1]||(e[1]=g=>l.showDialog=g),"about-data":l.aboutData,onSaved:m.handleAboutSaved},null,8,["modelValue","about-data","onSaved"])])}const Ge=L(be,[["render",We],["__scopeId","data-v-12935623"]]);export{Ge as default};
