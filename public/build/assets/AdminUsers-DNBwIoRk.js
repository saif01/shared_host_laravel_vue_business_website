import{a as K}from"./adminPaginationMixin-DN7Wb3ng.js";import{r as Q,n as X}from"./uploads-CnEkgyD_.js";import{U as Z}from"./UserProfileDialog-Dx0JDRnD.js";import{_ as $,d as p,a as i,b as s,w as r,f as m,r as n,h as w,t as c,F as P,e as F,i as ee,c as V,M as te,N as oe,y as le,o as d}from"./app-CRxyawSL.js";import"./moment-C5S46NFB.js";const se={components:{UserProfileDialog:Z},mixins:[K],data(){return{users:[],roles:[],roleFilter:null,roleOptions:[],activeFilter:null,activeFilterOptions:[{title:"Active",value:!0},{title:"Inactive",value:!1}],dialog:!1,editingUser:null,saving:!1,form:{name:"",email:"",role_ids:[],password:"",password_confirmation:"",avatar:"",phone:"",date_of_birth:"",gender:null,address:"",city:"",state:"",country:"",postal_code:"",bio:""},activeTab:"basic",genderOptions:[{title:"Male",value:"male"},{title:"Female",value:"female"},{title:"Other",value:"other"}],rules:{required:t=>Array.isArray(t)?t.length>0||"At least one role is required":!!t||"This field is required",email:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||"Invalid email",minLength:t=>t?t.length>=8||"Password must be at least 8 characters":!0},currentUserId:null,showPassword:!1,showPasswordConfirmation:!1,avatarFile:null,uploadingAvatar:!1,profileDialogVisible:!1,selectedUser:null}},async mounted(){await this.loadRoles(),await this.loadUsers(),this.loadCurrentUser()},methods:{async loadUsers(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.roleFilter&&(t.role=this.roleFilter),this.activeFilter!==null&&(t.is_active=this.activeFilter);const e=await this.$axios.get("/api/v1/users",{params:t,headers:this.getAuthHeaders()}),f=e.data.data||[];this.users=f,this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load users")}finally{this.loading=!1}},async loadRoles(){try{const t=await this.$axios.get("/api/v1/users/roles",{headers:this.getAuthHeaders()});this.roles=t.data.roles,this.roleOptions=this.roles.map(e=>({title:e.label,value:e.value}))}catch(t){console.error("Error loading roles:",t)}},loadCurrentUser(){const t=localStorage.getItem("admin_token");this.$axios.get("/api/v1/auth/user",{headers:{Authorization:`Bearer ${t}`}}).then(e=>{this.currentUserId=e.data.id}).catch(()=>{})},openDialog(t){if(this.avatarFile=null,this.activeTab="basic",t){this.editingUser=t;const e=t.roles?t.roles.map(v=>v.id):[],f=this.normalizeImageInput(t.avatar||"");this.form={name:t.name||"",email:t.email||"",role_ids:e,password:"",password_confirmation:"",avatar:f,is_active:t.is_active!==void 0?t.is_active:!0,phone:t.phone||"",date_of_birth:t.date_of_birth||"",gender:t.gender||null,address:t.address||"",city:t.city||"",state:t.state||"",country:t.country||"",postal_code:t.postal_code||"",bio:t.bio||""}}else{this.editingUser=null;const e=this.roles.length>0?this.roles[0].value:null;this.form={name:"",email:"",role_ids:e?[e]:[],password:"",password_confirmation:"",avatar:"",is_active:!0,phone:"",date_of_birth:"",gender:null,address:"",city:"",state:"",country:"",postal_code:"",bio:""}}this.dialog=!0},closeDialog(){this.dialog=!1,this.editingUser=null,this.activeTab="basic";const t=this.roles.length>0?this.roles[0].value:null;this.form={name:"",email:"",role_ids:t?[t]:[],password:"",password_confirmation:"",avatar:"",is_active:!0,phone:"",date_of_birth:"",gender:null,address:"",city:"",state:"",country:"",postal_code:"",bio:""},this.showPassword=!1,this.showPasswordConfirmation=!1,this.avatarFile=null,this.$refs.form&&this.$refs.form.resetValidation()},async handleAvatarUpload(){var f;if(!this.avatarFile)return;const t=Array.isArray(this.avatarFile)?this.avatarFile[0]:this.avatarFile;if(!t)return;if(!t.type.startsWith("image/")){this.showError("Please select a valid image file"),this.avatarFile=null;return}const e=5*1024*1024;if(t.size>e){this.showError("File size must be less than 5MB"),this.avatarFile=null;return}this.uploadingAvatar=!0;try{const v=new FormData;v.append("image",t),v.append("folder","users"),this.form.name&&v.append("prefix",this.form.name);const o=localStorage.getItem("admin_token"),a=await this.$axios.post("/api/v1/upload/image",v,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}});if(a.data.success){const u=this.normalizeImageInput(a.data.path||a.data.url);this.form.avatar=u,this.avatarFile=null,this.showSuccess("Avatar uploaded successfully")}else throw new Error(a.data.message||"Failed to upload avatar")}catch(v){console.error("Error uploading avatar:",v);let o="Failed to upload avatar";v.response?o=((f=v.response.data)==null?void 0:f.message)||v.response.statusText||o:v.message&&(o=v.message),this.showError(o),this.avatarFile=null}finally{this.uploadingAvatar=!1}},clearAvatar(){this.form.avatar="",this.avatarFile=null},async saveUser(){var t,e,f,v;if(this.form.password&&this.form.password!==this.form.password_confirmation){this.showError("Passwords do not match");return}if(!this.editingUser&&!this.form.password){this.showError("Password is required for new users");return}if(this.editingUser&&this.form.password&&!this.form.password_confirmation){this.showError("Please confirm the password");return}if(this.$refs.form.validate()){this.saving=!0;try{const o=localStorage.getItem("admin_token"),a=this.editingUser?`/api/v1/users/${this.editingUser.id}`:"/api/v1/users",u={...this.form};this.form.role_ids&&(u.role_ids=Array.isArray(this.form.role_ids)?this.form.role_ids:[this.form.role_ids]),this.form.password?u.password_confirmation=this.form.password_confirmation:(delete u.password,delete u.password_confirmation),u.avatar=this.normalizeImageInput(u.avatar),u.is_active=!!this.form.is_active,delete u.role;const _=this.editingUser?"put":"post";await axios[_](a,u,{headers:{Authorization:`Bearer ${o}`}}),this.showSuccess(this.editingUser?"User updated successfully":"User created successfully"),this.closeDialog(),await this.loadUsers()}catch(o){console.error("Error saving user:",o);let a="Error saving user";if((e=(t=o.response)==null?void 0:t.data)!=null&&e.errors){const u=o.response.data.errors,_=[];Object.keys(u).forEach(h=>{_.push(u[h][0])}),a=_.join(", ")}else(v=(f=o.response)==null?void 0:f.data)!=null&&v.message&&(a=o.response.data.message);this.showError(a)}finally{this.saving=!1}}},async deleteUser(t){if(t.id===this.currentUserId){this.showError("You cannot delete your own account");return}if((await window.Swal.fire({title:"Delete User?",html:`Are you sure you want to delete <strong>${t.name}</strong>?<br><br>This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{const f=localStorage.getItem("admin_token");await this.$axios.delete(`/api/v1/users/${t.id}`,{headers:{Authorization:`Bearer ${f}`}}),this.showSuccess("User deleted successfully"),await this.loadUsers()}catch(f){this.handleApiError(f,"Error deleting user")}},getRoleLabel(t){const e=this.roles.find(f=>f.slug===t);return e?e.label:t},getRoleColor(t){return{administrator:"error",editor:"primary","hr-user":"success",staff:"info"}[t]||"primary"},onPerPageChange(){this.resetPagination(),this.loadUsers()},onSort(t){this.handleSort(t),this.loadUsers()},normalizeImageInput(t){return X(t)},resolveImageUrl(t){return Q(t)},async viewUserProfile(t){try{const e=localStorage.getItem("admin_token"),f=await this.$axios.get(`/api/v1/users/${t.id}`,{headers:{Authorization:`Bearer ${e}`}});this.selectedUser=f.data,this.profileDialogVisible=!0}catch(e){console.error("Error loading user profile:",e),this.selectedUser=t,this.profileDialogVisible=!0,this.handleApiError(e,"Failed to load user profile details")}},async toggleUserActive(t){if(t.id===this.currentUserId){this.showError("You cannot change your own account status");return}const e=t.is_active?"deactivate":"activate",f=t.is_active?"Deactivate User?":"Activate User?",v=t.is_active?"warning":"question",o=t.is_active?`Are you sure you want to deactivate <strong>${t.name}</strong>?<br><br>They will not be able to log in to the system.`:`Are you sure you want to activate <strong>${t.name}</strong>?<br><br>They will be able to log in to the system.`;if((await window.Swal.fire({title:f,html:o,icon:v,showCancelButton:!0,confirmButtonColor:t.is_active?"#f59e0b":"#10b981",cancelButtonColor:"#6c757d",confirmButtonText:`Yes, ${e} it!`,cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{const u=localStorage.getItem("admin_token"),_=await this.$axios.put(`/api/v1/users/${t.id}/toggle-active`,{},{headers:{Authorization:`Bearer ${u}`}});this.showSuccess(_.data.message||`User ${e}d successfully`),await this.loadUsers()}catch(u){this.handleApiError(u,`Error ${e}ing user`)}}}},re={class:"page-header"},ie={class:"text-caption text-grey"},ae={key:0},ne={class:"d-flex align-center"},de={class:"d-flex align-center"},ue={class:"d-flex align-center"},me={class:"d-flex align-center"},ce={class:"d-flex align-center gap-2"},pe={class:"d-flex flex-wrap gap-1"},fe={class:"d-flex"},ve={class:"d-flex align-center gap-2"},he={key:1,class:"text-white"},ge={key:0,class:"d-flex align-center"},_e={key:1,class:"text-caption text-grey"},ye={key:0,class:"d-flex flex-column"},we={key:0,class:"text-body-2"},be={key:1,class:"text-caption text-grey"},Ue={key:2,class:"text-caption text-grey"},Ve={key:1,class:"text-caption text-grey"},ke={key:0,class:"d-flex flex-wrap gap-1"},Pe={key:1,class:"text-caption text-grey"},xe={key:0},Ce={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},Ae={class:"text-caption text-grey"},Ie={key:0},Fe={key:0,class:"ml-2"},Se={key:1},ze={key:0,class:"d-flex align-center gap-2"},Be={class:"pa-6"},Ee={key:1,class:"text-grey text-caption align-self-center"},De={class:"mb-4"},Te={key:0,class:"mb-3 text-center"},qe={class:"pa-6"},Ne={class:"pa-6"};function Re(t,e,f,v,o,a){const u=n("v-btn"),_=n("v-select"),h=n("v-col"),b=n("v-text-field"),S=n("v-row"),x=n("v-card-text"),C=n("v-card"),z=n("v-card-title"),U=n("v-icon"),y=n("v-skeleton-loader"),B=n("v-img"),E=n("v-avatar"),k=n("v-chip"),T=n("v-table"),q=n("v-pagination"),A=n("v-tab"),N=n("v-tabs"),R=n("v-list-item"),M=n("v-switch"),O=n("v-progress-circular"),L=n("v-file-input"),I=n("v-window-item"),D=n("v-textarea"),j=n("v-window"),G=n("v-form"),Y=n("v-spacer"),H=n("v-card-actions"),W=n("v-dialog"),J=n("UserProfileDialog");return d(),p("div",null,[i("div",re,[e[32]||(e[32]=i("h1",{class:"text-h4 page-title"},"User Management",-1)),s(u,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=l=>a.openDialog(null)),class:"add-button"},{default:r(()=>e[31]||(e[31]=[m(" Add New User ")])),_:1,__:[31]})]),s(C,{class:"mb-4"},{default:r(()=>[s(x,null,{default:r(()=>[s(S,null,{default:r(()=>[s(h,{cols:"12",md:"2"},{default:r(()=>[s(_,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=l=>t.perPage=l),a.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(h,{cols:"12",md:"2"},{default:r(()=>[s(_,{modelValue:o.roleFilter,"onUpdate:modelValue":[e[2]||(e[2]=l=>o.roleFilter=l),a.loadUsers],items:o.roleOptions,label:"Filter by Role",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(h,{cols:"12",md:"2"},{default:r(()=>[s(_,{modelValue:o.activeFilter,"onUpdate:modelValue":[e[3]||(e[3]=l=>o.activeFilter=l),a.loadUsers],items:o.activeFilterOptions,label:"Filter by Status",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(h,{cols:"12",md:"6"},{default:r(()=>[s(b,{modelValue:t.search,"onUpdate:modelValue":e[4]||(e[4]=l=>t.search=l),label:"Search by name, email, phone, city, or country","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",onInput:a.loadUsers},null,8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1})]),_:1}),s(C,null,{default:r(()=>[s(z,{class:"d-flex justify-space-between align-center"},{default:r(()=>[e[34]||(e[34]=i("span",null,"Users",-1)),i("span",ie,[e[33]||(e[33]=m(" Total Records: ")),i("strong",null,c(t.pagination.total||0),1),o.users.length>0?(d(),p("span",ae," | Showing "+c((t.currentPage-1)*t.perPage+1)+" to "+c(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+c(t.pagination.total),1)):w("",!0)])]),_:1,__:[34]}),s(x,null,{default:r(()=>[s(T,null,{default:r(()=>[i("thead",null,[i("tr",null,[i("th",{class:"sortable",onClick:e[5]||(e[5]=l=>a.onSort("name"))},[i("div",ne,[e[35]||(e[35]=m(" Name ")),s(U,{icon:t.getSortIcon("name"),size:"small",class:"ml-1"},null,8,["icon"])])]),i("th",{class:"sortable",onClick:e[6]||(e[6]=l=>a.onSort("email"))},[i("div",de,[e[36]||(e[36]=m(" Email ")),s(U,{icon:t.getSortIcon("email"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[39]||(e[39]=i("th",null,"Phone",-1)),e[40]||(e[40]=i("th",null,"Location",-1)),e[41]||(e[41]=i("th",null,"Role",-1)),i("th",{class:"sortable",onClick:e[7]||(e[7]=l=>a.onSort("is_active"))},[i("div",ue,[e[37]||(e[37]=m(" Status ")),s(U,{icon:t.getSortIcon("is_active"),size:"small",class:"ml-1"},null,8,["icon"])])]),i("th",{class:"sortable",onClick:e[8]||(e[8]=l=>a.onSort("created_at"))},[i("div",me,[e[38]||(e[38]=m(" Created ")),s(U,{icon:t.getSortIcon("created_at"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[42]||(e[42]=i("th",null,"Actions",-1))])]),i("tbody",null,[t.loading?(d(),p(P,{key:0},F(5,l=>i("tr",{key:`skeleton-${l}`},[i("td",null,[i("div",ce,[s(y,{type:"avatar",width:"32",height:"32"}),s(y,{type:"text",width:"150"})])]),i("td",null,[s(y,{type:"text",width:"200"})]),i("td",null,[s(y,{type:"text",width:"120"})]),i("td",null,[s(y,{type:"text",width:"150"})]),i("td",null,[i("div",pe,[s(y,{type:"chip",width:"80",height:"24",class:"mr-1"}),s(y,{type:"chip",width:"70",height:"24"})])]),i("td",null,[s(y,{type:"chip",width:"80",height:"24"})]),i("td",null,[s(y,{type:"text",width:"120"})]),i("td",null,[i("div",fe,[s(y,{type:"button",width:"32",height:"32",class:"mr-1"}),s(y,{type:"button",width:"32",height:"32",class:"mr-1"}),s(y,{type:"button",width:"32",height:"32"})])])])),64)):(d(),p(P,{key:1},[(d(!0),p(P,null,F(o.users,l=>(d(),p("tr",{key:l.id},[i("td",null,[i("div",ve,[s(E,{size:"32",color:"primary"},{default:r(()=>[l.avatar?(d(),V(B,{key:0,src:l.avatar,alt:l.name},null,8,["src","alt"])):(d(),p("span",he,c(l.name.charAt(0).toUpperCase()),1))]),_:2},1024),m(" "+c(l.name),1)])]),i("td",null,c(l.email),1),i("td",null,[l.phone?(d(),p("span",ge,[s(U,{size:"small",class:"mr-1"},{default:r(()=>e[43]||(e[43]=[m("mdi-phone")])),_:1,__:[43]}),m(" "+c(l.phone),1)])):(d(),p("span",_e,"-"))]),i("td",null,[l.city||l.country?(d(),p("div",ye,[l.city?(d(),p("span",we,c(l.city),1)):w("",!0),l.country?(d(),p("span",be,c(l.country),1)):w("",!0),!l.city&&!l.country?(d(),p("span",Ue,"-")):w("",!0)])):(d(),p("span",Ve,"-"))]),i("td",null,[l.roles&&l.roles.length>0?(d(),p("div",ke,[(d(!0),p(P,null,F(l.roles,g=>(d(),V(k,{key:g.id,color:a.getRoleColor(g.slug),size:"small"},{default:r(()=>[m(c(g.name),1)]),_:2},1032,["color"]))),128))])):(d(),p("span",Pe,"No roles"))]),i("td",null,[s(k,{color:l.is_active?"success":"error",size:"small"},{default:r(()=>[m(c(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),i("td",null,c(t.formatDate(l.created_at)),1),i("td",null,[s(u,{size:"small",icon:"mdi-eye",onClick:g=>a.viewUserProfile(l),variant:"text",color:"info",title:"View Profile"},null,8,["onClick"]),s(u,{size:"small",icon:"mdi-pencil",onClick:g=>a.openDialog(l),variant:"text",title:"Edit User"},null,8,["onClick"]),s(u,{size:"small",icon:l.is_active?"mdi-account-off":"mdi-account-check",onClick:g=>a.toggleUserActive(l),variant:"text",color:l.is_active?"warning":"success",disabled:l.id===o.currentUserId,title:l.is_active?"Deactivate User":"Activate User"},null,8,["icon","onClick","color","disabled","title"]),s(u,{size:"small",icon:"mdi-delete",onClick:g=>a.deleteUser(l),variant:"text",color:"error",disabled:l.id===o.currentUserId,title:"Delete User"},null,8,["onClick","disabled"])])]))),128)),o.users.length===0?(d(),p("tr",xe,e[44]||(e[44]=[i("td",{colspan:"8",class:"text-center py-4"},"No users found",-1)]))):w("",!0)],64))])]),_:1}),i("div",Ce,[i("div",Ae,[o.users.length>0&&t.pagination.total>0?(d(),p("span",Ie,[e[45]||(e[45]=m(" Showing ")),i("strong",null,c((t.currentPage-1)*t.perPage+1),1),e[46]||(e[46]=m(" to ")),i("strong",null,c(Math.min(t.currentPage*t.perPage,t.pagination.total)),1),e[47]||(e[47]=m(" of ")),i("strong",null,c(t.pagination.total.toLocaleString()),1),e[48]||(e[48]=m(" records ")),t.pagination.last_page>1?(d(),p("span",Fe," (Page "+c(t.currentPage)+" of "+c(t.pagination.last_page)+") ",1)):w("",!0)])):(d(),p("span",Se," No records found "))]),t.pagination.last_page>1?(d(),p("div",ze,[s(q,{modelValue:t.currentPage,"onUpdate:modelValue":[e[9]||(e[9]=l=>t.currentPage=l),a.loadUsers],length:t.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):w("",!0)])]),_:1})]),_:1}),s(W,{modelValue:o.dialog,"onUpdate:modelValue":e[29]||(e[29]=l=>o.dialog=l),"max-width":"900",scrollable:"",persistent:""},{default:r(()=>[s(C,null,{default:r(()=>[s(z,null,{default:r(()=>[m(c(o.editingUser?"Edit User":"Add New User"),1)]),_:1}),s(x,{class:"pa-0"},{default:r(()=>[s(G,{ref:"form",onSubmit:ee(a.saveUser,["prevent"])},{default:r(()=>[s(N,{modelValue:o.activeTab,"onUpdate:modelValue":e[10]||(e[10]=l=>o.activeTab=l),"bg-color":"grey-lighten-4"},{default:r(()=>[s(A,{value:"basic"},{default:r(()=>e[49]||(e[49]=[m("Basic Information")])),_:1,__:[49]}),s(A,{value:"profile"},{default:r(()=>e[50]||(e[50]=[m("Profile Information")])),_:1,__:[50]}),s(A,{value:"security"},{default:r(()=>e[51]||(e[51]=[m("Security")])),_:1,__:[51]})]),_:1},8,["modelValue"]),s(j,{modelValue:o.activeTab,"onUpdate:modelValue":e[28]||(e[28]=l=>o.activeTab=l)},{default:r(()=>[s(I,{value:"basic"},{default:r(()=>[i("div",Be,[s(b,{modelValue:o.form.name,"onUpdate:modelValue":e[11]||(e[11]=l=>o.form.name=l),label:"Full Name",rules:[o.rules.required],required:"",class:"mb-4"},null,8,["modelValue","rules"]),s(b,{modelValue:o.form.email,"onUpdate:modelValue":e[12]||(e[12]=l=>o.form.email=l),label:"Email",type:"email",rules:[o.rules.required,o.rules.email],required:"",class:"mb-4"},null,8,["modelValue","rules"]),s(_,{modelValue:o.form.role_ids,"onUpdate:modelValue":e[13]||(e[13]=l=>o.form.role_ids=l),items:o.roles,"item-title":"label","item-value":"value",label:"Roles",rules:[o.rules.required],required:"",multiple:"",chips:"",class:"mb-4"},{item:r(({props:l,item:g})=>[s(R,te(oe(l)),{title:r(()=>[m(c(g.raw.label)+" ",1),g.raw.is_system?(d(),V(k,{key:0,size:"x-small",color:"warning",class:"ml-2"},{default:r(()=>e[52]||(e[52]=[m(" System ")])),_:1,__:[52]})):w("",!0)]),subtitle:r(()=>[m(c(g.raw.description),1)]),_:2},1040)]),selection:r(({item:l,index:g})=>[g<2?(d(),V(k,{key:0,size:"small",class:"mr-1"},{default:r(()=>[m(c(l.raw.label),1)]),_:2},1024)):w("",!0),g===2?(d(),p("span",Ee," (+"+c(o.form.role_ids.length-2)+" others) ",1)):w("",!0)]),_:1},8,["modelValue","items","rules"]),s(M,{modelValue:o.form.is_active,"onUpdate:modelValue":e[14]||(e[14]=l=>o.form.is_active=l),label:"Active User",color:"success",hint:"Inactive users cannot log in to the system","persistent-hint":"",class:"mb-4"},null,8,["modelValue"]),i("div",De,[e[54]||(e[54]=i("div",{class:"text-subtitle-2 font-weight-medium mb-2"},"Avatar",-1)),o.form.avatar?(d(),p("div",Te,[s(E,{size:"80",class:"mb-2"},{default:r(()=>[s(B,{src:o.form.avatar?a.resolveImageUrl(o.form.avatar):"",alt:"Avatar Preview"},null,8,["src"])]),_:1}),i("div",null,[s(u,{size:"small",variant:"text",color:"error","prepend-icon":"mdi-delete",onClick:a.clearAvatar},{default:r(()=>e[53]||(e[53]=[m("Remove Avatar")])),_:1,__:[53]},8,["onClick"])])])):w("",!0),s(L,{modelValue:o.avatarFile,"onUpdate:modelValue":[e[15]||(e[15]=l=>o.avatarFile=l),a.handleAvatarUpload],label:"Upload Avatar",variant:"outlined",density:"comfortable",color:"primary",accept:"image/*","prepend-icon":"mdi-image",hint:"Upload an avatar image (JPG, PNG, GIF, WebP - Max 5MB). Recommended size: 200x200px","persistent-hint":"","show-size":"",class:"mb-3"},le({_:2},[o.uploadingAvatar?{name:"append-inner",fn:r(()=>[s(O,{indeterminate:"",size:"20",color:"primary"})]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue"])])])]),_:1}),s(I,{value:"profile"},{default:r(()=>[i("div",qe,[s(S,null,{default:r(()=>[s(h,{cols:"12",md:"6"},{default:r(()=>[s(b,{modelValue:o.form.phone,"onUpdate:modelValue":e[16]||(e[16]=l=>o.form.phone=l),label:"Phone Number",variant:"outlined","prepend-inner-icon":"mdi-phone",hint:"e.g., +8801707080401","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",md:"6"},{default:r(()=>[s(b,{modelValue:o.form.date_of_birth,"onUpdate:modelValue":e[17]||(e[17]=l=>o.form.date_of_birth=l),label:"Date of Birth",type:"date",variant:"outlined","prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",md:"6"},{default:r(()=>[s(_,{modelValue:o.form.gender,"onUpdate:modelValue":e[18]||(e[18]=l=>o.form.gender=l),items:o.genderOptions,label:"Gender",variant:"outlined","prepend-inner-icon":"mdi-gender-male-female",clearable:""},null,8,["modelValue","items"])]),_:1}),s(h,{cols:"12"},{default:r(()=>[s(D,{modelValue:o.form.address,"onUpdate:modelValue":e[19]||(e[19]=l=>o.form.address=l),label:"Address",variant:"outlined",rows:"2","prepend-inner-icon":"mdi-map-marker",hint:"Street address","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",md:"4"},{default:r(()=>[s(b,{modelValue:o.form.city,"onUpdate:modelValue":e[20]||(e[20]=l=>o.form.city=l),label:"City",variant:"outlined","prepend-inner-icon":"mdi-city"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",md:"4"},{default:r(()=>[s(b,{modelValue:o.form.state,"onUpdate:modelValue":e[21]||(e[21]=l=>o.form.state=l),label:"State/Province",variant:"outlined","prepend-inner-icon":"mdi-map"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",md:"4"},{default:r(()=>[s(b,{modelValue:o.form.country,"onUpdate:modelValue":e[22]||(e[22]=l=>o.form.country=l),label:"Country",variant:"outlined","prepend-inner-icon":"mdi-earth"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",md:"6"},{default:r(()=>[s(b,{modelValue:o.form.postal_code,"onUpdate:modelValue":e[23]||(e[23]=l=>o.form.postal_code=l),label:"Postal Code",variant:"outlined","prepend-inner-icon":"mdi-mailbox"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12"},{default:r(()=>[s(D,{modelValue:o.form.bio,"onUpdate:modelValue":e[24]||(e[24]=l=>o.form.bio=l),label:"Bio/Description",variant:"outlined",rows:"4","prepend-inner-icon":"mdi-text",hint:"Brief description about the user","persistent-hint":"",counter:1e3},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s(I,{value:"security"},{default:r(()=>[i("div",Ne,[s(b,{modelValue:o.form.password,"onUpdate:modelValue":e[26]||(e[26]=l=>o.form.password=l),label:"Password",type:o.showPassword?"text":"password",rules:o.editingUser?[]:[o.rules.required,o.rules.minLength],required:!o.editingUser,hint:"Leave blank to keep current password","persistent-hint":"",class:"mb-4","prepend-inner-icon":"mdi-lock"},{"append-inner":r(()=>[s(u,{icon:"",variant:"text",size:"small",onClick:e[25]||(e[25]=l=>o.showPassword=!o.showPassword)},{default:r(()=>[s(U,null,{default:r(()=>[m(c(o.showPassword?"mdi-eye-off":"mdi-eye"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","type","rules","required"]),!o.editingUser||o.form.password?(d(),V(b,{key:0,modelValue:o.form.password_confirmation,"onUpdate:modelValue":e[27]||(e[27]=l=>o.form.password_confirmation=l),label:"Confirm Password",type:o.showPasswordConfirmation?"text":"password",rules:o.form.password?[()=>!!o.form.password_confirmation||"Please confirm your password",()=>o.form.password_confirmation===o.form.password||"Passwords do not match"]:[],required:!!o.form.password,"prepend-inner-icon":"mdi-lock-check"},null,8,["modelValue","type","rules","required"])):w("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onSubmit"])]),_:1}),s(H,null,{default:r(()=>[s(Y),s(u,{onClick:a.closeDialog,variant:"text"},{default:r(()=>e[55]||(e[55]=[m("Cancel")])),_:1,__:[55]},8,["onClick"]),s(u,{onClick:a.saveUser,color:"primary",loading:o.saving},{default:r(()=>[m(c(o.editingUser?"Update":"Create"),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(J,{modelValue:o.profileDialogVisible,"onUpdate:modelValue":e[30]||(e[30]=l=>o.profileDialogVisible=l),user:o.selectedUser},null,8,["modelValue","user"])])}const Ye=$(se,[["render",Re],["__scopeId","data-v-1a8e4bc1"]]);export{Ye as default};
