import{a as L}from"./adminPaginationMixin-DN7Wb3ng.js";import{R as X}from"./RichTextEditor-DGIdDW3s.js";import{r as Y,n as Z}from"./uploads-CnEkgyD_.js";import{_ as K,c as w,w as l,b as i,r as a,a as o,t as c,d as f,f as m,g as b,F as M,e as O,n as R,o as n}from"./app-Di36VVY-.js";const $={name:"ServiceFormDialog",components:{RichTextEditor:X},mixins:[L],props:{modelValue:{type:Boolean,default:!1},editingService:{type:Object,default:null}},emits:["update:modelValue","saved"],data(){return{activeTab:"basic",loading:!1,saving:!1,imageFile:null,imagePreview:null,uploadingImage:!1,imageError:null,ogImageFile:null,ogImagePreview:null,uploadingOgImage:!1,ogImageError:null,featuresText:"",benefitsText:"",form:{title:"",slug:"",short_description:"",description:"",icon:"",image:"",price_range:"",features:[],benefits:[],meta_title:"",meta_description:"",meta_keywords:"",og_image:"",published:!1,order:0}}},computed:{dialog:{get(){return this.modelValue},set(s){this.$emit("update:modelValue",s)}},suggestedMetaTitle(){return this.form.meta_title||!this.form.title?null:this.form.title.length>60?this.form.title.substring(0,57)+"...":this.form.title},suggestedMetaDescription(){if(this.form.meta_description||!this.form.short_description)return null;let s=this.form.short_description;if(s.length>160){s=s.substring(0,157);const e=s.lastIndexOf(" ");e>120?s=s.substring(0,e)+"...":s+="..."}return s},suggestedMetaKeywords(){return this.form.meta_keywords?null:this.generateSuggestedKeywords()}},watch:{modelValue(s){s&&(this.activeTab="basic",this.editingService?this.loadServiceForEdit():this.resetForm())},editingService:{handler(s){s&&this.dialog?this.loadServiceForEdit():!s&&this.dialog&&this.resetForm()},immediate:!1}},methods:{resetForm(){this.form={title:"",slug:"",short_description:"",description:"",icon:"",image:"",price_range:"",features:[],benefits:[],meta_title:"",meta_description:"",meta_keywords:"",og_image:"",published:!1,order:0},this.imageFile=null,this.imagePreview=null,this.imageError=null,this.ogImageFile=null,this.ogImagePreview=null,this.ogImageError=null,this.featuresText="",this.benefitsText="",this.$refs.formRef&&this.$refs.formRef.resetValidation()},async loadServiceForEdit(){if(this.editingService){this.loading=!0;try{const e=(await this.$axios.get(`/api/v1/services/${this.editingService.id}`,{headers:this.getAuthHeaders()})).data;this.form={title:e.title||"",slug:e.slug||"",short_description:e.short_description||"",description:e.description||"",icon:e.icon||"",image:e.image||"",price_range:e.price_range||"",features:Array.isArray(e.features)?[...e.features]:[],benefits:Array.isArray(e.benefits)?[...e.benefits]:[],meta_title:e.meta_title||"",meta_description:e.meta_description||"",meta_keywords:e.meta_keywords||"",og_image:e.og_image||"",published:e.published||!1,order:e.order||0};const h=this.normalizeImageInput(e.image||""),x=this.normalizeImageInput(e.og_image||"");this.form.image=h,this.form.og_image=x,this.imagePreview=this.resolveImageUrl(e.image||h),this.ogImagePreview=this.resolveImageUrl(e.og_image||x),this.featuresText=Array.isArray(e.features)?e.features.join(`
`):"",this.benefitsText=Array.isArray(e.benefits)?e.benefits.join(`
`):""}catch(s){this.handleApiError(s,"Failed to load service data"),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){!this.saving&&!this.loading&&(this.dialog=!1,this.resetForm())},generateSlug(){this.form.title&&!this.editingService&&(this.form.slug=this.form.title.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},handleImageSelect(s){if(this.imageError=null,s){const e=Array.isArray(s)?s[0]:s;if(e&&e.size>5242880){this.imageError="Image file size must be less than 5MB",this.imageFile=null;return}if(e&&!e.type.startsWith("image/")){this.imageError="Please select a valid image file (jpeg, jpg, png, gif, webp)",this.imageFile=null;return}if(this.imageFile=e,e){const h=new FileReader;h.onload=x=>{this.imagePreview=x.target.result},h.onerror=()=>{this.showError("Failed to read image file"),this.imageFile=null,this.imagePreview=null},h.readAsDataURL(e)}else this.imagePreview=null}else this.imageFile=null,this.form.image?this.imagePreview=this.resolveImageUrl(this.form.image):this.imagePreview=null},removeImage(){confirm("Are you sure you want to remove this image?")&&(this.imagePreview=null,this.imageFile=null,this.form.image="",this.imageError=null)},handleOgImageSelect(s){if(this.ogImageError=null,s){const e=Array.isArray(s)?s[0]:s;if(e&&e.size>5242880){this.ogImageError="OG image file size must be less than 5MB",this.ogImageFile=null;return}if(e&&!e.type.startsWith("image/")){this.ogImageError="Please select a valid image file (jpeg, jpg, png, gif, webp)",this.ogImageFile=null;return}if(this.ogImageFile=e,e){const h=new FileReader;h.onload=x=>{this.ogImagePreview=x.target.result},h.onerror=()=>{this.showError("Failed to read image file"),this.ogImageFile=null,this.ogImagePreview=null},h.readAsDataURL(e)}else this.ogImagePreview=null}else this.ogImageFile=null,this.form.og_image?this.ogImagePreview=this.resolveImageUrl(this.form.og_image):this.ogImagePreview=null},removeOgImage(){confirm("Are you sure you want to remove the Open Graph image?")&&(this.ogImagePreview=null,this.ogImageFile=null,this.form.og_image="",this.ogImageError=null)},generateMetaTitle(){this.form.title&&(this.form.meta_title=this.form.title.length>60?this.form.title.substring(0,57)+"...":this.form.title)},generateMetaDescription(){if(this.form.short_description){let s=this.form.short_description;if(s.length>160){s=s.substring(0,157);const e=s.lastIndexOf(" ");e>120?s=s.substring(0,e)+"...":s+="..."}this.form.meta_description=s}},generateMetaKeywords(){const s=this.generateSuggestedKeywords();s&&(this.form.meta_keywords=s)},generateSuggestedKeywords(){const s=[];if(this.form.title){const x=this.form.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>3).slice(0,5);s.push(...x)}if(this.form.short_description){const x=this.form.short_description.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>4).slice(0,5);s.push(...x)}this.form.features&&this.form.features.length>0&&this.form.features.forEach(x=>{const t=x.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(r=>r.length>3).slice(0,2);s.push(...t)});const e=["the","and","for","with","from","this","that","your","our","service","services"],h=[...new Set(s)].filter(x=>!e.includes(x)).slice(0,10);return h.length>0?h.join(", "):null},suggestMetaFields(){},applySuggestedMetaTitle(){this.suggestedMetaTitle&&(this.form.meta_title=this.suggestedMetaTitle)},applySuggestedMetaDescription(){this.suggestedMetaDescription&&(this.form.meta_description=this.suggestedMetaDescription)},applySuggestedMetaKeywords(){this.suggestedMetaKeywords&&(this.form.meta_keywords=this.suggestedMetaKeywords)},getMetaTitleColor(){const s=this.form.meta_title?this.form.meta_title.length:0;return s===0?"primary":s<50?"warning":s>60?"error":"success"},getMetaDescriptionColor(){const s=this.form.meta_description?this.form.meta_description.length:0;return s===0?"primary":s<120?"warning":s>160?"error":"success"},getPreviewTitle(){return this.form.meta_title||this.form.title||"Service Title"},getPreviewDescription(){return this.form.meta_description||this.form.short_description||"Service description will appear here in search results..."},getPreviewUrl(){const s=window.location.origin||"https://example.com",e=this.form.slug||"service-slug";return`${s}/services/${e}`},updateFeaturesFromText(){this.featuresText?this.form.features=this.featuresText.split(`
`).map(s=>s.trim()).filter(s=>s.length>0):this.form.features=[]},updateBenefitsFromText(){this.benefitsText?this.form.benefits=this.benefitsText.split(`
`).map(s=>s.trim()).filter(s=>s.length>0):this.form.benefits=[]},removeFeature(s){this.form.features.splice(s,1),this.featuresText=this.form.features.join(`
`)},removeBenefit(s){this.form.benefits.splice(s,1),this.benefitsText=this.form.benefits.join(`
`)},async uploadImage(){var e,h,x,t,r,v;if(!this.imageFile)return null;const s=Array.isArray(this.imageFile)?this.imageFile[0]:this.imageFile;if(!s)return null;this.uploadingImage=!0;try{const u=new FormData;u.append("image",s),u.append("folder","services"),this.form.title&&u.append("prefix",this.form.title);const g=await this.$axios.post("/api/v1/upload/image",u,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(g.data.success){const _=this.normalizeImageInput(g.data.path||g.data.url);return this.form.image=_,this.imagePreview=this.resolveImageUrl(g.data.url||_),this.imageFile=null,this.imageError=null,_}else throw new Error(g.data.message||"Failed to upload image")}catch(u){console.error("Error uploading image:",u),console.error("Error response:",(e=u.response)==null?void 0:e.data);let g="Failed to upload image";if(((h=u.response)==null?void 0:h.status)===422){const _=u.response.data.errors;_&&_.image?g=Array.isArray(_.image)?_.image.join(", "):_.image:u.response.data.message&&(g=u.response.data.message)}else(t=(x=u.response)==null?void 0:x.data)!=null&&t.message?g=u.response.data.message:(v=(r=u.response)==null?void 0:r.data)!=null&&v.error?g=u.response.data.error:u.message&&(g=u.message);throw this.imageError=g,new Error(g)}finally{this.uploadingImage=!1}},async uploadOgImage(){var e,h,x,t,r,v;if(!this.ogImageFile)return null;const s=Array.isArray(this.ogImageFile)?this.ogImageFile[0]:this.ogImageFile;if(!s)return null;this.uploadingOgImage=!0;try{const u=new FormData;u.append("image",s),u.append("folder","services/og"),this.form.title&&u.append("prefix",this.form.title);const g=await this.$axios.post("/api/v1/upload/image",u,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(g.data.success){const _=this.normalizeImageInput(g.data.path||g.data.url);return this.form.og_image=_,this.ogImagePreview=this.resolveImageUrl(g.data.url||_),this.ogImageFile=null,this.ogImageError=null,_}else throw new Error(g.data.message||"Failed to upload OG image")}catch(u){console.error("Error uploading OG image:",u),console.error("Error response:",(e=u.response)==null?void 0:e.data);let g="Failed to upload OG image";if(((h=u.response)==null?void 0:h.status)===422){const _=u.response.data.errors;_&&_.image?g=Array.isArray(_.image)?_.image.join(", "):_.image:u.response.data.message&&(g=u.response.data.message)}else(t=(x=u.response)==null?void 0:x.data)!=null&&t.message?g=u.response.data.message:(v=(r=u.response)==null?void 0:r.data)!=null&&v.error?g=u.response.data.error:u.message&&(g=u.message);throw this.ogImageError=g,new Error(g)}finally{this.uploadingOgImage=!1}},async saveService(){const{valid:s}=await this.$refs.formRef.validate();if(!s){this.showError("Please fill in all required fields");return}this.updateFeaturesFromText(),this.updateBenefitsFromText(),this.saving=!0;try{if(this.imageFile)try{await this.uploadImage()}catch(h){this.showError(h.message||"Failed to upload image");return}if(this.ogImageFile)try{await this.uploadOgImage()}catch(h){this.showError(h.message||"Failed to upload OG image");return}const e={title:this.form.title,slug:this.form.slug,short_description:this.form.short_description||null,description:this.form.description||null,icon:this.form.icon||null,image:this.normalizeImageInput(this.form.image)||null,price_range:this.form.price_range||null,features:this.form.features.length>0?this.form.features:null,benefits:this.form.benefits.length>0?this.form.benefits:null,meta_title:this.form.meta_title||null,meta_description:this.form.meta_description||null,meta_keywords:this.form.meta_keywords||null,og_image:this.normalizeImageInput(this.form.og_image)||null,published:this.form.published||!1,order:this.form.order||0};this.editingService?(await this.$axios.put(`/api/v1/services/${this.editingService.id}`,e,{headers:this.getAuthHeaders()}),this.showSuccess("Service updated successfully")):(await this.$axios.post("/api/v1/services",e,{headers:this.getAuthHeaders()}),this.showSuccess("Service created successfully")),this.$emit("saved"),this.closeDialog()}catch(e){this.handleApiError(e,this.editingService?"Failed to update service":"Failed to create service")}finally{this.saving=!1}},normalizeImageInput(s){return Z(s)},resolveImageUrl(s){return Y(s)}}},ee={class:"text-h5 font-weight-bold"},te={key:0,class:"d-flex align-center justify-center pa-12"},ie={class:"text-center"},se={class:"pa-6"},le={class:"pa-6"},oe={class:"d-flex flex-column flex-md-row align-start"},re={key:0,class:"mr-md-4 mb-4 mb-md-0"},ae={class:"mt-2"},ne={class:"flex-grow-1"},de={class:"text-body-2"},me={key:2,class:"text-caption text-medium-emphasis mt-2"},ue={key:0,class:"mt-2"},ce={key:0,class:"mt-2"},ge={class:"pa-6"},pe={class:"d-flex align-center justify-space-between"},fe={class:"text-body-2"},ve={key:0,class:"ml-2"},he={key:1,class:"ml-2"},_e={key:2,class:"ml-2 text-success"},be={class:"d-flex align-center justify-space-between flex-wrap"},ye={class:"text-body-2 mb-2"},we={key:0,class:"ml-2"},xe={key:1,class:"ml-2"},Se={key:2,class:"ml-2 text-success"},ke={class:"d-flex align-center justify-space-between flex-wrap"},Ie={class:"text-body-2 mb-2"},Ve={class:"text-caption text-medium-emphasis"},Fe={class:"d-flex flex-column flex-md-row align-start"},De={key:0,class:"mr-md-4 mb-4 mb-md-0"},Pe={class:"mt-2"},Ce={class:"flex-grow-1"},Te={class:"text-body-2"},Ee={key:2,class:"text-caption text-medium-emphasis mt-2"},Me={class:"search-preview"},Ue={class:"search-url mb-1 text-caption",style:{color:"#006621"}};function ze(s,e,h,x,t,r){const v=a("v-btn"),u=a("v-card-title"),g=a("v-progress-circular"),_=a("v-tab"),E=a("v-tabs"),I=a("v-text-field"),S=a("v-col"),y=a("v-textarea"),D=a("v-icon"),V=a("v-switch"),P=a("v-row"),T=a("v-window-item"),C=a("v-label"),B=a("RichTextEditor"),U=a("v-img"),p=a("v-file-input"),k=a("v-alert"),z=a("v-card"),F=a("v-chip"),A=a("v-divider"),G=a("v-window"),H=a("v-form"),N=a("v-card-text"),W=a("v-spacer"),q=a("v-card-actions"),J=a("v-dialog");return n(),w(J,{modelValue:r.dialog,"onUpdate:modelValue":e[19]||(e[19]=d=>r.dialog=d),"max-width":"1200",scrollable:"",persistent:""},{default:l(()=>[i(z,null,{default:l(()=>[i(u,{class:"d-flex align-center justify-space-between bg-primary text-white pa-4"},{default:l(()=>[o("span",ee,c(h.editingService?"Edit Service":"Create New Service"),1),i(v,{icon:"mdi-close",variant:"text",color:"white",onClick:r.closeDialog,disabled:t.saving||t.loading},null,8,["onClick","disabled"])]),_:1}),i(N,{class:"pa-0"},{default:l(()=>[t.loading?(n(),f("div",te,[o("div",ie,[i(g,{indeterminate:"",color:"primary",size:"64"}),e[20]||(e[20]=o("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading service data...",-1))])])):(n(),w(H,{key:1,ref:"formRef"},{default:l(()=>[i(E,{modelValue:t.activeTab,"onUpdate:modelValue":e[0]||(e[0]=d=>t.activeTab=d),"bg-color":"grey-lighten-4"},{default:l(()=>[i(_,{value:"basic"},{default:l(()=>e[21]||(e[21]=[m("Basic Information")])),_:1,__:[21]}),i(_,{value:"content"},{default:l(()=>e[22]||(e[22]=[m("Content")])),_:1,__:[22]}),i(_,{value:"seo"},{default:l(()=>e[23]||(e[23]=[m("SEO & Meta")])),_:1,__:[23]})]),_:1},8,["modelValue"]),i(G,{modelValue:t.activeTab,"onUpdate:modelValue":e[18]||(e[18]=d=>t.activeTab=d)},{default:l(()=>[i(T,{value:"basic"},{default:l(()=>[o("div",se,[i(P,null,{default:l(()=>[i(S,{cols:"12"},{default:l(()=>[i(I,{modelValue:t.form.title,"onUpdate:modelValue":e[1]||(e[1]=d=>t.form.title=d),label:"Service Title *",variant:"outlined",rules:[d=>!!d||"Title is required"],hint:"Enter the service title",onBlur:r.generateSlug,"persistent-hint":""},null,8,["modelValue","rules","onBlur"])]),_:1}),i(S,{cols:"12",md:"6"},{default:l(()=>[i(I,{modelValue:t.form.slug,"onUpdate:modelValue":e[2]||(e[2]=d=>t.form.slug=d),label:"Slug *",variant:"outlined",rules:[d=>!!d||"Slug is required",d=>!d||/^[a-z0-9-]+$/.test(d)||"Slug can only contain lowercase letters, numbers, and hyphens"],hint:"URL-friendly version (auto-generated from title)","persistent-hint":""},{append:l(()=>[i(v,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateSlug,disabled:!t.form.title},null,8,["onClick","disabled"])]),_:1},8,["modelValue","rules"])]),_:1}),i(S,{cols:"12",md:"6"},{default:l(()=>[i(I,{modelValue:t.form.order,"onUpdate:modelValue":e[3]||(e[3]=d=>t.form.order=d),label:"Order",type:"number",variant:"outlined",hint:"Display order (lower numbers first)","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(y,{modelValue:t.form.short_description,"onUpdate:modelValue":e[4]||(e[4]=d=>t.form.short_description=d),label:"Short Description",variant:"outlined",rows:"3",hint:"Brief description shown in service listings","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(S,{cols:"12",md:"6"},{default:l(()=>[i(I,{modelValue:t.form.icon,"onUpdate:modelValue":e[5]||(e[5]=d=>t.form.icon=d),label:"Icon",variant:"outlined",hint:"Material Design Icon name (e.g., mdi-battery-charging-high)","persistent-hint":"","prepend-inner-icon":"mdi-information-outline"},{append:l(()=>[t.form.icon?(n(),w(D,{key:0,icon:t.form.icon,size:"small"},null,8,["icon"])):b("",!0)]),_:1},8,["modelValue"])]),_:1}),i(S,{cols:"12",md:"6"},{default:l(()=>[i(I,{modelValue:t.form.price_range,"onUpdate:modelValue":e[6]||(e[6]=d=>t.form.price_range=d),label:"Price Range",variant:"outlined",hint:"e.g., $100 - $500","persistent-hint":""},null,8,["modelValue"])]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(V,{modelValue:t.form.published,"onUpdate:modelValue":e[7]||(e[7]=d=>t.form.published=d),label:"Published",color:"success",hint:"Publish this service on the public website","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),i(T,{value:"content"},{default:l(()=>[o("div",le,[i(P,null,{default:l(()=>[i(S,{cols:"12"},{default:l(()=>[i(C,{class:"mb-2"},{default:l(()=>e[24]||(e[24]=[m("Full Description")])),_:1,__:[24]}),i(B,{modelValue:t.form.description,"onUpdate:modelValue":e[8]||(e[8]=d=>t.form.description=d),active:t.activeTab==="content",placeholder:"Enter detailed description of the service..."},null,8,["modelValue","active"])]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(C,{class:"mb-2"},{default:l(()=>e[25]||(e[25]=[m("Service Image")])),_:1,__:[25]}),i(z,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",oe,[t.imagePreview||t.form.image?(n(),f("div",re,[i(U,{src:t.imagePreview||r.resolveImageUrl(t.form.image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),o("div",ae,[i(v,{color:"error",size:"small",variant:"text",onClick:r.removeImage,"prepend-icon":"mdi-delete"},{default:l(()=>e[26]||(e[26]=[m(" Remove Image ")])),_:1,__:[26]},8,["onClick"])])])):b("",!0),o("div",ne,[i(p,{modelValue:t.imageFile,"onUpdate:modelValue":[e[9]||(e[9]=d=>t.imageFile=d),r.handleImageSelect],accept:"image/*",label:"Select Service Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 1200x800px or larger. Max file size: 5MB","persistent-hint":""},{append:l(()=>[t.uploadingImage?(n(),w(g,{key:0,indeterminate:"",color:"primary",size:"24"})):b("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),t.imageFile&&t.imageFile.size>5242880?(n(),w(k,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>e[27]||(e[27]=[m(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[27]})):b("",!0),t.imageError?(n(),w(k,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-2",closable:"","onClick:close":e[10]||(e[10]=d=>t.imageError=null)},{default:l(()=>[o("div",de,[e[28]||(e[28]=o("strong",null,"Upload Error:",-1)),m(" "+c(t.imageError),1)])]),_:1})):b("",!0),!t.imagePreview&&!t.imageFile?(n(),f("div",me," No image selected. Upload an image to display with this service. ")):b("",!0)])])]),_:1})]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(C,{class:"mb-2"},{default:l(()=>e[29]||(e[29]=[m("Features")])),_:1,__:[29]}),i(y,{modelValue:t.featuresText,"onUpdate:modelValue":e[11]||(e[11]=d=>t.featuresText=d),variant:"outlined",rows:"4",hint:"Enter one feature per line","persistent-hint":"",onBlur:r.updateFeaturesFromText},null,8,["modelValue","onBlur"]),t.form.features&&t.form.features.length>0?(n(),f("div",ue,[(n(!0),f(M,null,O(t.form.features,(d,j)=>(n(),w(F,{key:j,class:"ma-1",closable:"","onClick:close":Q=>r.removeFeature(j)},{default:l(()=>[m(c(d),1)]),_:2},1032,["onClick:close"]))),128))])):b("",!0)]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(C,{class:"mb-2"},{default:l(()=>e[30]||(e[30]=[m("Benefits")])),_:1,__:[30]}),i(y,{modelValue:t.benefitsText,"onUpdate:modelValue":e[12]||(e[12]=d=>t.benefitsText=d),variant:"outlined",rows:"4",hint:"Enter one benefit per line","persistent-hint":"",onBlur:r.updateBenefitsFromText},null,8,["modelValue","onBlur"]),t.form.benefits&&t.form.benefits.length>0?(n(),f("div",ce,[(n(!0),f(M,null,O(t.form.benefits,(d,j)=>(n(),w(F,{key:j,class:"ma-1",closable:"","onClick:close":Q=>r.removeBenefit(j),color:"success",variant:"flat"},{default:l(()=>[m(c(d),1)]),_:2},1032,["onClick:close"]))),128))])):b("",!0)]),_:1})]),_:1})])]),_:1}),i(T,{value:"seo"},{default:l(()=>[o("div",ge,[i(k,{type:"info",variant:"tonal",class:"mb-6",density:"compact"},{default:l(()=>e[31]||(e[31]=[o("div",{class:"text-body-2"},[o("strong",null,"SEO Best Practices:"),m(" Fill in these fields to improve your service visibility in search engines and social media. If left empty, default values from the service title and description will be used. ")],-1)])),_:1,__:[31]}),i(P,null,{default:l(()=>[i(S,{cols:"12"},{default:l(()=>[i(I,{modelValue:t.form.meta_title,"onUpdate:modelValue":e[13]||(e[13]=d=>t.form.meta_title=d),label:"Meta Title",variant:"outlined",hint:"SEO title for search engines (recommended: 50-60 characters)","persistent-hint":"",counter:60,color:r.getMetaTitleColor(),"prepend-inner-icon":"mdi-format-title"},{append:l(()=>[i(v,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateMetaTitle,disabled:!t.form.title,title:"Auto-generate from service title"},null,8,["onClick","disabled"])]),_:1},8,["modelValue","color"]),!t.form.meta_title&&r.suggestedMetaTitle?(n(),w(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",pe,[o("span",fe,[e[32]||(e[32]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaTitle),1)]),i(v,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaTitle,class:"ml-2"},{default:l(()=>e[33]||(e[33]=[m(" Apply ")])),_:1,__:[33]},8,["onClick"])])]),_:1})):b("",!0),o("div",{class:R(["text-caption",r.getMetaTitleColor()+"--text"])},[m(c(t.form.meta_title.length)+"/60 characters ",1),t.form.meta_title.length<50?(n(),f("span",ve," (Too short - recommended: 50-60) ")):t.form.meta_title.length>60?(n(),f("span",he," (Too long - may be truncated) ")):(n(),f("span",_e,"✓ Good length"))],2)]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(y,{modelValue:t.form.meta_description,"onUpdate:modelValue":e[14]||(e[14]=d=>t.form.meta_description=d),label:"Meta Description",variant:"outlined",rows:"4",hint:"SEO description for search results (recommended: 150-160 characters)","persistent-hint":"",counter:160,color:r.getMetaDescriptionColor(),"prepend-inner-icon":"mdi-text"},{append:l(()=>[i(v,{icon:"mdi-refresh",size:"small",variant:"text",onClick:r.generateMetaDescription,disabled:!t.form.short_description,title:"Auto-generate from short description"},null,8,["onClick","disabled"])]),_:1},8,["modelValue","color"]),!t.form.meta_description&&r.suggestedMetaDescription?(n(),w(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",be,[o("span",ye,[e[34]||(e[34]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaDescription),1)]),i(v,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaDescription},{default:l(()=>e[35]||(e[35]=[m(" Apply ")])),_:1,__:[35]},8,["onClick"])])]),_:1})):b("",!0),o("div",{class:R(["text-caption",r.getMetaDescriptionColor()+"--text"])},[m(c(t.form.meta_description.length)+"/160 characters ",1),t.form.meta_description.length<120?(n(),f("span",we," (Too short - recommended: 150-160) ")):t.form.meta_description.length>160?(n(),f("span",xe," (Too long - may be truncated) ")):(n(),f("span",Se,"✓ Good length"))],2)]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(I,{modelValue:t.form.meta_keywords,"onUpdate:modelValue":e[15]||(e[15]=d=>t.form.meta_keywords=d),label:"Meta Keywords",variant:"outlined",hint:"Comma-separated keywords for SEO (e.g., power backup, UPS systems, battery)","persistent-hint":"","prepend-inner-icon":"mdi-tag-multiple"},{append:l(()=>[i(v,{icon:"mdi-auto-fix",size:"small",variant:"text",onClick:r.generateMetaKeywords,disabled:!t.form.title&&!t.form.short_description&&t.form.features.length===0,title:"Auto-generate from title, description, and features"},null,8,["onClick","disabled"])]),_:1},8,["modelValue"]),!t.form.meta_keywords&&r.suggestedMetaKeywords?(n(),w(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[o("div",ke,[o("span",Ie,[e[36]||(e[36]=o("strong",null,"Suggested:",-1)),m(" "+c(r.suggestedMetaKeywords),1)]),i(v,{size:"small",color:"primary",variant:"text",onClick:r.applySuggestedMetaKeywords},{default:l(()=>e[37]||(e[37]=[m(" Apply ")])),_:1,__:[37]},8,["onClick"])])]),_:1})):b("",!0),o("div",Ve,c((t.form.meta_keywords||"").split(",").filter(d=>d.trim()).length)+" keywords entered ",1)]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(A,{class:"my-4"}),e[38]||(e[38]=o("h3",{class:"text-h6 font-weight-bold mb-4"},"Open Graph (Social Media)",-1)),e[39]||(e[39]=o("p",{class:"text-body-2 text-medium-emphasis mb-4"}," This image will be displayed when your service is shared on social media platforms like Facebook, Twitter, LinkedIn, etc. ",-1))]),_:1,__:[38,39]}),i(S,{cols:"12"},{default:l(()=>[i(C,{class:"mb-2"},{default:l(()=>e[40]||(e[40]=[m("Open Graph Image")])),_:1,__:[40]}),i(z,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",Fe,[t.ogImagePreview||t.form.og_image?(n(),f("div",De,[i(U,{src:t.ogImagePreview||r.resolveImageUrl(t.form.og_image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),o("div",Pe,[i(v,{color:"error",size:"small",variant:"text",onClick:r.removeOgImage,"prepend-icon":"mdi-delete"},{default:l(()=>e[41]||(e[41]=[m(" Remove Image ")])),_:1,__:[41]},8,["onClick"])]),e[42]||(e[42]=o("div",{class:"text-caption text-medium-emphasis mt-2"}," Recommended: 1200x630px (1.91:1 ratio) ",-1))])):b("",!0),o("div",Ce,[i(p,{modelValue:t.ogImageFile,"onUpdate:modelValue":[e[16]||(e[16]=d=>t.ogImageFile=d),r.handleOgImageSelect],accept:"image/*",label:"Select Open Graph Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 1200x630px. Max file size: 5MB","persistent-hint":""},{append:l(()=>[t.uploadingOgImage?(n(),w(g,{key:0,indeterminate:"",color:"primary",size:"24"})):b("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),t.ogImageFile&&t.ogImageFile.size>5242880?(n(),w(k,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>e[43]||(e[43]=[m(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[43]})):b("",!0),t.ogImageError?(n(),w(k,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-2",closable:"","onClick:close":e[17]||(e[17]=d=>t.ogImageError=null)},{default:l(()=>[o("div",Te,[e[44]||(e[44]=o("strong",null,"Upload Error:",-1)),m(" "+c(t.ogImageError),1)])]),_:1})):b("",!0),!t.ogImagePreview&&!t.ogImageFile?(n(),f("div",Ee," No image selected. If not provided, the service image will be used. ")):b("",!0)])])]),_:1})]),_:1}),i(S,{cols:"12"},{default:l(()=>[i(A,{class:"my-4"}),e[45]||(e[45]=o("h3",{class:"text-h6 font-weight-bold mb-4"},"Search Engine Preview",-1)),i(z,{variant:"outlined",class:"pa-4"},{default:l(()=>[o("div",Me,[o("div",Ue,c(r.getPreviewUrl()),1),o("div",{class:R(["search-title mb-1 text-h6",r.getMetaTitleColor()+"--text"]),style:{color:"#1a0dab",cursor:"pointer"}},c(r.getPreviewTitle()),3),o("div",{class:R(["search-description text-body-2",r.getMetaDescriptionColor()+"--text"]),style:{color:"#545454"}},c(r.getPreviewDescription()),3)])]),_:1})]),_:1,__:[45]})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1},512))]),_:1}),i(q,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[i(W),i(v,{variant:"text",onClick:r.closeDialog,disabled:t.saving},{default:l(()=>e[46]||(e[46]=[m("Cancel")])),_:1,__:[46]},8,["onClick","disabled"]),i(v,{color:"primary",variant:"flat",onClick:r.saveService,loading:t.saving},{default:l(()=>[m(c(h.editingService?"Update":"Create")+" Service ",1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Ae=K($,[["render",ze],["__scopeId","data-v-b808e99a"]]),Oe={name:"ServiceDetailsDialog",props:{modelValue:{type:Boolean,default:!1},serviceId:{type:[Number,String],default:null}},emits:["update:modelValue","edit"],data(){return{loading:!1,service:null,tab:"basic"}},computed:{dialog:{get(){return this.modelValue},set(s){this.$emit("update:modelValue",s)}}},watch:{modelValue(s){s&&this.serviceId&&this.loadService()},serviceId(){this.dialog&&this.serviceId&&this.loadService()}},methods:{async loadService(){if(this.serviceId){this.loading=!0,this.service=null,this.tab="basic";try{const e=(await this.$axios.get(`/api/v1/services/${this.serviceId}`,{headers:this.getAuthHeaders()})).data;if(!e)throw new Error("No service data received");this.service=e}catch(s){console.error("Failed to load service details:",s),alert("Failed to load service details. Please try again."),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){this.dialog=!1,this.service=null,this.tab="basic"},handleEdit(){this.service&&(this.$emit("edit",this.service),this.closeDialog())},getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}},formatDateTime(s){return s?new Date(s).toLocaleString():"-"}}},Be={class:"d-flex align-center"},je={key:0,class:"d-flex align-center justify-center pa-12"},Re={class:"text-center"},Ke={key:1},Le={class:"text-h6 font-weight-bold mb-4"},Ge={class:"text-body-1 mb-4"},He={class:"text-body-1 mb-4"},Ne={class:"text-body-1 mb-4"},We={class:"text-body-1 mb-4"},qe={key:1,class:"text-grey"},Je={class:"text-body-1 mb-4"},Qe={class:"mb-4"},Xe={class:"mb-4"},Ye={class:"mb-4"},Ze={class:"text-body-1 mb-4"},$e={class:"text-body-1 mb-4"},et=["innerHTML"],tt={class:"text-body-1 mb-4"},it={class:"text-body-1 mb-4"},st={class:"text-body-1 mb-4"};function lt(s,e,h,x,t,r){const v=a("v-icon"),u=a("v-btn"),g=a("v-card-title"),_=a("v-progress-circular"),E=a("v-tab"),I=a("v-tabs"),S=a("v-divider"),y=a("v-col"),D=a("v-chip"),V=a("v-row"),P=a("v-window-item"),T=a("v-img"),C=a("v-window"),B=a("v-card-text"),U=a("v-spacer"),p=a("v-card-actions"),k=a("v-card"),z=a("v-dialog");return n(),w(z,{modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=F=>r.dialog=F),"max-width":"1200",scrollable:""},{default:l(()=>[i(k,null,{default:l(()=>[i(g,{class:"d-flex align-center justify-space-between bg-info text-white pa-4"},{default:l(()=>[o("div",Be,[i(v,{icon:"mdi-eye",class:"mr-3"}),e[3]||(e[3]=o("span",{class:"text-h5 font-weight-bold"},"Service Details",-1))]),i(u,{icon:"mdi-close",variant:"text",color:"white",onClick:r.closeDialog,disabled:t.loading},null,8,["onClick","disabled"])]),_:1}),i(B,{class:"pa-0"},{default:l(()=>[t.loading?(n(),f("div",je,[o("div",Re,[i(_,{indeterminate:"",color:"info",size:"64"}),e[4]||(e[4]=o("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading service details...",-1))])])):t.service?(n(),f("div",Ke,[i(I,{modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=F=>t.tab=F),color:"info","bg-color":"grey-lighten-4"},{default:l(()=>[i(E,{value:"basic"},{default:l(()=>[i(v,{icon:"mdi-information",class:"mr-2"}),e[5]||(e[5]=m(" Basic Info "))]),_:1,__:[5]}),i(E,{value:"content"},{default:l(()=>[i(v,{icon:"mdi-text",class:"mr-2"}),e[6]||(e[6]=m(" Content "))]),_:1,__:[6]}),i(E,{value:"seo"},{default:l(()=>[i(v,{icon:"mdi-search-web",class:"mr-2"}),e[7]||(e[7]=m(" SEO & Meta "))]),_:1,__:[7]})]),_:1},8,["modelValue"]),i(S),i(C,{modelValue:t.tab,"onUpdate:modelValue":e[1]||(e[1]=F=>t.tab=F),class:"pa-6"},{default:l(()=>[i(P,{value:"basic"},{default:l(()=>[i(V,null,{default:l(()=>[i(y,{cols:"12"},{default:l(()=>[e[8]||(e[8]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Service Title",-1)),o("div",Le,c(t.service.title||"-"),1)]),_:1,__:[8]}),i(y,{cols:"12",md:"6"},{default:l(()=>[e[9]||(e[9]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Slug",-1)),o("div",Ge,[i(D,{size:"small",variant:"outlined"},{default:l(()=>[m(c(t.service.slug||"-"),1)]),_:1})])]),_:1,__:[9]}),i(y,{cols:"12",md:"6"},{default:l(()=>[e[10]||(e[10]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Order",-1)),o("div",He,c(t.service.order||0),1)]),_:1,__:[10]}),i(y,{cols:"12"},{default:l(()=>[e[11]||(e[11]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Short Description",-1)),o("div",Ne,c(t.service.short_description||"-"),1)]),_:1,__:[11]}),i(y,{cols:"12",md:"6"},{default:l(()=>[e[12]||(e[12]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Icon",-1)),o("div",We,[t.service.icon?(n(),w(v,{key:0,icon:t.service.icon,size:"large"},null,8,["icon"])):(n(),f("span",qe,"-"))])]),_:1,__:[12]}),i(y,{cols:"12",md:"6"},{default:l(()=>[e[13]||(e[13]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Price Range",-1)),o("div",Je,c(t.service.price_range||"-"),1)]),_:1,__:[13]}),i(y,{cols:"12"},{default:l(()=>[e[14]||(e[14]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Status",-1)),o("div",Qe,[i(D,{color:t.service.published?"success":"error",size:"small"},{default:l(()=>[m(c(t.service.published?"Published":"Draft"),1)]),_:1},8,["color"])])]),_:1,__:[14]}),t.service.features&&t.service.features.length>0?(n(),w(y,{key:0,cols:"12"},{default:l(()=>[e[15]||(e[15]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Features",-1)),o("div",Xe,[(n(!0),f(M,null,O(t.service.features,(F,A)=>(n(),w(D,{key:A,class:"ma-1",size:"small",color:"primary",variant:"flat"},{default:l(()=>[m(c(F),1)]),_:2},1024))),128))])]),_:1,__:[15]})):b("",!0),t.service.benefits&&t.service.benefits.length>0?(n(),w(y,{key:1,cols:"12"},{default:l(()=>[e[16]||(e[16]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Benefits",-1)),o("div",Ye,[(n(!0),f(M,null,O(t.service.benefits,(F,A)=>(n(),w(D,{key:A,class:"ma-1",size:"small",color:"success",variant:"flat"},{default:l(()=>[m(c(F),1)]),_:2},1024))),128))])]),_:1,__:[16]})):b("",!0),t.service.created_at?(n(),w(y,{key:2,cols:"12"},{default:l(()=>[e[17]||(e[17]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Created At",-1)),o("div",Ze,c(r.formatDateTime(t.service.created_at)),1)]),_:1,__:[17]})):b("",!0),t.service.updated_at?(n(),w(y,{key:3,cols:"12"},{default:l(()=>[e[18]||(e[18]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Updated At",-1)),o("div",$e,c(r.formatDateTime(t.service.updated_at)),1)]),_:1,__:[18]})):b("",!0)]),_:1})]),_:1}),i(P,{value:"content"},{default:l(()=>[i(V,null,{default:l(()=>[t.service.image?(n(),w(y,{key:0,cols:"12"},{default:l(()=>[e[19]||(e[19]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Service Image",-1)),i(T,{src:t.service.image,"max-width":"600","max-height":"400",class:"rounded elevation-2 mb-4",cover:""},null,8,["src"])]),_:1,__:[19]})):b("",!0),i(y,{cols:"12"},{default:l(()=>[e[20]||(e[20]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Full Description",-1)),o("div",{class:"text-body-1",innerHTML:t.service.description||"-"},null,8,et)]),_:1,__:[20]})]),_:1})]),_:1}),i(P,{value:"seo"},{default:l(()=>[i(V,null,{default:l(()=>[i(y,{cols:"12"},{default:l(()=>[e[21]||(e[21]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Title",-1)),o("div",tt,c(t.service.meta_title||"-"),1)]),_:1,__:[21]}),i(y,{cols:"12"},{default:l(()=>[e[22]||(e[22]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Description",-1)),o("div",it,c(t.service.meta_description||"-"),1)]),_:1,__:[22]}),i(y,{cols:"12"},{default:l(()=>[e[23]||(e[23]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Keywords",-1)),o("div",st,c(t.service.meta_keywords||"-"),1)]),_:1,__:[23]}),t.service.og_image?(n(),w(y,{key:0,cols:"12"},{default:l(()=>[e[24]||(e[24]=o("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Open Graph Image",-1)),i(T,{src:t.service.og_image,"max-width":"600","max-height":"400",class:"rounded elevation-2 mb-4",cover:""},null,8,["src"])]),_:1,__:[24]})):b("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):b("",!0)]),_:1}),i(p,{class:"pa-4 bg-grey-lighten-5"},{default:l(()=>[i(U),i(u,{color:"primary","prepend-icon":"mdi-pencil",onClick:r.handleEdit},{default:l(()=>e[25]||(e[25]=[m(" Edit Service ")])),_:1,__:[25]},8,["onClick"]),i(u,{color:"grey",variant:"text",onClick:r.closeDialog},{default:l(()=>e[26]||(e[26]=[m("Close")])),_:1,__:[26]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const ot=K(Oe,[["render",lt]]),rt={components:{ServiceFormDialog:Ae,ServiceDetailsDialog:ot},mixins:[L],data(){return{services:[],showDialog:!1,editingService:null,showDetailsDialog:!1,selectedServiceId:null,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadServices()},methods:{async loadServices(){try{this.loading=!0;const s=this.buildPaginationParams();this.search&&(s.search=this.search),this.publishedFilter!==null&&(s.published=this.publishedFilter);const e=await this.$axios.get("/api/v1/services",{params:s,headers:this.getAuthHeaders()});this.services=e.data.data||[],this.updatePagination(e.data)}catch(s){this.handleApiError(s,"Failed to load services")}finally{this.loading=!1}},openDialog(s=null){this.editingService=s,this.showDialog=!0},editService(s){this.openDialog(s)},viewService(s){this.selectedServiceId=s.id,this.showDetailsDialog=!0},handleEditFromDetails(s){this.showDetailsDialog=!1,this.$nextTick(()=>{this.openDialog(s)})},handleServiceSaved(){this.loadServices()},async deleteService(s){if(confirm("Are you sure you want to delete this service?"))try{await this.$axios.delete(`/api/v1/services/${s}`,{headers:this.getAuthHeaders()}),this.showSuccess("Service deleted successfully"),await this.loadServices()}catch(e){this.handleApiError(e,"Error deleting service")}},onPerPageChange(){this.resetPagination(),this.loadServices()},onSort(s){this.handleSort(s),this.loadServices()}}},at={class:"page-header"},nt={class:"text-caption text-grey"},dt={key:0},mt={class:"d-flex align-center"},ut={class:"d-flex align-center"},ct={class:"d-flex align-center"},gt={class:"d-flex"},pt={key:0},ft={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},vt={class:"text-caption text-grey"},ht={key:0},_t={key:0,class:"ml-2"},bt={key:1},yt={key:0,class:"d-flex align-center gap-2"};function wt(s,e,h,x,t,r){const v=a("v-btn"),u=a("v-select"),g=a("v-col"),_=a("v-text-field"),E=a("v-row"),I=a("v-card-text"),S=a("v-card"),y=a("v-card-title"),D=a("v-icon"),V=a("v-skeleton-loader"),P=a("v-chip"),T=a("v-table"),C=a("v-pagination"),B=a("ServiceFormDialog"),U=a("ServiceDetailsDialog");return n(),f("div",null,[o("div",at,[e[11]||(e[11]=o("h1",{class:"text-h4 page-title"},"Services Management",-1)),i(v,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=p=>r.openDialog()),class:"add-button"},{default:l(()=>e[10]||(e[10]=[m("Create Service")])),_:1,__:[10]})]),i(S,{class:"mb-4"},{default:l(()=>[i(I,null,{default:l(()=>[i(E,null,{default:l(()=>[i(g,{cols:"12",md:"4"},{default:l(()=>[i(u,{modelValue:s.perPage,"onUpdate:modelValue":[e[1]||(e[1]=p=>s.perPage=p),r.onPerPageChange],items:s.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),i(g,{cols:"12",md:"4"},{default:l(()=>[i(u,{modelValue:t.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=p=>t.publishedFilter=p),r.loadServices],items:t.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),i(g,{cols:"12",md:"4"},{default:l(()=>[i(_,{modelValue:s.search,"onUpdate:modelValue":[e[3]||(e[3]=p=>s.search=p),r.loadServices],label:"Search services","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),i(S,null,{default:l(()=>[i(y,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[13]||(e[13]=o("span",null,"Services",-1)),o("span",nt,[e[12]||(e[12]=m(" Total Records: ")),o("strong",null,c(s.pagination.total||0),1),t.services.length>0?(n(),f("span",dt," | Showing "+c((s.currentPage-1)*s.perPage+1)+" to "+c(Math.min(s.currentPage*s.perPage,s.pagination.total))+" of "+c(s.pagination.total),1)):b("",!0)])]),_:1,__:[13]}),i(I,null,{default:l(()=>[i(T,null,{default:l(()=>[o("thead",null,[o("tr",null,[o("th",{class:"sortable",onClick:e[4]||(e[4]=p=>r.onSort("title"))},[o("div",mt,[e[14]||(e[14]=m(" Title ")),i(D,{icon:s.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[5]||(e[5]=p=>r.onSort("slug"))},[o("div",ut,[e[15]||(e[15]=m(" Slug ")),i(D,{icon:s.getSortIcon("slug"),size:"small",class:"ml-1"},null,8,["icon"])])]),o("th",{class:"sortable",onClick:e[6]||(e[6]=p=>r.onSort("published"))},[o("div",ct,[e[16]||(e[16]=m(" Published ")),i(D,{icon:s.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[17]||(e[17]=o("th",null,"Actions",-1))])]),o("tbody",null,[s.loading?(n(),f(M,{key:0},O(5,p=>o("tr",{key:`skeleton-${p}`},[o("td",null,[i(V,{type:"text",width:"200"})]),o("td",null,[i(V,{type:"chip",width:"150",height:"24"})]),o("td",null,[i(V,{type:"chip",width:"80",height:"24"})]),o("td",null,[o("div",gt,[i(V,{type:"button",width:"32",height:"32",class:"mr-1"}),i(V,{type:"button",width:"32",height:"32",class:"mr-1"}),i(V,{type:"button",width:"32",height:"32"})])])])),64)):(n(),f(M,{key:1},[(n(!0),f(M,null,O(t.services,p=>(n(),f("tr",{key:p.id},[o("td",null,c(p.title),1),o("td",null,[i(P,{size:"small",variant:"outlined"},{default:l(()=>[m(c(p.slug),1)]),_:2},1024)]),o("td",null,[i(P,{color:p.published?"success":"error",size:"small"},{default:l(()=>[m(c(p.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),o("td",null,[i(v,{size:"small",icon:"mdi-eye",onClick:k=>r.viewService(p),variant:"text",color:"info",title:"View Service"},null,8,["onClick"]),i(v,{size:"small",icon:"mdi-pencil",onClick:k=>r.editService(p),variant:"text",title:"Edit Service"},null,8,["onClick"]),i(v,{size:"small",icon:"mdi-delete",onClick:k=>r.deleteService(p.id),variant:"text",color:"error",title:"Delete Service"},null,8,["onClick"])])]))),128)),t.services.length===0?(n(),f("tr",pt,e[18]||(e[18]=[o("td",{colspan:"4",class:"text-center py-4"},"No services found",-1)]))):b("",!0)],64))])]),_:1}),o("div",ft,[o("div",vt,[t.services.length>0&&s.pagination.total>0?(n(),f("span",ht,[e[19]||(e[19]=m(" Showing ")),o("strong",null,c((s.currentPage-1)*s.perPage+1),1),e[20]||(e[20]=m(" to ")),o("strong",null,c(Math.min(s.currentPage*s.perPage,s.pagination.total)),1),e[21]||(e[21]=m(" of ")),o("strong",null,c(s.pagination.total.toLocaleString()),1),e[22]||(e[22]=m(" records ")),s.pagination.last_page>1?(n(),f("span",_t," (Page "+c(s.currentPage)+" of "+c(s.pagination.last_page)+") ",1)):b("",!0)])):(n(),f("span",bt," No records found "))]),s.pagination.last_page>1?(n(),f("div",yt,[i(C,{modelValue:s.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=p=>s.currentPage=p),r.loadServices],length:s.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):b("",!0)])]),_:1})]),_:1}),i(B,{modelValue:t.showDialog,"onUpdate:modelValue":e[8]||(e[8]=p=>t.showDialog=p),"editing-service":t.editingService,onSaved:r.handleServiceSaved},null,8,["modelValue","editing-service","onSaved"]),i(U,{modelValue:t.showDetailsDialog,"onUpdate:modelValue":e[9]||(e[9]=p=>t.showDetailsDialog=p),"service-id":t.selectedServiceId,onEdit:r.handleEditFromDetails},null,8,["modelValue","service-id","onEdit"])])}const Vt=K(rt,[["render",wt]]);export{Vt as default};
