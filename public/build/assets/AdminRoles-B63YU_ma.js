import{_ as q,d as c,a as r,b as t,w as l,f as m,r as f,h as P,t as p,F as V,e as S,c as y,i as J,g as k,o as d}from"./app-D_WvYKr6.js";import{a as K}from"./adminPaginationMixin-DN7Wb3ng.js";const Q={mixins:[K],data(){return{roles:[],permissions:[],groupedPermissions:{},dialog:!1,permissionDialog:!1,editingRole:null,selectedRole:null,loadingPermissions:!1,savingPermissions:!1,selectedPermissions:[],activeFilter:null,activeOptions:[{title:"Active",value:!0},{title:"Inactive",value:!1}],form:{name:"",slug:"",description:"",is_active:!0,order:0,permissions:[]},permissionSearch:"",rules:{required:s=>!!s||"This field is required"},autoGeneratingSlug:!1}},computed:{safeGroupedPermissions(){if(!this.groupedPermissions||typeof this.groupedPermissions!="object")return{};const s={};return Object.keys(this.groupedPermissions).forEach(e=>{Array.isArray(this.groupedPermissions[e])&&(s[e]=this.groupedPermissions[e])}),s},filteredGroupedPermissions(){if(!this.permissionSearch)return this.safeGroupedPermissions;const s=this.permissionSearch.toLowerCase(),e={};return Object.keys(this.safeGroupedPermissions).forEach(a=>{const g=this.safeGroupedPermissions[a];if(Array.isArray(g)){const i=g.filter(n=>{const u=(n.name||"").toLowerCase(),_=(n.description||"").toLowerCase(),b=(n.slug||"").toLowerCase();return u.includes(s)||_.includes(s)||b.includes(s)});i.length>0&&(e[a]=i)}}),e}},async mounted(){await this.loadRoles(),await this.loadPermissions()},methods:{async loadRoles(){var s;try{this.loading=!0;const e=this.buildPaginationParams();this.search&&(e.search=this.search),this.activeFilter!==null&&(e.active=this.activeFilter);const a=await k.get("/api/v1/roles",{params:e,headers:this.getAuthHeaders()});a.data.data?(this.roles=a.data.data||[],this.updatePagination(a.data)):(this.roles=a.data||[],this.pagination={current_page:1,last_page:1,per_page:this.roles.length,total:this.roles.length}),this.roles.length===0&&console.warn("No roles found. Run the seeder to create default roles.")}catch(e){((s=e.response)==null?void 0:s.status)===404?this.handleApiError(e,"Roles endpoint not found. Please ensure migrations and seeders have run."):this.handleApiError(e,"Failed to load roles")}finally{this.loading=!1}},async loadPermissions(){try{const s=await k.get("/api/v1/permissions",{params:{grouped:!0},headers:this.getAuthHeaders()});let e=s.data;if(s.data&&s.data.data&&(e=s.data.data),!e||typeof e!="object"){console.warn("Invalid permissions response structure:",e),this.groupedPermissions={},this.permissions=[];return}Array.isArray(e)?(this.groupedPermissions={},e.forEach(a=>{const g=a.group||a.group_name||"general";this.groupedPermissions[g]||(this.groupedPermissions[g]=[]),this.groupedPermissions[g].push(a)})):this.groupedPermissions=e,this.permissions=[],Object.values(this.groupedPermissions).forEach(a=>{Array.isArray(a)?this.permissions.push(...a):console.warn("Invalid group structure:",a)})}catch(s){console.error("Error loading permissions:",s),this.groupedPermissions={},this.permissions=[],this.handleApiError(s,"Failed to load permissions")}},async openDialog(s){if(Object.keys(this.groupedPermissions).length===0&&await this.loadPermissions(),s){this.editingRole=s;let e=[];if(s.permissions)e=s.permissions.map(a=>typeof a=="object"&&a.id?a.id:a);else try{const a=await k.get(`/api/v1/roles/${s.id}`,{headers:this.getAuthHeaders()});a.data&&a.data.permissions&&(e=a.data.permissions.map(g=>typeof g=="object"&&g.id?g.id:g))}catch(a){console.warn("Could not load role permissions:",a)}this.form={name:s.name,slug:s.slug,description:s.description||"",is_active:s.is_active,order:s.order||0,permissions:e}}else this.editingRole=null,this.form={name:"",slug:"",description:"",is_active:!0,order:0,permissions:[]};this.dialog=!0},closeDialog(){this.dialog=!1,this.editingRole=null,this.permissionSearch="",this.form={name:"",slug:"",description:"",is_active:!0,order:0,permissions:[]},this.$refs.roleForm&&this.$refs.roleForm.resetValidation()},autoGenerateSlugFromName(){!this.form.slug&&this.form.name&&!this.editingRole&&(this.form.slug=this.form.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},async saveRole(){var s,e,a,g;if(!this.$refs.roleForm){this.showError("Form reference not found");return}if(this.$refs.roleForm.validate()){!this.form.slug&&this.form.name&&(this.form.slug=this.form.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")),this.saving=!0;try{const i=this.editingRole?`/api/v1/roles/${this.editingRole.id}`:"/api/v1/roles",n=this.editingRole?"put":"post",u={name:this.form.name.trim(),description:this.form.description?this.form.description.trim():null,is_active:this.form.is_active===!0||this.form.is_active==="true"||this.form.is_active===1,order:parseInt(this.form.order)||0};this.editingRole?this.form.slug!==this.editingRole.slug&&(this.form.slug&&this.form.slug.trim()?u.slug=this.form.slug.trim():u.slug=""):this.form.slug&&this.form.slug.trim()&&(u.slug=this.form.slug.trim()),this.form.permissions&&Array.isArray(this.form.permissions)&&(u.permissions=this.form.permissions),await k[n](i,u,{headers:this.getAuthHeaders()}),this.showSuccess(this.editingRole?"Role updated successfully":"Role created successfully"),this.closeDialog(),await this.loadRoles()}catch(i){if(console.error("Error saving role:",i),console.error("Error response:",i.response),(e=(s=i.response)==null?void 0:s.data)!=null&&e.errors){const n=i.response.data.errors,u=[];Object.keys(n).forEach(_=>{Array.isArray(n[_])?u.push(`${_}: ${n[_][0]}`):u.push(`${_}: ${n[_]}`)})}else(g=(a=i.response)==null?void 0:a.data)!=null&&g.message&&i.response.data.message;this.handleApiError(i,"Error saving role")}finally{this.saving=!1}}},async deleteRole(s){if(s.is_system){this.showError("System roles cannot be deleted");return}if(confirm(`Are you sure you want to delete the role "${s.name}"?`))try{await k.delete(`/api/v1/roles/${s.id}`,{headers:this.getAuthHeaders()}),this.showSuccess("Role deleted successfully"),await this.loadRoles()}catch(e){this.handleApiError(e,"Error deleting role")}},async openPermissionDialog(s){this.selectedRole=s,this.selectedPermissions=s.permissions?s.permissions.map(e=>e.id||e):[],this.permissionDialog=!0},closePermissionDialog(){this.permissionDialog=!1,this.selectedRole=null,this.selectedPermissions=[]},isPermissionSelected(s){return this.selectedPermissions.includes(s)},togglePermission(s){const e=this.selectedPermissions.indexOf(s);e>-1?this.selectedPermissions.splice(e,1):this.selectedPermissions.push(s)},isFormPermissionSelected(s){return this.form.permissions.includes(s)},toggleFormPermission(s){const e=this.form.permissions.indexOf(s);e>-1?this.form.permissions.splice(e,1):this.form.permissions.push(s)},getSelectedCountInGroup(s){const e=this.filteredGroupedPermissions[s]||this.safeGroupedPermissions[s];return!e||!Array.isArray(e)?0:e.filter(a=>this.form.permissions.includes(a.id)).length},selectAllPermissions(){this.permissions.forEach(s=>{this.form.permissions.includes(s.id)||this.form.permissions.push(s.id)})},deselectAllPermissions(){this.form.permissions=[]},selectAllInGroup(s){const e=this.filteredGroupedPermissions[s]||this.safeGroupedPermissions[s];e&&Array.isArray(e)&&e.forEach(a=>{this.form.permissions.includes(a.id)||this.form.permissions.push(a.id)})},deselectAllInGroup(s){const e=this.filteredGroupedPermissions[s]||this.safeGroupedPermissions[s];if(e&&Array.isArray(e)){const a=e.map(g=>g.id);this.form.permissions=this.form.permissions.filter(g=>!a.includes(g))}},async savePermissions(){this.savingPermissions=!0;try{await k.put(`/api/v1/roles/${this.selectedRole.id}/permissions`,{permissions:this.selectedPermissions},{headers:this.getAuthHeaders()}),this.showSuccess("Permissions updated successfully"),this.closePermissionDialog(),await this.loadRoles()}catch(s){this.handleApiError(s,"Error saving permissions")}finally{this.savingPermissions=!1}},onPerPageChange(){this.resetPagination(),this.loadRoles()},onSort(s){this.handleSort(s),this.loadRoles()}}},W={class:"page-header"},X={class:"text-caption text-grey"},Y={key:0},Z={class:"d-flex align-center"},$={class:"d-flex align-center"},ee={class:"d-flex align-center"},se={class:"font-weight-medium"},ie={class:"text-caption text-grey"},te={key:1,class:"text-caption"},oe={key:0},le={class:"d-flex flex-column flex-md-row justify-space-between align-center align-md-start gap-3 mt-4"},re={class:"text-caption text-grey"},ne={key:0},ae={key:0,class:"ml-2"},de={key:1},me={key:0,class:"d-flex align-center gap-2"},ue={class:"mb-2"},ce={class:"d-flex justify-space-between align-center mb-2"},pe={class:"d-flex gap-2"},fe={key:0,class:"permissions-container mb-4"},ge={class:"d-flex align-center gap-2"},he={class:"text-h6"},ve={class:"d-flex gap-1"},ye={class:"font-weight-medium"},_e={key:0,class:"text-caption text-grey"},Pe={key:0},be={key:1},Re={key:0,class:"text-center py-4"},ke={key:1},Ae={key:0,class:"text-center py-4"},we={key:1},Ce={class:"text-h6 mb-3"};function Ve(s,e,a,g,i,n){const u=f("v-btn"),_=f("v-select"),b=f("v-col"),A=f("v-text-field"),G=f("v-row"),w=f("v-card-text"),C=f("v-card"),x=f("v-card-title"),U=f("v-icon"),R=f("v-chip"),N=f("v-table"),j=f("v-pagination"),D=f("v-alert"),O=f("v-textarea"),L=f("v-switch"),M=f("v-divider"),E=f("v-checkbox"),B=f("v-form"),F=f("v-spacer"),z=f("v-card-actions"),I=f("v-dialog"),H=f("v-progress-circular");return d(),c("div",null,[r("div",W,[e[17]||(e[17]=r("h1",{class:"text-h4 page-title"},"Role Management",-1)),t(u,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=o=>n.openDialog(null)),class:"add-button"},{default:l(()=>e[16]||(e[16]=[m(" Add New Role ")])),_:1,__:[16]})]),t(C,{class:"mb-4"},{default:l(()=>[t(w,null,{default:l(()=>[t(G,null,{default:l(()=>[t(b,{cols:"12",md:"4"},{default:l(()=>[t(_,{modelValue:s.perPage,"onUpdate:modelValue":[e[1]||(e[1]=o=>s.perPage=o),n.onPerPageChange],items:s.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(b,{cols:"12",md:"4"},{default:l(()=>[t(_,{modelValue:i.activeFilter,"onUpdate:modelValue":[e[2]||(e[2]=o=>i.activeFilter=o),n.loadRoles],items:i.activeOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(b,{cols:"12",md:"4"},{default:l(()=>[t(A,{modelValue:s.search,"onUpdate:modelValue":[e[3]||(e[3]=o=>s.search=o),n.loadRoles],label:"Search roles","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(C,null,{default:l(()=>[t(x,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[19]||(e[19]=r("span",null,"Roles",-1)),r("span",X,[e[18]||(e[18]=m(" Total Records: ")),r("strong",null,p(s.pagination.total||0),1),i.roles.length>0?(d(),c("span",Y," | Showing "+p((s.currentPage-1)*s.perPage+1)+" to "+p(Math.min(s.currentPage*s.perPage,s.pagination.total))+" of "+p(s.pagination.total),1)):P("",!0)])]),_:1,__:[19]}),t(w,null,{default:l(()=>[t(N,null,{default:l(()=>[r("thead",null,[r("tr",null,[r("th",{class:"sortable",onClick:e[4]||(e[4]=o=>n.onSort("name"))},[r("div",Z,[e[20]||(e[20]=m(" Name ")),t(U,{icon:s.getSortIcon("name"),size:"small",class:"ml-1"},null,8,["icon"])])]),r("th",{class:"sortable",onClick:e[5]||(e[5]=o=>n.onSort("slug"))},[r("div",$,[e[21]||(e[21]=m(" Slug ")),t(U,{icon:s.getSortIcon("slug"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[23]||(e[23]=r("th",null,"Permissions",-1)),r("th",{class:"sortable",onClick:e[6]||(e[6]=o=>n.onSort("is_active"))},[r("div",ee,[e[22]||(e[22]=m(" Status ")),t(U,{icon:s.getSortIcon("is_active"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[24]||(e[24]=r("th",null,"Type",-1)),e[25]||(e[25]=r("th",null,"Actions",-1))])]),r("tbody",null,[(d(!0),c(V,null,S(i.roles,o=>(d(),c("tr",{key:o.id},[r("td",null,[r("div",se,p(o.name),1),r("div",ie,p(o.description||"No description"),1)]),r("td",null,[t(R,{size:"small",variant:"outlined"},{default:l(()=>[m(p(o.slug),1)]),_:2},1024)]),r("td",null,[t(R,{size:"small",color:"primary",variant:"text"},{default:l(()=>[m(p(o.permissions?o.permissions.length:0)+" permissions ",1)]),_:2},1024)]),r("td",null,[t(R,{color:o.is_active?"success":"error",size:"small"},{default:l(()=>[m(p(o.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),r("td",null,[o.is_system?(d(),y(R,{key:0,color:"warning",size:"small"},{default:l(()=>e[26]||(e[26]=[m(" System ")])),_:1,__:[26]})):(d(),c("span",te,"Custom"))]),r("td",null,[t(u,{size:"small",icon:"mdi-pencil",onClick:h=>n.openDialog(o),variant:"text",disabled:o.is_system},null,8,["onClick","disabled"]),t(u,{size:"small",icon:"mdi-shield-key",onClick:h=>n.openPermissionDialog(o),variant:"text"},null,8,["onClick"]),t(u,{size:"small",icon:"mdi-delete",onClick:h=>n.deleteRole(o),variant:"text",color:"error",disabled:o.is_system},null,8,["onClick","disabled"])])]))),128)),i.roles.length===0?(d(),c("tr",oe,e[27]||(e[27]=[r("td",{colspan:"6",class:"text-center py-4"},"No roles found",-1)]))):P("",!0)])]),_:1}),r("div",le,[r("div",re,[i.roles.length>0&&s.pagination.total>0?(d(),c("span",ne,[e[28]||(e[28]=m(" Showing ")),r("strong",null,p((s.currentPage-1)*s.perPage+1),1),e[29]||(e[29]=m(" to ")),r("strong",null,p(Math.min(s.currentPage*s.perPage,s.pagination.total)),1),e[30]||(e[30]=m(" of ")),r("strong",null,p(s.pagination.total.toLocaleString()),1),e[31]||(e[31]=m(" records ")),s.pagination.last_page>1?(d(),c("span",ae," (Page "+p(s.currentPage)+" of "+p(s.pagination.last_page)+") ",1)):P("",!0)])):(d(),c("span",de," No records found "))]),s.pagination.last_page>1?(d(),c("div",me,[t(j,{modelValue:s.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=o=>s.currentPage=o),n.loadRoles],length:s.pagination.last_page,"total-visible":7,density:"comfortable"},null,8,["modelValue","length","onUpdate:modelValue"])])):P("",!0)])]),_:1})]),_:1}),t(I,{modelValue:i.dialog,"onUpdate:modelValue":e[14]||(e[14]=o=>i.dialog=o),"max-width":"600",persistent:""},{default:l(()=>[t(C,null,{default:l(()=>[t(x,null,{default:l(()=>[m(p(i.editingRole?"Edit Role":"Add New Role"),1)]),_:1}),t(w,null,{default:l(()=>[i.editingRole&&i.editingRole.is_system?(d(),y(D,{key:0,type:"info",variant:"tonal",class:"mb-4"},{default:l(()=>e[32]||(e[32]=[r("strong",null,"System Role:",-1),m(" This is a system role. Core properties (name, slug, description, status, order) cannot be modified. Only permissions can be updated using the permissions button. ")])),_:1,__:[32]})):P("",!0),t(B,{ref:"roleForm",onSubmit:J(n.saveRole,["prevent"])},{default:l(()=>[t(A,{modelValue:i.form.name,"onUpdate:modelValue":e[8]||(e[8]=o=>i.form.name=o),label:"Role Name",rules:[i.rules.required],required:"",hint:"Display name for the role","persistent-hint":"",class:"mb-4",disabled:i.editingRole&&i.editingRole.is_system,onBlur:n.autoGenerateSlugFromName},null,8,["modelValue","rules","disabled","onBlur"]),t(A,{modelValue:i.form.slug,"onUpdate:modelValue":e[9]||(e[9]=o=>i.form.slug=o),label:"Slug",hint:"URL-friendly identifier (auto-generated if empty)","persistent-hint":"",class:"mb-4",disabled:i.editingRole&&i.editingRole.is_system},null,8,["modelValue","disabled"]),t(O,{modelValue:i.form.description,"onUpdate:modelValue":e[10]||(e[10]=o=>i.form.description=o),label:"Description",hint:"Brief description of the role","persistent-hint":"",rows:"2",class:"mb-4",disabled:i.editingRole&&i.editingRole.is_system},null,8,["modelValue","disabled"]),t(A,{modelValue:i.form.order,"onUpdate:modelValue":e[11]||(e[11]=o=>i.form.order=o),modelModifiers:{number:!0},label:"Order",type:"number",hint:"Display order (lower numbers first)","persistent-hint":"",class:"mb-4",disabled:i.editingRole&&i.editingRole.is_system},null,8,["modelValue","disabled"]),t(L,{modelValue:i.form.is_active,"onUpdate:modelValue":e[12]||(e[12]=o=>i.form.is_active=o),label:"Active",hint:"Inactive roles cannot be assigned to users","persistent-hint":"",class:"mb-4",disabled:i.editingRole&&i.editingRole.is_system},null,8,["modelValue","disabled"]),t(M,{class:"my-4"}),r("div",ue,[r("div",ce,[e[35]||(e[35]=r("div",null,[r("h3",{class:"text-h6 mb-1"},"Permissions"),r("p",{class:"text-caption text-grey"},"Select permissions to assign to this role")],-1)),r("div",pe,[t(u,{size:"small",variant:"outlined",onClick:n.selectAllPermissions,color:"primary"},{default:l(()=>e[33]||(e[33]=[m(" Select All ")])),_:1,__:[33]},8,["onClick"]),t(u,{size:"small",variant:"outlined",onClick:n.deselectAllPermissions,color:"grey"},{default:l(()=>e[34]||(e[34]=[m(" Deselect All ")])),_:1,__:[34]},8,["onClick"])])])]),t(A,{modelValue:i.permissionSearch,"onUpdate:modelValue":e[13]||(e[13]=o=>i.permissionSearch=o),label:"Search permissions","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",class:"mb-4"},null,8,["modelValue"]),Object.keys(n.filteredGroupedPermissions).length>0?(d(),c("div",fe,[(d(!0),c(V,null,S(n.filteredGroupedPermissions,(o,h)=>(d(),c("div",{key:h,class:"permission-group mb-4"},[t(C,{variant:"outlined"},{default:l(()=>[t(x,{class:"d-flex justify-space-between align-center py-2"},{default:l(()=>[r("div",ge,[r("span",he,p(h.charAt(0).toUpperCase()+h.slice(1)),1),t(R,{size:"small",color:"primary",variant:"flat"},{default:l(()=>[m(p(n.getSelectedCountInGroup(h))+" / "+p(o.length)+" selected ",1)]),_:2},1024)]),r("div",ve,[t(u,{size:"x-small",variant:"text",onClick:v=>n.selectAllInGroup(h),color:"primary"},{default:l(()=>e[36]||(e[36]=[m(" Select All ")])),_:2,__:[36]},1032,["onClick"]),t(u,{size:"x-small",variant:"text",onClick:v=>n.deselectAllInGroup(h),color:"grey"},{default:l(()=>e[37]||(e[37]=[m(" Clear ")])),_:2,__:[37]},1032,["onClick"])])]),_:2},1024),t(w,null,{default:l(()=>[Array.isArray(o)?(d(),y(G,{key:0},{default:l(()=>[(d(!0),c(V,null,S(o,v=>(d(),y(b,{key:v.id,cols:"12",md:"6",lg:"4"},{default:l(()=>[t(E,{"model-value":n.isFormPermissionSelected(v.id),"onUpdate:modelValue":T=>n.toggleFormPermission(v.id),label:v.name,hint:v.description,"persistent-hint":"",density:"comfortable",color:"primary"},{label:l(()=>[r("div",null,[r("div",ye,p(v.name),1),v.description?(d(),c("div",_e,p(v.description),1)):P("",!0)])]),_:2},1032,["model-value","onUpdate:modelValue","label","hint"])]),_:2},1024))),128))]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024)]))),128))])):(d(),y(D,{key:1,type:"info",variant:"tonal",class:"mb-4"},{default:l(()=>[i.permissionSearch?(d(),c("div",Pe,' No permissions found matching "'+p(i.permissionSearch)+'" ',1)):(d(),c("div",be," No permissions available. Please ensure permissions are loaded. "))]),_:1}))]),_:1},8,["onSubmit"])]),_:1}),t(z,null,{default:l(()=>[t(F),t(u,{onClick:n.closeDialog,variant:"text"},{default:l(()=>e[38]||(e[38]=[m("Cancel")])),_:1,__:[38]},8,["onClick"]),i.editingRole&&i.editingRole.is_system?(d(),y(u,{key:0,onClick:n.closeDialog,color:"primary"},{default:l(()=>e[39]||(e[39]=[m(" Close ")])),_:1,__:[39]},8,["onClick"])):(d(),y(u,{key:1,onClick:n.saveRole,color:"primary",loading:s.saving},{default:l(()=>[m(p(i.editingRole?"Update":"Create"),1)]),_:1},8,["onClick","loading"]))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:i.permissionDialog,"onUpdate:modelValue":e[15]||(e[15]=o=>i.permissionDialog=o),"max-width":"800",persistent:""},{default:l(()=>[t(C,null,{default:l(()=>[t(x,null,{default:l(()=>{var o,h;return[m(" Manage Permissions - "+p((o=i.selectedRole)==null?void 0:o.name)+" ",1),(h=i.selectedRole)!=null&&h.is_system?(d(),y(R,{key:0,color:"warning",size:"small",class:"ml-2"},{default:l(()=>e[40]||(e[40]=[m(" System Role ")])),_:1,__:[40]})):P("",!0)]}),_:1}),t(w,null,{default:l(()=>[i.loadingPermissions?(d(),c("div",Re,[t(H,{indeterminate:"",color:"primary"})])):(d(),c("div",ke,[Object.keys(n.safeGroupedPermissions).length===0?(d(),c("div",Ae,e[41]||(e[41]=[r("p",{class:"text-grey"},"No permissions available",-1)]))):(d(),c("div",we,[(d(!0),c(V,null,S(n.safeGroupedPermissions,(o,h)=>(d(),c("div",{key:h,class:"mb-6"},[r("h3",Ce,p(h.charAt(0).toUpperCase()+h.slice(1)),1),Array.isArray(o)?(d(),y(G,{key:0},{default:l(()=>[(d(!0),c(V,null,S(o,v=>(d(),y(b,{key:v.id,cols:"12",md:"6"},{default:l(()=>[t(E,{"model-value":n.isPermissionSelected(v.id),"onUpdate:modelValue":T=>n.togglePermission(v.id),label:v.name,hint:v.description,"persistent-hint":"",density:"compact"},null,8,["model-value","onUpdate:modelValue","label","hint"])]),_:2},1024))),128))]),_:2},1024)):(d(),y(D,{key:1,type:"warning",variant:"tonal",class:"mt-2"},{default:l(()=>e[42]||(e[42]=[m(" Invalid permission group structure ")])),_:1,__:[42]}))]))),128))]))]))]),_:1}),t(z,null,{default:l(()=>[t(F),t(u,{onClick:n.closePermissionDialog,variant:"text"},{default:l(()=>e[43]||(e[43]=[m("Cancel")])),_:1,__:[43]},8,["onClick"]),t(u,{onClick:n.savePermissions,color:"primary",loading:i.savingPermissions},{default:l(()=>e[44]||(e[44]=[m(" Save Permissions ")])),_:1,__:[44]},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Ge=q(Q,[["render",Ve],["__scopeId","data-v-5b9def4e"]]);export{Ge as default};
